"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2391,6457],{95016:(e,t,s)=>{s.r(t),s.d(t,{DesktopSettings:()=>Ms,default:()=>Fs});var n=s(79474),i=s(22215),l=s(38732),r=s(19498),a=s(14056),o=s(97500),c=s.n(o),d=s(71044),u=s(82372),g=s(85563);const h={section:"x-settings-section",hidden:"afyQ2L5zTtlSDtn9WPjd"};var p=s(13274);function x({children:e,filterMatchQuery:t}){const{filter:s}=(0,n.useContext)(u.g),{setSectionMatch:i,sectionContainsMatch:l}=(0,g.A)(),r=(0,d.C)(s,t);(0,n.useEffect)((()=>{i(r)}),[r,i]);const a=!r&&!l;return(0,p.jsx)("div",{className:c()(h.section,{[h.hidden]:a}),children:e})}function m(e){return(0,p.jsx)(g.R,{children:(0,p.jsx)(x,{...e})})}var j=s(98764),f=s(47583);function y({children:e,className:t,semanticColor:s="textBase"}){const{filter:i}=(0,n.useContext)(u.g);return(0,p.jsx)(j.E,{as:"h2",variant:"bodyMediumBold",semanticColor:s,className:t,children:(0,p.jsx)(f.M,{searchWords:[i],textToHighlight:e})})}var k=s(80964),v=s(28049),R=s(45643),b=s(99754),w=s(3351),C=(s(26831),s(50629)),S=s(30939),M=s(19293),F=s(94710);s(70048);const Q=new(s(3775).l)("changeAttributes","mutation","ac50e9d82b3b8303c73512f297140e774a69eb0d6250769b5669e69b4be28886",null);const N=["personalizedRecommendations"],A=()=>{const{getGraphQLLoader:e}=(0,F.mv)(),t=e(),s=(0,k.jE)(),i=((0,w.g)(),(0,b.wA)()),l=!(0,S.n)(),r="1"===(0,C.$)("dsa-mode-enabled"),a="1"===(0,C.$)("dsa-mode-available"),o=(0,n.useCallback)((async e=>{if(l)throw new Error("User has to be online");await async function(e,t){const s=await e(Q,{input:{dsaModeEnabled:t,birthdate:null,filterAgeRestrictedContent:null,filterExplicitContent:null,lockFilterExplicitContent:null,optInTrialPremiumOnlyMarket:null}}),{errors:n,data:i}=s||{};if(!i?.changeUserAccountAttributes)throw n&&n.length>0?new Error(`GraphQL error: ${n[0].message}`):new Error("Unknown GraphQL error!");if("ChangeUserAccountAttributesResult"!==i.changeUserAccountAttributes.__typename||"ChangeUserAccountAttributesResult"===i.changeUserAccountAttributes.__typename&&!i.changeUserAccountAttributes.success)throw new Error("Couldn't successfully set new value")}(t,e)}),[l,t]),c=(0,n.useRef)(r);c.current=r;const{data:d}=(0,v.I)({queryKey:N,queryFn:()=>c.current});return[a??!1,d??!1,(0,R.n)({mutationFn:o,onMutate:async e=>{await s.cancelQueries({queryKey:N});const t=s.getQueryData(N);return s.setQueryData(N,e),{prevState:t,newState:e}},onError:(e,t,n)=>{s.setQueryData(N,n?.prevState),i(M.bL.actions.open())},onSuccess:()=>{0}}).mutate]};var q=s(83648),E=s(75257),_=s(68615),W=s(50712),z=s(59550),L=s(43613);const I="xpVsqMQfmc20cBLG04zw",O=({dsaModeEnabled:e,setDsaModeEnabled:t})=>{const s=(0,b.wA)(),i=(0,q.zy)(),l=new URLSearchParams(i.search).get("highlight"),r=(0,n.useRef)(null);return(0,n.useEffect)((()=>{l?.includes("dsa")&&r.current&&(r.current.focus(),document.documentElement.classList.remove("no-focus-outline"))}),[l]),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("web-player.settings.personalized-recommendations"),children:[(0,p.jsxs)(L.q,{className:I,children:[(0,p.jsx)(_.W,{htmlFor:"settings.dsaMode",children:a.Ru.get("web-player.settings.personalized-recommendations")}),(0,p.jsx)(_.W,{htmlFor:"settings.dsaMode",variant:"marginal",children:a.Ru.get("web-player.settings.personalized-recommendations-body-text")})]}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.dsaMode",value:!e,onSelected:e=>{e?t(!e):s(M.UU.actions.open({onConfirm:()=>t(!e)}))},inputRef:r})})]})},V=({sectionAbove:e})=>{const[t,s,n]=A();return t||e?(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("web-player.settings.content-preferences"),children:[(0,p.jsx)(y,{children:a.Ru.get("web-player.settings.content-preferences")}),e,t&&(0,p.jsx)(O,{dsaModeEnabled:s,setDsaModeEnabled:n})]}):null};var T=s(3654);let D=function(e){return e.LIBRARY_COMPACT_MODE="library-compact-mode",e.NOW_PLAYING_VIEW="now-playing-view",e.CANVAS_VIDEOS="canvas-videos",e}({});var H=s(83394);const K=e=>{const{spec:t,logger:s}=(0,H.h)();return(0,n.useCallback)((n=>{n?s.logInteraction(t.settingsRowFactory({identifier:e}).hitSettingEnable()):s.logInteraction(t.settingsRowFactory({identifier:e}).hitSettingDisable())}),[e,s,t])},U=()=>{const{libraryRowMode:e,setLibraryRowMode:t}=(0,T.q)(),s=K(D.LIBRARY_COMPACT_MODE),i=(0,n.useCallback)((e=>{s(e),t(e?T.A.COMPACT:T.A.DEFAULT)}),[s,t]);return(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("settings.library.compactMode"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.library.compact-mode",children:a.Ru.get("settings.library.compactMode")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.library.compact-mode",value:e===T.A.COMPACT,onSelected:i})})]})},P=({children:e})=>(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("settings.library"),children:[(0,p.jsx)(y,{children:a.Ru.get("settings.library")}),e]})}),B="_czgnX6y44Or6X9pI6gc",G=({children:e,outerRef:t})=>(0,p.jsx)(u.s,{uri:"spotify:internal:settings",children:(0,p.jsx)("div",{ref:t,className:B,"data-testid":"settings-page",children:e})});var Z=s(98196),$=s(39950);const Y="O2vRz41OsAH0O7xVA4La",J="y4CT4_q630fWtqu7Zggt";function X({containerRef:e}){return(0,p.jsxs)("div",{className:Y,children:[(0,p.jsx)(j.E,{as:"h1",variant:"titleMedium",className:J,semanticColor:"textBase",paddingBottom:Z.CD,children:a.Ru.get("desktop.settings.settings")}),(0,p.jsx)("div",{children:(0,p.jsx)($.S,{placeholder:"",alwaysExpanded:!1,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:0})})]})}var ee=s(12555);const te=({settings:{values:e},setValue:t})=>navigator&&/^win/i.test(navigator.platform)?(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.compatibility"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.compatibility")}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.enableHardwareAcceleration"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.enableHardwareAcceleration",children:a.Ru.get("desktop.settings.enableHardwareAcceleration")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.enableHardwareAcceleration",value:!!e["ui.hardware_acceleration"],onSelected:e=>{t("ui.hardware_acceleration",e)}})})]})]}):null;var se=s(60832),ne=s(26481),ie=s(82548),le=s(9908);function re(){const e=(0,ne.G)(),[t,s]=(0,n.useState)(!1),i=(0,n.useCallback)((t=>{e.setEnabledState(t)}),[e]);return(0,n.useEffect)((()=>e.subscribeToEnabledState(s)),[e]),[t,i]}function ae(){const e=(0,ne.G)(),[t,s]=(0,n.useState)(e.getPreset()),i=(0,n.useCallback)((t=>{e.setPreset(t)}),[e]);return(0,n.useEffect)((()=>e.subscribeToPresetChange((e=>{s(e)})))),[t,i]}var oe=s(98678);function ce(e){return`${e>0?`+${e}`:e}dB`}const de={wrapper:"x-settings-equalizerPanelWrapper",preset:"x-settings-equalizerPanelPreset",filters:"x-settings-equalizerPanelFilters",filter:"x-settings-equalizerPanelFilter",input:"x-settings-equalizerPanelInput",label:"x-settings-equalizerPanelLabel",gainLabel:"x-settings-equalizerPanelGainLabel",gainLabelUp:"x-settings-equalizerPanelGainLabelUp",gainLabelDown:"x-settings-equalizerPanelGainLabelDown",canvas:"x-settings-equalizerPanelCanvas"};function ue({filter:e,onChange:t}){const s=(0,ne.G)(),i=(0,n.useRef)(null),[l]=ae();(0,n.useEffect)((()=>{const t=l.filters.find((t=>t.key===e.key));i.current&&t&&(i.current.value=`${t.gain}`)}),[l,e.key]),(0,n.useEffect)((()=>{i.current&&i.current.setAttribute("aria-valuetext",a.Ru.get("equalizer.filterA11yValueText",e.gain))}),[]);const r=(0,oe.YQ)(((e,t)=>{s.setFilterGain(e,t)}),100,{maxWait:200});return(0,p.jsxs)("div",{className:de.filter,children:[(0,p.jsx)("input",{"aria-label":a.Ru.get("equalizer.filterLabel",e.frequency),ref:i,type:"range",min:-le.Zs,max:le.Zs,step:.1,defaultValue:e.gain,className:de.input,onChange:s=>{const n=parseFloat(s.target.value);s.target.setAttribute("aria-valuetext",a.Ru.get("equalizer.filterA11yValueText",n)),r(e.key,n),t(n)}}),(0,p.jsx)("label",{className:de.label,children:(o=e.frequency,o>=1e3?o/1e3+"KHz":`${o}Hz`)})]});var o}const ge=()=>{const[e,t]=(0,n.useState)(window.devicePixelRatio||1);return(0,n.useEffect)((()=>{const e=()=>{matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`).addEventListener("change",(()=>{t(window.devicePixelRatio),e()}),{once:!0})};e()}),[]),e};var he=s(74938);function pe(e,t){e.moveTo(t[0],t[1]);for(let s=2;s<t.length-1;s+=2)e.lineTo(t[s],t[s+1])}function xe(e){const t=.6,s=[],n=e.reduce(((e,t)=>(e.push(t.x),e.push(t.y),e)),[]);n.unshift(e[0].y),n.unshift(e[0].x),n.push(e[e.length-1].x),n.push(e[e.length-1].y);for(let e=2;e<n.length-4;e+=2)for(let i=0;i<=16;i++){const l=(n[e+2]-n[e-2])*t,r=(n[e+4]-n[e])*t,a=(n[e+3]-n[e-1])*t,o=(n[e+5]-n[e+1])*t,c=i/16,d=2*Math.pow(c,3)-3*Math.pow(c,2)+1,u=-2*Math.pow(c,3)+3*Math.pow(c,2),g=Math.pow(c,3)-2*Math.pow(c,2)+c,h=Math.pow(c,3)-Math.pow(c,2),p=d*n[e]+u*n[e+2]+g*l+h*r,x=d*n[e+1]+u*n[e+3]+g*a+h*o;s.push(p),s.push(x)}return s}var me=s(59841);function je(e,t){const s=e.getContext("2d");s&&(s.clearRect(0,0,e.clientWidth,e.clientHeight),function(e,t,s){const n=t.clientWidth,i=t.clientHeight,l=n/s.length/2;e.beginPath();const r=e.createLinearGradient(n/2,0,n/2,i);r.addColorStop(0,"rgba(11%, 73%, 33%, 100%)"),r.addColorStop(1,"rgba(11%, 73%, 33%, 0%)"),e.fillStyle=r,pe(e,xe(s)),e.lineTo(n-l,i),e.lineTo(l,i),e.fill()}(s,e,t),function(e,t){e.beginPath(),e.strokeStyle="rgb(11%, 73%, 33%)",e.lineWidth=4,pe(e,xe(t)),e.stroke()}(s,t),function(e,t){e.fillStyle=me.white,t.forEach((t=>{e.beginPath(),e.arc(t.x,t.y,4,0,2*Math.PI),e.fill()}))}(s,t))}const fe=60,ye=300;function ke(e,t){const s=t.clientWidth/e.length;return e.map(((e,n)=>({x:n*s+s/2,y:t.clientHeight-(e+le.Zs+3)/(2*le.Zs+6)*t.clientHeight})))}function ve(e){const t=(0,n.useRef)(null),s=ge(),i=(0,n.useCallback)((()=>{if(!t.current)return;const e=s,n=t.current.getBoundingClientRect();t.current.width=n.width*e,t.current.height=n.height*e,t.current.getContext("2d")?.scale(e,e)}),[s]),l=(0,n.useCallback)((()=>{if(!t.current||!e.current)return;const s=ke(e.current,t.current);je(t.current,s)}),[e]),r=(0,n.useCallback)((s=>{if(!t.current||!e.current)return;const n=ke(e.current,t.current),i=ke(s,t.current);!function(e,t,s){const n=fe*(ye/1e3);let i=0;const l=JSON.parse(JSON.stringify(t)),r=s.map(((e,s)=>e.y-t[s].y)),a=()=>{if(!(i>=n)){for(let e=0;e<l.length;e++){const a=t[e].y,d=r[e];l[e].y=(s=a,o=d,c=i,(c/=n/2)<1?o/2*Math.pow(c,3)+s:(c-=2,o/2*(Math.pow(c,3)+2)+s))}var s,o,c;je(e,l),i++,window.requestAnimationFrame(a)}};window.requestAnimationFrame(a)}(t.current,n,i)}),[e]);return(0,n.useEffect)((()=>{i(),l()}),[i,l]),(0,he.w)({refOrElement:t,onResize:()=>{i(),l()}}),{canvasRef:t,drawCanvas:l,animateCanvas:r}}function Re(){const[e,t]=re(),[s,i]=ae(),l=(0,n.useRef)(s.filters.map((e=>e.gain))),{canvasRef:r,drawCanvas:o,animateCanvas:d}=ve(l);return(0,n.useEffect)((()=>{const e=s.filters.map((e=>e.gain));"custom"!==s.key&&d(e),l.current=e}),[s,d]),(0,p.jsxs)("div",{className:de.wrapper,children:[(0,p.jsx)("canvas",{"aria-label":a.Ru.get("equalizer.equalizer"),role:"img",className:de.canvas,ref:r}),(0,p.jsx)("label",{className:c()(de.gainLabel,de.gainLabelUp),children:ce(le.Zs)}),(0,p.jsx)("label",{className:c()(de.gainLabel,de.gainLabelDown),children:ce(-le.Zs)}),(0,p.jsx)("div",{className:de.filters,dir:"ltr",children:s.filters.map(((s,n)=>(0,p.jsx)(ue,{filter:s,onChange:s=>{l.current[n]=s,o(),e||t(!0),i((0,le.zP)(l.current))}},s.key)))})]})}var be=s(7141);const we={container:"x-settings-equalizerPresetsContainer",label:"x-settings-equalizerPresetsLabel"};function Ce(){const[e,t]=re(),[s,n]=ae();return(0,p.jsxs)("div",{className:we.container,children:[(0,p.jsx)(j.E,{as:"label",variant:"bodySmall",semanticColor:"textSubdued",htmlFor:"desktop.equalizer.preset",className:we.label,children:a.Ru.get("equalizer.presets")}),(0,p.jsxs)(be.C,{id:"desktop.equalizer.preset",value:s.key,onSelect:s=>{n(s),e||t(!0)},children:["custom"===s.key&&(0,p.jsx)("option",{value:s.key,children:s.displayName}),Object.entries(le.fG).map((([e,t])=>(0,p.jsx)("option",{value:e,children:t.displayName},e)))]})]})}var Se=s(66675);function Me(){const[e,t]=re(),[,s]=ae();return(0,p.jsx)(Se.n,{onClick:()=>{s(le.fG.flat.key),e||t(!0)},size:"small",children:a.Ru.get("equalizer.reset")})}function Fe(){const[e,t]=re();return(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("equalizer.equalizer"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.equalizer",children:a.Ru.get("equalizer.equalizer")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.equalizer",value:e,onSelected:t})})]})}const Qe="x-settings-equalizerSection",Ne="x-settings-equalizerWrapper",Ae="x-settings-equalizerResetButtonWrapper";function qe(){const e=(0,ne.G)();return(0,i.NC)(ie.AM,{loadingValue:!1})&&e.isSupported()?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Fe,{}),(0,p.jsx)(W.i,{filterMatchQuery:a.Ru.get("equalizer.equalizer"),children:(0,p.jsxs)("div",{className:Qe,children:[(0,p.jsx)(Ce,{}),(0,p.jsx)("div",{className:Ne,children:(0,p.jsx)(Re,{})}),(0,p.jsx)("div",{className:Ae,children:(0,p.jsx)(Me,{})})]})})]}):null}const Ee="x-settings-crossFadeContainer",_e=12e3,We=({settings:{values:e},setValue:t})=>{const s=(0,i.NC)(r.$GE),l=(0,i.NC)(r.UrL),o=(0,i.NC)(r.tsC),[c,d]=(0,n.useState)(-1),u=-1===c?Number(e["audio.crossfade.time_v2"]):c,g=`${Math.round(u/1e3)} ${a.Ru.get("desktop.settings.sec")}`;return(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.playback"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.playback")}),void 0!==e["audio.crossfade_v2"]&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.crossfadeTracks"),children:[(0,p.jsxs)(L.q,{children:[(0,p.jsx)(_.W,{htmlFor:"desktop.settings.crossfadeTracks",children:a.Ru.get("desktop.settings.crossfadeTracks")}),e["audio.crossfade_v2"]&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:Ee,children:(0,p.jsx)(se.z2,{value:u,max:_e,step:1e3,labelText:a.Ru.get("desktop.settings.crossfadeTracks"),onStepBackward:()=>{d(Math.max(0,u-1e3))},onStepForward:()=>{d(Math.min(_e,u+1e3))},onDragStart:e=>{d(e*_e)},onDragMove:e=>{d(e*_e)},onDragEnd:e=>{const s=Math.floor(e*_e);d(s),t("audio.crossfade.time_v2",s)}})}),(0,p.jsx)(j.E,{variant:"bodySmall",semanticColor:"textSubdued",children:g})]})]}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.crossfadeTracks",value:!!e["audio.crossfade_v2"],onSelected:e=>{t("audio.crossfade_v2",e)}})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.automixInfo"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.automixInfo",children:a.Ru.get("desktop.settings.automixInfo")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.automixInfo",value:!!e["audio.automix"],onSelected:e=>{t("audio.automix",e)}})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.monoDownmixer"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.monoDownmixer",children:a.Ru.get("desktop.settings.monoDownmixer")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.monoDownmixer",value:!!e["audio.downmixer_v2"],onSelected:e=>{t("audio.downmixer_v2",e)}})})]}),s&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.silenceTrimmer"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.silenceTrimmer",children:a.Ru.get("desktop.settings.silenceTrimmer")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.silenceTrimmer",value:!!e["audio.silence_trimmer_v2"],onSelected:e=>{t("audio.silence_trimmer_v2",e)}})})]}),l&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.dynamicNormalizer"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.dynamicNormalizer",children:a.Ru.get("desktop.settings.dynamicNormalizer")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.dynamicNormalizer",value:!!e["audio.dynamic_normalizer_v2"],onSelected:e=>{t("audio.dynamic_normalizer_v2",e)}})})]}),o&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.otfn"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.otfn",children:a.Ru.get("desktop.settings.otfn")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.otfn",value:!!e["audio.otfn_v2"],onSelected:e=>{t("audio.otfn_v2",e)}})})]}),(0,p.jsx)(qe,{})]})};var ze=s(99028),Le=s(1816),Ie=s(97779);const Oe={get[Ie.WZ.MINIMIZED](){return a.Ru.get("desktop.settings.autostartMinimized")},get[Ie.WZ.NORMAL](){return a.Ru.get("desktop.settings.autostartNormal")},get[Ie.WZ.OFF](){return a.Ru.get("desktop.settings.autostartOff")}},Ve=(0,ze.D)()===Le.f.macOS,Te=({settings:{values:e},setValue:t})=>(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.startupAndWindowBehavior"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.startupAndWindowBehavior")}),void 0!==e["app.autostart-mode"]&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.autostart"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.autostart",children:a.Ru.get("desktop.settings.autostart")})}),(0,p.jsx)(z.n,{children:(0,p.jsxs)(be.C,{id:"desktop.settings.autostart",value:e["app.autostart-mode"],onSelect:e=>{t("app.autostart-mode",e)},children:[(0,p.jsx)("option",{value:Ie.WZ.MINIMIZED,children:Oe[Ie.WZ.MINIMIZED]}),(0,p.jsx)("option",{value:Ie.WZ.NORMAL,children:Oe[Ie.WZ.NORMAL]}),(0,p.jsx)("option",{value:Ie.WZ.OFF,children:Oe[Ie.WZ.OFF]})]})})]}),!Ve&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.closeShouldMinimize"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.closeShouldMinimize",children:a.Ru.get("desktop.settings.closeShouldMinimize")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.closeShouldMinimize",value:!!e["ui.minimize_to_tray"],onSelected:e=>{t("ui.minimize_to_tray",e)}})})]})]}),De={"auto-detect":{label:()=>a.Ru.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>a.Ru.get("desktop.settings.proxy.noproxy")},http:{label:()=>a.Ru.get("desktop.settings.proxy.http")},socks4:{label:()=>a.Ru.get("desktop.settings.proxy.socks4")},socks5:{label:()=>a.Ru.get("desktop.settings.proxy.socks5")}},He=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var Ke=s(63275);const Ue="mpdBa62OP4Fr5wvCsa89",Pe="x-proxySettings-ProxySettings",Be="x-proxySettings-fullWidth",Ge="x-settings-input",Ze="x-proxySettings-horizontalPair",$e=({id:e,type:t,placeHolder:s,inputRef:n,handleOnChange:i})=>(0,p.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:Ge,placeholder:s,ref:n,onChange:i}),Ye=({children:e,label:t})=>(0,p.jsx)(Ke.g,{label:t,className:Ze,children:e}),Je="wjxwX0Alq8DVfoBObi3R";function Xe({onClick:e}){return(0,p.jsx)(Se.n,{className:Je,onClick:e,children:a.Ru.get("settings.restartApp")})}const et=(e,t,s)=>{let n=`${e}:${t}`;switch(s){case 2:n+="@http";break;case 3:n+="@socks4";break;case 4:n+="@socks5"}return n},tt=({addr:e,mode:t="0",pass:s,user:i,setValue:l,restartContainer:r,fullWidth:o})=>{const d=(0,n.useRef)(null),u=(0,n.useRef)(null),g=(0,n.useRef)(null),h=(0,n.useRef)(null),x=Number(t),[j,f]=(0,n.useState)(""),[k,v]=(0,n.useState)(""),[R,b]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const[t,s]=e?.split(/[:@]+/)||["",""];f(t),v(s),d.current&&(d.current.value=t),u.current&&(u.current.value=s)}),[e]),(0,n.useEffect)((()=>{h.current&&s&&(h.current.value=s.toString())}),[s]),(0,n.useEffect)((()=>{g.current&&i&&(g.current.value=i.toString())}),[i]);const w=(0,n.useCallback)((({target:e})=>{const t=et(e.value,k,x);f(e.value),l("network.proxy.addr",t),b(!0)}),[x,k,l]),C=(0,n.useCallback)((({target:e})=>{const t=et(j,e.value,x);v(e.value),l("network.proxy.addr",t),b(!0)}),[x,j,l]),S=(0,n.useCallback)((({target:e})=>{l("network.proxy.user",e.value),b(!0)}),[l]),M=(0,n.useCallback)((({target:e})=>{l("network.proxy.pass",e.value),b(!0)}),[l]),F=0!==x&&1!==x,Q=3!==x;return(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.proxy.title"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.proxy.title")}),(0,p.jsxs)("div",{className:c()(Pe,o?Be:null),children:[(0,p.jsx)(Ye,{label:a.Ru.get("desktop.settings.proxy.type"),children:(0,p.jsx)(be.C,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);l("network.proxy.mode",t),b(!0)},children:He.map((({enumKey:e,enumValue:t})=>(0,p.jsx)("option",{value:t,"data-testid":e,children:De[e]?De[e].label():""},e)))})}),F?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:Ue,children:[(0,p.jsx)(Ye,{label:a.Ru.get("desktop.settings.proxy.host"),children:(0,p.jsx)($e,{id:"network.proxy.host",handleOnChange:w,placeHolder:a.Ru.get("desktop.settings.proxy.host"),inputRef:d})}),(0,p.jsx)(Ye,{label:a.Ru.get("desktop.settings.proxy.port"),children:(0,p.jsx)($e,{id:"network.proxy.port",type:"number",handleOnChange:C,placeHolder:a.Ru.get("desktop.settings.proxy.port"),inputRef:u})})]}),(0,p.jsxs)("div",{className:Q?Ue:void 0,children:[(0,p.jsx)(Ye,{label:a.Ru.get("desktop.settings.proxy.user"),children:(0,p.jsx)($e,{id:"network.proxy.user",handleOnChange:S,placeHolder:a.Ru.get("desktop.settings.proxy.user"),inputRef:g})}),Q?(0,p.jsx)(Ye,{label:a.Ru.get("desktop.settings.proxy.pass"),children:(0,p.jsx)($e,{id:"network.proxy.pass",handleOnChange:M,placeHolder:a.Ru.get("desktop.settings.proxy.pass"),type:"password",inputRef:h})}):null]})]}):null,R&&(0,p.jsx)("div",{children:(0,p.jsx)(Xe,{onClick:r})})]})]})};var st=s(28244),nt=s(76922),it=s(85961);function lt(){const e=(0,it.Q)(),[t,s]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),[r,a]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const t=window.setInterval((()=>{!async function(){if(null===r){try{const t=await e.getStatistics();s(t)}catch(e){a(e instanceof Error?e:new Error("Error when fetching storage statistics."))}l(!1)}}()}),1500);return()=>clearInterval(t)}),[e,r]),[t,i,r]}const rt="x-settings-button",at="x-settings-wordBreakAll",ot=({settings:e,setValue:t})=>{const s=(0,n.useContext)(nt._),i=(0,n.useContext)(ee.b),l=!(0,S.n)(),[r,o]=(0,n.useState)(!1),c=(0,n.useCallback)((()=>{i.applyUpdate()}),[i]),[d,u,g]=lt(),h=(0,b.wA)();let x="",j="",f=0;u?(x=a.Ru.get("page.loading"),j=a.Ru.get("page.loading")):g||null===d?(x=a.Ru.get("error.generic"),j=a.Ru.get("error.generic")):(f=d.currentSizeMB-d.currentLockedSizeMB,x=` ${f} MB`,j=` ${d.currentLockedSizeMB} MB`);const k=e.values["storage.location"];return(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.storage"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.storage")}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.storage.downloads.heading"),children:[(0,p.jsx)(L.q,{children:(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(_.W,{htmlFor:"desktop.settings.downloads",semanticColor:"textBase",children:a.Ru.get("desktop.settings.storage.downloads.heading")}),(0,p.jsx)(_.W,{htmlFor:"desktop.settings.downloads",children:j})]}),(0,p.jsx)(_.W,{htmlFor:"desktop.settings.downloads",children:a.Ru.get("desktop.settings.storage.downloads.text")})]})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(Se.n,{id:"desktop.settings.downloads",size:"small",onClick:()=>{h((0,st.KB)())},disabled:l||!d||0===d.currentLockedSizeMB,className:rt,children:a.Ru.get("desktop.settings.storage.downloads.button")})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.storage.cache.heading"),children:[(0,p.jsx)(L.q,{children:(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(_.W,{htmlFor:"desktop.settings.cache",semanticColor:"textBase",children:a.Ru.get("desktop.settings.storage.cache.heading")}),(0,p.jsx)(_.W,{htmlFor:"desktop.settings.cache",children:x})]}),(0,p.jsx)(_.W,{htmlFor:"desktop.settings.cache",children:a.Ru.get("desktop.settings.storage.cache.text")})]})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(Se.n,{id:"desktop.settings.cache",size:"small",onClick:()=>{h((0,st.cd)())},disabled:0===f,className:rt,children:a.Ru.get("desktop.settings.storage.cache.button")})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.offlineStorageLocation"),children:[(0,p.jsx)(L.q,{children:(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.offline-storage",semanticColor:"textBase",children:a.Ru.get("desktop.settings.offlineStorageLocation")})}),(0,p.jsx)(_.W,{htmlFor:"desktop.settings.offline-storage",className:at,children:k})]})}),(0,p.jsxs)(z.n,{children:[(0,p.jsx)(Se.n,{id:"desktop.settings.offline-storage",size:"small",onClick:async()=>{const n=await s.browseForFolder();n.path&&(t("storage.location",n.path),n.path!==e.values["storage.location"]&&o(!0))},className:rt,children:a.Ru.get("desktop.settings.offlineStorageChangeLocation")}),r&&(0,p.jsx)(Xe,{onClick:c})]})]})]})},ct=({settings:e,setValue:t})=>{const s=(0,n.useContext)(ee.b),i=(0,n.useCallback)((()=>{s.applyUpdate()}),[s]),{values:l}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(We,{settings:e,setValue:t}),(0,p.jsx)(Te,{settings:e,setValue:t}),(0,p.jsx)(ot,{settings:e,setValue:t}),(0,p.jsx)(tt,{setValue:t,restartContainer:i,mode:l["network.proxy.mode"],addr:l["network.proxy.addr"],user:l["network.proxy.user"],pass:l["network.proxy.pass"]}),(0,p.jsx)(te,{settings:e,setValue:t})]})};var dt=s(36471),ut=s(78828),gt=s(9623);const ht="H6jjgcz7zPs9Aaaa8YIG",pt=({settings:{values:e}})=>{const t=(0,dt.W)(),s="1"===e["dsa-mode-enabled"],n=(0,ut.t)(),[{data:i},{mutate:l}]=(0,gt.K)(n.autoPlay);return(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.autoplay"),children:[(0,p.jsx)(y,{className:s?ht:void 0,semanticColor:s?"textSubdued":void 0,children:a.Ru.get("desktop.settings.autoplay")}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.autoplayInfo"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"global.settings.autoplayInfo",className:s?ht:void 0,children:s?a.Ru.get("web-player.settings.autoplay-dsa-enabled"):a.Ru.get("desktop.settings.autoplayInfo")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"global.settings.autoplayInfo",value:!!i,onSelected:e=>{t({intent:e?"enable_autoplay":"disable_autoplay",type:"click"}),l(e)},disabled:s})})]})]})};var xt=s(60181),mt=s(3293),jt=s(10098),ft=s(2281),yt=s(99025),kt=s(9751);const vt=()=>{const[e,t]=(0,kt.J)(),s=(0,yt.j)(),i=K(D.CANVAS_VIDEOS),l=(0,n.useCallback)((e=>{i(e),t(e)}),[t,i]);return(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("settings.canvasVideos"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.canvasVideos",children:a.Ru.get("settings.canvasVideos")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.canvasVideos",value:e,onSelected:l,disabled:s})})]})};var Rt=s(74681);const bt=()=>{const[e,t]=(0,Rt.N)(),s=K(D.NOW_PLAYING_VIEW),i=(0,n.useCallback)((e=>{s(e),t(e)}),[t,s]);return(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("settings.npv"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.npv",children:a.Ru.get("settings.npv")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.npv",value:e,onSelected:i})})]})},wt=({settings:{values:e},setValue:t})=>{const s=void 0===e.catalogue||"string"==typeof e.catalogue&&"free"===e.catalogue.toLowerCase(),n=(0,mt.d)(),l=(0,i.NC)(r.yJ8),o=n?.client_capabilities?.can_show_system_media_controls,c=n?.client_capabilities?.can_show_track_notifications,{isActive:d,panelSend:u}=(0,jt.AI)(xt.Z.BuddyFeed);return(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("settings.display"),children:[(0,p.jsx)(y,{children:a.Ru.get("settings.display")}),(0,p.jsx)(bt,{}),l!==r.NtL.CONTROL&&(0,p.jsx)(vt,{}),!s&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("settings.showMusicAnnouncements"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.showMusicAnnouncements",children:a.Ru.get("settings.showMusicAnnouncements")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.showMusicAnnouncements",value:!e["ui.hide_hpto"],onSelected:e=>{t("ui.hide_hpto",!e)}})})]}),c&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("settings.showTrackNotifications"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.trackNotifications",children:a.Ru.get("settings.showTrackNotifications")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.trackNotifications",value:!!e["ui.track_notifications_enabled"],onSelected:e=>{t("ui.track_notifications_enabled",e)}})})]}),o&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.showSystemMediaControls"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.systemMediaControlsEnabled",children:a.Ru.get("desktop.settings.showSystemMediaControls")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.systemMediaControlsEnabled",value:!!e["ui.system_media_controls_enabled"],onSelected:e=>{t("ui.system_media_controls_enabled",e)}})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("buddy-feed.see-what-your-friends-are-playing"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.showFriendActivity",children:a.Ru.get("buddy-feed.see-what-your-friends-are-playing")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.showFriendActivity",value:d,onSelected:()=>{u(ft.$S.BUDDY_FEED_BUTTON_CLICK)}})})]})]})};var Ct=s(51624);const St=()=>{const e=(0,i.NC)(r.meE,{loadingValue:!1}),{playbackHandleType:t,setPlaybackHandleType:s}=(0,Ct.c)();return e?(0,p.jsxs)(W.i,{filterMatchQuery:"Playback handle",children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"",children:"Custom playback handle"})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(be.C,{id:"desktop.settings.playbackHandle",value:t,onSelect:e=>{s(e)},children:Object.values(Ct.I).map((e=>(0,p.jsx)("option",{value:e,children:e},e)))})})]}):null};var Mt=s(58073),Ft=s(32593),Qt=s(31350);const Nt="m7e5wHq6US9u3BbLQXEX",At="ul4DB6lq_3qO_aCiEbcc",qt=()=>{const e=(0,b.wA)(),{locale:t,user:s,overrides:i}=(0,b.d4)(Qt.Ht),l=(0,n.useRef)(null),r=(0,n.useRef)(null),a=(0,n.useCallback)((t=>{l.current&&l.current.value&&e((0,Ft.Rv)(t?l.current.value:""))}),[e]),o=(0,n.useCallback)((t=>{r.current&&r.current.value&&e((0,Ft.zf)(t?r.current.value:""))}),[e]),c=i?.country||s?.country,d=i?.locale||t;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(W.i,{filterMatchQuery:c??"",children:[(0,p.jsx)(L.q,{children:(0,p.jsx)("div",{className:Nt,children:(0,p.jsx)(Mt.c,{id:"overrides.country",onChange:e=>{const t=e.target.checked;a(t)},defaultChecked:!!i?.country,children:(0,p.jsx)(j.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"Country"})})})}),(0,p.jsx)(z.n,{children:(0,p.jsx)("input",{type:"text",id:"overrides.country.input",className:At,disabled:!i?.country,ref:l,defaultValue:c,onChange:()=>a(!0)})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:i?.locale??"",children:[(0,p.jsx)(L.q,{children:(0,p.jsx)("div",{className:Nt,children:(0,p.jsx)(Mt.c,{id:"overrides.locale",onChange:e=>{const t=e.target.checked;o(t)},defaultChecked:!!i?.locale,children:(0,p.jsx)(j.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"Language"})})})}),(0,p.jsx)(z.n,{children:(0,p.jsx)("input",{type:"text",id:"overrides.locale.input",className:At,disabled:!i?.locale,ref:r,defaultValue:d,onChange:()=>o(!0)})})]})]})};var Et=s(22653);const _t=({settings:{values:e},setValue:t})=>{const s=(0,Et.Q)(e),i=(0,n.useContext)(ee.b),[l,r]=(0,n.useState)(!1),o=(0,n.useCallback)((()=>{i.applyUpdate()}),[i]);return s?(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("settings.employee"),children:[(0,p.jsx)(y,{children:a.Ru.get("settings.employee")}),(0,p.jsx)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.language-override"),children:(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"",children:a.Ru.get("desktop.settings.language-override")})})}),(0,p.jsx)(qt,{}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.enableDeveloperMode"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.developerMode",children:a.Ru.get("desktop.settings.enableDeveloperMode")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.developerMode",value:!!e["app.enable-developer-mode"],onSelected:e=>{t("app.enable-developer-mode",e),r(!0)}})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.showChromeToolbar"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.chromiumToolbar",children:a.Ru.get("desktop.settings.showChromeToolbar")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.chromiumToolbar",value:!!e["app.show-chrome-toolbar"],onSelected:e=>{t("app.show-chrome-toolbar",e),r(!0)}})})]}),l&&(0,p.jsx)("div",{children:(0,p.jsx)(Xe,{onClick:o})}),(0,p.jsx)(St,{})]}):null},Wt=({settings:{values:e},setValue:t})=>{const s="1"===e["lock-filter-explicit-content"],n="0"===e["filter-explicit-content"]||void 0===e["filter-explicit-content"],i=s?a.Ru.get("desktop.settings.explicitContentFilterSettingLocked"):a.Ru.get("desktop.settings.explicitContentFilterSetting");return(0,p.jsxs)(W.i,{filterMatchQuery:i,children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.explicitContentFilter",children:i})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.explicitContentFilter",disabled:s,value:n,onSelected:e=>{t("filter-explicit-content",e?"0":"1")}})})]})},zt=({settings:e,setValue:t})=>(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.explicitContentFilter"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.explicitContentFilter")}),(0,p.jsx)(Wt,{settings:e,setValue:t})]});var Lt=s(27778);const It=()=>{const e=(0,n.useContext)(ee.b),t=(0,ut.t)(),[{data:s},{mutate:i}]=(0,gt.K)(t.language),l=(0,n.useCallback)((()=>{e.applyUpdate()}),[e]);return void 0===s?null:(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.language"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.language")}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.selectLanguage"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.selectLanguage",children:a.Ru.get("desktop.settings.selectLanguage")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(be.C,{dir:"auto",value:s,id:"desktop.settings.selectLanguage",onSelect:i,children:Lt.J2.map((e=>(0,p.jsx)("option",{value:e,children:`${Lt.IB[e].displayName} (${Lt.IB[e].displayNameEn})`},e)))})})]}),a.Ru.getLocaleForTranslation()!==s?(0,p.jsx)(Xe,{onClick:l}):null]})},Ot=()=>{const[e,t]=(0,l.y)();return(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("settings.showLocalFiles"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"settings.showLocalFiles",children:a.Ru.get("settings.showLocalFiles")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"settings.showLocalFiles",value:e,onSelected:e=>{t(e)}})})]})};var Vt=s(10132),Tt=s(75653);const Dt=e=>void 0!==e.id;function Ht(e){let t;if(!Dt(e))return e.path;switch(e.id){case Tt.kW.DOWNLOADS:t=a.Ru.get("local-files.source.downloads");break;case Tt.kW.ITUNES:t=a.Ru.get("local-files.source.itunes");break;case Tt.kW.MY_MUSIC:t=a.Ru.get("local-files.source.my_music");break;case Tt.kW.WINDOWS_MUSIC_LIBRARY:t=a.Ru.get("local-files.source.windows_music_library");break;default:t=String(e.id)}return t}const Kt=({source:e,onAddOrRemoveSource:t})=>{const[s,i]=(0,n.useState)(!Dt(e)||e.enabled),l=Dt(e)?String(e.id):e.path;return(0,p.jsxs)(W.i,{filterMatchQuery:Ht(e),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:`settings.local-files.${l}`,children:Ht(e)})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:`settings.local-files.${l}`,value:s,onSelected:s=>{i(s),t(e,s)}})})]})},Ut=()=>{const[e,t]=(0,n.useState)(),s=(0,n.useContext)(nt._),i=(0,Vt.i)(),l=(0,n.useCallback)((async()=>t(await s.getSources())),[s]);(0,n.useEffect)((()=>{l()}),[l]);const r=(0,n.useCallback)((async()=>{const{path:e}=await s.browseForFolder();e&&(await s.addFolder({path:e}),l(),i.say(a.Ru.get("settings.localFilesFolderAdded",e)))}),[i,s,l]),o=(0,n.useCallback)(((e,t)=>{e.enabled=t,s.mutateDefaultSource(e)}),[s]),c=(0,n.useCallback)(((e,t)=>{t?s.addFolder(e):s.removeFolder(e)}),[s]);return(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("settings.showSongsFrom"),children:[(0,p.jsx)(y,{children:a.Ru.get("settings.showSongsFrom")}),e?.defaultSources.map((e=>(0,p.jsx)(Kt,{source:e,onAddOrRemoveSource:o},String(e.id)))),e?.folders.map((e=>(0,p.jsx)(Kt,{source:e,onAddOrRemoveSource:c},e.path))),(0,p.jsx)("div",{children:(0,p.jsx)(Se.n,{size:"small","aria-label":a.Ru.get("settings.addASource"),onClick:()=>{r()},children:a.Ru.get("settings.addASource")})})]})};var Pt=s(38011);function Bt(){const e=(0,ut.t)(),[{data:t},{mutate:s}]=(0,gt.K)(e.quality.autoAdjustQuality);return void 0===t?null:(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.automatic-downgrade.title"),children:[(0,p.jsxs)(L.q,{children:[(0,p.jsx)(_.W,{htmlFor:"desktop.settings.automatic-downgrade",children:a.Ru.get("desktop.settings.automatic-downgrade.title")}),(0,p.jsx)(Pt.f,{message:a.Ru.get("desktop.settings.automatic-downgrade.info")})]}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.automatic-downgrade",value:t,onSelected:s})})]})}const Gt={get[Ie.a1.AUTOMATIC](){return a.Ru.get("desktop.settings.streamingQualityAutomatic")},get[Ie.a1.LOW](){return a.Ru.get("desktop.settings.streamingQualityLow")},get[Ie.a1.MEDIUM](){return a.Ru.get("desktop.settings.streamingQualityNormal")},get[Ie.a1.HIGH](){return a.Ru.get("desktop.settings.streamingQualityHigh")},get[Ie.a1.VERY_HIGH](){return a.Ru.get("desktop.settings.streamingQualityVeryHigh")},get[Ie.a1.HIFI](){return a.Ru.get("desktop.settings.streamingQualityHiFi")}};function Zt({maxQuality:e,formats:t}){const s=e===Ie.Qi.LOSSLESS,n=e>=Ie.Qi.VERY_HIGH;return(0,p.jsx)(p.Fragment,{children:t.filter((({quality:e})=>{switch(e){case Ie.a1.AUTOMATIC:return!s;case Ie.a1.LOW:case Ie.a1.MEDIUM:case Ie.a1.HIGH:return!0;case Ie.a1.VERY_HIGH:return n;case Ie.a1.HIFI:return s;default:return!1}})).map((({quality:e})=>(0,p.jsx)("option",{value:e.toString(),children:Gt[e]},e)))})}var $t=s(18378),Yt=s(31551);function Jt(){const e=(0,ut.t)(),[{data:t},{mutate:s}]=(0,gt.K)(e.quality.downloadAudioQuality),[{data:n}]=(0,gt.K)(e.quality.maxSupportedQuality),i=(0,$t.x)();return void 0===t||void 0===n||void 0===i?null:(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.downloadQuality.title"),children:[(0,p.jsxs)(L.q,{children:[(0,p.jsx)(_.W,{htmlFor:"desktop.settings.downloadQuality",children:a.Ru.get("desktop.settings.downloadQuality.title")}),(0,p.jsx)(Pt.f,{message:a.Ru.get("desktop.settings.downloadQuality.info").replace(/(<([^>]+)>)/gi,"")})]}),(0,p.jsx)(z.n,{children:(0,p.jsx)(be.C,{id:"desktop.settings.downloadQuality",value:t.toString(),onSelect:e=>{const t=(0,Yt.FB)(e);t&&s(t)},children:(0,p.jsx)(Zt,{formats:i,maxQuality:n})})})]})}var Xt=s(45132),es=s(45640),ts=s(41164),ss=s(95230),ns=s(52470),is=s(3979);const ls=()=>{const e=(0,ss.N)(),{deviceFilterState:t}=(0,is.j)(),[s,i]=(0,n.useState)((()=>e.isNormalizationOverriden())),l=t.currentState.externalizationEnabled||t.currentState.specificEnabled,r=s&&l;return(0,ns.G)(ts.n.NORMALIZATION_OVERRIDE_DISABLED,(()=>{i(!1)})),{shouldShowDialog:r,disableOverride:()=>e.disableNormalizationOverride()}};let rs=function(e){return e[e["volume-increase"]=0]="volume-increase",e[e["normalization-turn-off"]=1]="normalization-turn-off",e[e["normalization-turn-on"]=2]="normalization-turn-on",e}({});const as=({type:e,onClose:t,onConfirm:s})=>{const{disableOverride:n}=ls(),i="Normalisation";let l="";switch(e){case rs["volume-increase"]:l="Increasing the volume level while your headphones are optimized may cause occasional distortion.";break;case rs["normalization-turn-off"]:l="Turning off audio normalization while your headphones are optimized may cause audio distortion.";break;case rs["normalization-turn-on"]:l='We\'d recommend changing your volume level to "Quiet" after turning on audio normalization to avoid audio distortion (while your headphones are optimized).';break;default:(0,es.k)(e)}return(0,p.jsx)(Xt.T,{onConfirm:()=>{n(),s(),t()},onClose:t,titleText:i,"aria-label":i,descriptionText:l,cancelText:"Cancel",confirmText:"Confirm"})},os={get[Ie.KR.QUIET](){return a.Ru.get("desktop.settings.loudnessQuiet")},get[Ie.KR.NORMAL](){return a.Ru.get("desktop.settings.loudnessNormal")},get[Ie.KR.LOUD](){return a.Ru.get("desktop.settings.loudnessLoud")}};function cs(){const e=(0,ut.t)(),[{data:t},{mutate:s}]=(0,gt.K)(e.quality.normalizeVolume),[{data:i},{mutate:l}]=(0,gt.K)(e.quality.volumeLevel),{dialog:r,setNormalizeValue:o,setVolumeLevel:c}=((e,t)=>{const{shouldShowDialog:s}=ls(),[i,l]=(0,n.useState)(null),r=(0,n.useRef)(null);return{setNormalizeValue:(0,n.useCallback)((t=>{s?(l(t?rs["normalization-turn-on"]:rs["normalization-turn-off"]),r.current=()=>{e(t)}):e(t)}),[s,e]),setVolumeLevel:(0,n.useCallback)((e=>{s&&e!==Ie.KR.QUIET?(l(rs["volume-increase"]),r.current=()=>{t(e)}):t(e)}),[s,t]),dialog:null!==i?(0,p.jsx)(as,{type:i,onClose:()=>{l(null)},onConfirm:()=>{r.current?.()}}):null}})(s,l);return void 0===t?null:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.normalize"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.normalize",children:a.Ru.get("desktop.settings.normalize")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.normalize",value:!!t,onSelected:o})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.loudnessEnvironment_with_limiter_details"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.loudnessEnvironment",children:a.Ru.get("desktop.settings.loudnessEnvironment_with_limiter_details")})}),(0,p.jsx)(z.n,{children:(0,p.jsxs)(be.C,{id:"desktop.settings.loudnessEnvironment",disabled:!t,value:i,onSelect:e=>{const t=(0,Yt.dt)(e);null!==t&&c(t)},children:[(0,p.jsx)("option",{value:Ie.KR.QUIET,children:os[Ie.KR.QUIET]}),(0,p.jsx)("option",{value:Ie.KR.NORMAL,children:os[Ie.KR.NORMAL]}),(0,p.jsx)("option",{value:Ie.KR.LOUD,children:os[Ie.KR.LOUD]})]})})]}),r]})}var ds=s(63393),us=s(81392),gs=s(27742);const hs="teokJIHsNR2G8sc4ne4S";function ps(){const e=(0,ut.t)(),{enqueueSnackbar:t}=(0,gs.d)(),s=(0,us.K)(us.X.VeryHighQualityAudio),[{data:i},{mutate:l}]=(0,gt.K)(e.quality.streamingQuality),[{data:r}]=(0,gt.K)(e.quality.maxSupportedQuality),o=(0,$t.x)();return(0,n.useEffect)((()=>{s&&t(a.Ru.get("web-player.feature-activation-shelf.audio_quality_toast_message"))}),[s,t]),void 0===i||void 0===r||void 0===o?null:(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.streamingQuality"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.streamingQuality",children:a.Ru.get("desktop.settings.streamingQuality")})}),(0,p.jsxs)(z.n,{children:[(0,p.jsx)(be.C,{id:"desktop.settings.streamingQuality",value:i.toString(),onSelect:e=>{const t=(0,Yt.FB)(e);t&&l(t)},children:(0,p.jsx)(Zt,{formats:o,maxQuality:r})}),s?(0,p.jsx)(ds.Z,{className:hs}):null]})]})}const xs=()=>(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.musicQuality"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.musicQuality")}),(0,p.jsx)(ps,{}),(0,p.jsx)(Jt,{}),(0,p.jsx)(Bt,{}),(0,p.jsx)(cs,{})]});var ms=s(27977),js=s(64936),fs=s(18811);const ys=js.tv.CONNECTION_STATE_CHANGE;var ks=s(21361),vs=s(70682),Rs=s(96660);const bs=()=>{const[e,t]=(()=>{const e=(0,k.jE)(),{user:t}=(0,b.d4)(Qt.Ht),s=t?.uri??"",{enqueueSnackbar:i}=(0,gs.d)(),{data:l,queryKey:r}=(0,Rs.Z)(vs.kp,[{uri:s}]),o=(0,n.useCallback)((async({showFollows:e})=>{await(0,vs.gN)(ks.n.getInstance(),{uri:s,showFollows:e})}),[s]),c=(0,R.n)({mutationFn:o,onMutate:async t=>{await e.cancelQueries({queryKey:r});const s=e.getQueryData(r);return e.setQueryData(r,t),{prevState:s,newState:t}},onError:(t,s,n)=>{e.setQueryData(r,n?.prevState),i(a.Ru.get("error.generic"))},onSettled:()=>{e.invalidateQueries({queryKey:r})}});return[l?.showFollows??!0,c.mutate]})();return(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.showFollows"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.showFollows",children:a.Ru.get("desktop.settings.showFollows")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.showFollows",value:e,onSelected:e=>t({showFollows:e})})})]})},ws="AdlLcqW4qEqJzOzM4IzX";const Cs=({settings:{values:e},setValue:t})=>{const[s,l,o]=function(){const e=(0,fs.d)(),[t,s]=(0,n.useState)(null),i=(0,n.useCallback)((t=>{e.connect(t)}),[e]),l=(0,n.useCallback)((()=>{e.disconnect()}),[e]);return(0,n.useEffect)((()=>{const t=e=>{s(e.data)};return e.addListener(ys,t),()=>{e.removeListener(ys,t)}}),[e,s]),[t,i,l]}(),c=(0,i.NC)(r.Rww,{loadingValue:!1}),d=(0,n.useCallback)((()=>{s?.connection?o():l({window:{width:Math.max(800,window.outerWidth-100),height:Math.max(600,window.outerHeight-100)}})}),[s,l,o]);if(!(void 0!==e["publish-playlist"]&&void 0!==e["incognito-enabled"]))return null;const u=!!e["incognito-enabled"];return(0,p.jsxs)(m,{filterMatchQuery:a.Ru.get("desktop.settings.social"),children:[(0,p.jsx)(y,{children:a.Ru.get("desktop.settings.social")}),s?.show_connect_option&&(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.facebook"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.facebook",children:a.Ru.get("desktop.settings.facebook")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(Se.n,{id:"desktop.settings.facebook",size:"small",className:ws,onClick:d,iconLeading:ms.G,children:!0===s.connection?a.Ru.get("desktop.settings.facebook.disconnect"):a.Ru.get("desktop.settings.facebook.connect")})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.newPlaylistsPublic"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.newPlaylistsPublic",children:a.Ru.get("desktop.settings.newPlaylistsPublic")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.newPlaylistsPublic",value:"1"===e["publish-playlist"],onSelected:e=>{t("publish-playlist",e?"1":"0")}})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.privateSession"),children:[(0,p.jsxs)(L.q,{children:[(0,p.jsx)(_.W,{htmlFor:"desktop.settings.privateSession",children:a.Ru.get("desktop.settings.privateSession")}),(0,p.jsx)(Pt.f,{message:a.Ru.get("desktop.settings.privateSession.tooltip")})]}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.privateSession",value:!!e["incognito-enabled"],onSelected:e=>{t("incognito-enabled",e)}})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.publishActivity"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.publishActivity",children:a.Ru.get("desktop.settings.publishActivity")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.publishActivity",disabled:u,value:"0"!==e["publish-activity"],onSelected:e=>{t("publish-activity",e?"1":"0")}})})]}),(0,p.jsxs)(W.i,{filterMatchQuery:a.Ru.get("desktop.settings.publishTopArtists"),children:[(0,p.jsx)(L.q,{children:(0,p.jsx)(_.W,{htmlFor:"desktop.settings.publishTopArtists",children:a.Ru.get("desktop.settings.publishTopArtists")})}),(0,p.jsx)(z.n,{children:(0,p.jsx)(E.l,{id:"desktop.settings.publishTopArtists",disabled:u,value:"1"===e["public-toplist"],onSelected:e=>{t("public-toplist",e?"1":"0")}})})]}),c&&(0,p.jsx)(bs,{})]})};var Ss=s(72653);const Ms=()=>{const{settings:e,setValue:t}=(0,Ss.t0)(),s=(0,n.useRef)(null),[a]=(0,l.y)(),o=(0,i.NC)(r.YSK),c=(0,i.NC)(r.AEN);return(0,p.jsxs)(G,{outerRef:s,children:[(0,p.jsx)(X,{containerRef:s}),(0,p.jsx)(It,{}),o?(0,p.jsx)(V,{sectionAbove:(0,p.jsx)(Wt,{settings:e,setValue:t})}):(0,p.jsx)(zt,{settings:e,setValue:t}),(0,p.jsx)(pt,{settings:e,setValue:t}),(0,p.jsx)(xs,{}),(0,p.jsxs)(P,{children:[!c&&(0,p.jsx)(U,{}),(0,p.jsx)(Ot,{})]}),a?(0,p.jsx)(Ut,{}):null,(0,p.jsx)(wt,{settings:e,setValue:t}),(0,p.jsx)(Cs,{settings:e,setValue:t}),(0,p.jsx)(ct,{settings:e,setValue:t}),(0,p.jsx)(_t,{settings:e,setValue:t})]})},Fs=Ms},3293:(e,t,s)=>{s.d(t,{d:()=>l});var n=s(79474),i=s(89477);const l=()=>(0,n.useContext)(i.D)}}]);
//# sourceMappingURL=xpui-routes-desktop-settings.js.map