"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3654],{79280:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(79474),a=r(99754),n=r(81887),l=r(53603),o=r(30939),s=r(66615),c=r(28244),d=r(13274);const u=i.memo((function({uri:e,divider:t,removeLabel:r}){const u=(0,a.wA)(),p=!(0,o.n)(),g=(0,s.t)(),y=(0,i.useCallback)((async()=>{u((0,c.aw)(e,!0))}),[u,e]);return(0,d.jsx)(l.D,{role:"menuitem",divider:t,disabled:p&&!g?.getCapabilities().canModifyOffline,onClick:y,leadingIcon:(0,d.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))},79787:(e,t,r)=>{r.d(t,{P:()=>x});var i=r(79474),a=r(14056),n=r(20273),l=r(95999),o=r(9544),s=r(64495),c=r(9440),d=r(41190),u=r(12198),p=r(80430),g=r(89374),y=r(79280),m=r(13274);const x=i.memo((function({uri:e,artistUri:t,canPin:r=o.oT.NO,isPinned:i=!1,canRemove:x=!1}){const{spec:b}=(0,s.o)(e);return(0,m.jsx)(l.pZ,{value:"album",children:(0,m.jsxs)(n.W,{children:[x&&(0,m.jsx)(y.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),t&&(0,m.jsx)(u.z,{spec:b,divider:"after",uri:t,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),r!==o.oT.NO&&(0,m.jsx)(g.k,{uri:e,canPin:r,isPinned:i,type:c.c.PRE_RELEASE_ALBUM,spec:b}),(0,m.jsx)(d.m,{uri:e,spec:b,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,m.jsx)(p.q,{spec:b,divider:"before",uri:e})]})})}))},56799:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(74831);const a="k270skPbT7JOaSidSA2a";var n=r(13274);const l=({iconSize:e=64,...t})=>(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},3654:(e,t,r)=>{r.d(t,{A:()=>Xe,YourLibraryX:()=>jo,q:()=>Ye});var i=r(79474),a=r(97500),n=r.n(a),l=r(96131),o=r(99754),s=r(98678),c=r(86892),d=r(22215),u=r(84098),p=r(88291),g=r(20273),y=r(95999),m=r(9544),x=r(64495),b=r(5108),h=r(34137),f=r(14056),S=r(53603),C=r(4428),v=r(14494),w=r(36471),P=r(13274);const T=({position:e,divider:t,onCreateCallback:r=(()=>{}),spec:a})=>{const n=(0,w.W)(),{createPlaylist:l}=(0,C.A)(),o=(0,v.s)(),s=(0,i.useCallback)((()=>{n({intent:"create-playlist",type:"click"});const t=a.createButtonFactory().hitCreatePlaylist();t&&o.logInteraction(t),l(f.Ru.get("playlist.default_playlist_name"),e),r()}),[n,a,o,l,e,r]);return(0,P.jsx)(S.D,{role:"menuitem",divider:t,onClick:s,leadingIcon:(0,P.jsx)(h.u,{semanticColor:"textSubdued",size:"small"}),children:f.Ru.get("contextmenu.create-playlist")})},R=i.memo((function(e){return(0,P.jsx)(y.pZ,{value:"create-playlist",children:(0,P.jsx)(T,{...e})})})),A=i.memo((function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,x.o)(e??m.gv);return(0,P.jsx)(y.pZ,{value:"folder",children:(0,P.jsxs)(g.W,{children:[(0,P.jsx)(R,{position:r,onCreateCallback:t,spec:i}),(0,P.jsx)(b.j,{position:r,onCreateCallback:t,spec:i})]})})}));var D=r(38076),j=r(19498),I=r(50629);var L=r(57449),O=r(1648),E=r(79180),k=r(7079),N=r(16323),F=r(9440);var M=r(89018),B=r(11390),U=r(46113),_=r(3351),V=r(94300);r(36805),r(4563),r(79606),r(98211),r(24164),r(79499),r(49271);const H=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function W(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,o=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),s=e.isComposing||229===e.keyCode,c=(d=e.key,H.has(d)&&!t);var d;const u=r&&!n.current,p=t&&!n.current;if(i||o||s||c||u||p)return;(t&&n.current||r)&&(e.preventDefault(),e.stopPropagation()),a((r=>t?r.slice(0,-1):r+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const z=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),X=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:a=!0})=>{const[n,l]=(0,i.useState)({uid:null,str:""}),o=(0,i.useMemo)((()=>({typeaheadResult:n,setTypeaheadResult:l})),[n,l]),s=W(t,a),c=(0,i.useRef)(s);c.current=s;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)((()=>{s&&a?d.current(s).then((e=>{s===c.current&&l({uid:e,str:s})})):l({uid:null,str:""})}),[a,s,l]),(0,P.jsx)(z.Provider,{value:o,children:e})},Y="Vf3ww2_My5QuwUnbpzhu";var K=r(15851);const Z=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(z);return e?(0,P.jsx)(K.qb,{className:Y,children:e}):null};var G=r(52792),J=r(67302),q=r(20044),Q=r(59904),$=r(96537),ee=r(68811),te=r(28580),re=r(71210),ie=r(43364),ae=r(10098),ne=r(60181),le=r(88255),oe=r(7293),se=r(60351),ce=r(68876),de=r(79742),ue=r(2281);const pe=1248,ge=800,ye=(0,se.g)(ne.Z),me=(0,se.g)(le.fX),xe=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,ylxCollapsedStateNavbarWidth:n,ylxDefaultStateNavbarWidth:o,ylxExpandedStateNavbarWidth:s}=(0,de.y)(),{ylxSidebarState:c,setYlxSidebarState:d,canCollapse:u}=(0,le.$)(),p=(0,ae.XB)(),g=(0,ae._Y)(),{min:y,max:m,size:x,setSize:b}=(0,ae.Zf)(),h=(0,oe.H)(),f=(0,i.useRef)(null),S=(0,i.useRef)(null),C=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{const i=h-e-3*ie.KV-(p!==ne.Z.Disabled?x+ie.KV:0),v={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,ylxSidebarState:c,ylxSidebarStateRestoreTarget:f.current,rightSidebarWidth:x,rightSidebarMinWidth:y,rightSidebarMaxWidth:m,rightSidebarPanel:p,rightSidebarPanelRestoreTarget:S.current,storedCollapsedYLXWidth:n,storedDefaultYLXWidth:o,storedExpandedYLXWidth:s,clientWidth:h,mainContentWidth:i,canCollapse:u},w=C.current;if((0,l.j)(v,w))return;const P=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,ylxSidebarState:o,ylxSidebarStateRestoreTarget:s,rightSidebarMinWidth:c=0,rightSidebarMaxWidth:d=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:y=0,storedExpandedYLXWidth:m=0,clientWidth:x=0,canCollapse:b=!0}=t,h={},f=u!==ne.Z.Disabled,S=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,C=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,v=void 0===e.clientWidth?0:x-e.clientWidth,w=v<0,P=x>0,T=a<ie.ev?ie.ev-a:0;let R=w?-1*v:0;a>pe?R=Math.max(0,R-(a-pe)):T&&(R=T);const A=o===le.fX.EXPANDED&&e.ylxSidebarState!==le.fX.EXPANDED,D=o===le.fX.DEFAULT&&e.ylxSidebarState!==le.fX.DEFAULT;let j=r-n;S&&(j=A?r-ce.ZU.EXPANDED_MIN:D?r-ce.ZU.DEFAULT_MIN:0);let I=C?0:i-c;const L=R<=j+I;if(a<ie.ev&&!L)f&&(S||w&&(o===le.fX.COLLAPSED||!b))?(h.rightSidebarPanel=ne.Z.Disabled,h.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,R-=i,I=0):(o===le.fX.EXPANDED&&a+(r-ce.ZU.DEFAULT_MIN)>ie.ev?(h.ylxSidebarState=le.fX.DEFAULT,R-=r-y,j=y-ce.ZU.DEFAULT_MIN):(h.ylxSidebarState=le.fX.COLLAPSED,R-=r-g,j=0),h.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===ne.Z.Disabled&&p!==ne.Z.Disabled&&ye(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-ie.KV>=ie.ev)h.rightSidebarPanel=p,h.rightSidebarPanelRestoreTarget=null;else if(o===le.fX.DEFAULT&&s===le.fX.EXPANDED&&a-(m-r)>=ie.ev)h.ylxSidebarState=le.fX.EXPANDED,h.ylxSidebarStateRestoreTarget=null;else if(o===le.fX.COLLAPSED&&s===le.fX.DEFAULT&&a-(y-r)>=ie.ev)h.ylxSidebarState=le.fX.DEFAULT,h.ylxSidebarStateRestoreTarget=null;else if(P&&a>=ge){let e=l-r,t=d-i;const a=Math.min(v,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<d&&t>0&&(i++,t--)}o!==e.ylxSidebarState&&me(s)&&s===e.ylxSidebarStateRestoreTarget&&(h.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&ye(p)&&p===e.rightSidebarPanelRestoreTarget&&(h.rightSidebarPanelRestoreTarget=null);if(R>0&&R<=j+I)for(let e=0;e<R;e++)r>i&&r>n&&j>0?(r--,j--):i>c&&I>0&&(i--,I--);r&&r!==t.leftSidebarWidth&&(h.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(h.rightSidebarWidth=i);return h}(w,v);void 0!==P.leftSidebarWidth&&t(P.leftSidebarWidth),me(P.ylxSidebarState)&&d(P.ylxSidebarState),void 0!==P.ylxSidebarStateRestoreTarget&&(f.current=P.ylxSidebarStateRestoreTarget),void 0!==P.rightSidebarWidth&&0!==w?.rightSidebarWidth&&b(P.rightSidebarWidth),void 0!==P.rightSidebarPanel&&g((0,ue.MQ)(P.rightSidebarPanel),!0),void 0!==P.rightSidebarPanelRestoreTarget&&(S.current=P.rightSidebarPanelRestoreTarget),C.current=v}),[e,r,a,t,c,x,y,m,b,p,n,o,s,d,g,h,u])}(),null),be=()=>(0,d.NC)(j.Wfl,{loadingValue:!1})?(0,P.jsx)(xe,{}):null;var he=r(82372),fe=r(87571),Se=r(80959);const Ce=()=>null;var ve=r(75439),we=r(98764),Pe=r(82858),Te=r(42490),Re=r(7125),Ae=r(33560);const De="rqGyIqd3Igk05BEB2ZC6",je="WycFx_Gl2tUXbUJpZiD8",Ie=()=>{const[e,t]=(0,i.useState)(!1),r=(0,Re.V)(),a=(0,o.d4)(Ae.JJ);(0,i.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[]);const n=(0,o.d4)(Ae.mo);return r&&e?(0,P.jsx)(Pe.t5,{language:f.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,P.jsxs)("div",{className:De,"data-testid":"left-sidebar-legal-links",children:[(0,P.jsx)(Pe.JM,{}),(0,P.jsx)("a",{draggable:!1,href:Te.Bl,target:"_blank",rel:"noopener",className:je,children:(0,P.jsx)(we.E,{variant:"marginal",children:f.Ru.get("cookies")})}),n&&(0,P.jsx)("a",{draggable:!1,href:Te.Vd,target:"_blank",rel:"noopener",className:je,children:(0,P.jsx)(we.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null},Le="YNnobzGm5w3XKBniKdW9",Oe=(0,i.memo)((function({isAnonymous:e}){return(0,P.jsx)("div",{className:Le,"data-testid":"left-sidebar-footer",children:e&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Ie,{}),(0,P.jsx)(ve.X,{})]})})})),Ee=[q.fl.TRACKS,q.fl.LOCAL_TRACKS,q.fl.ALBUMS,q.fl.ARTISTS,q.fl.PLAYLISTS_V2,q.fl.SHOWS,q.fl.AUDIOBOOKS,q.fl.EPISODES,q.fl.FOLDERS],ke=[q.fl.TRACKS,q.fl.LOCAL_TRACKS,q.fl.ALBUMS,q.fl.EPISODES,q.fl.PLAYLISTS_V2,q.fl.FOLDERS],Ne=[q.fl.TRACKS,q.fl.LOCAL_TRACKS,q.fl.ALBUMS,q.fl.EPISODES,q.fl.PLAYLISTS_V2,q.fl.FOLDERS];var Fe=r(30939);function Me(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(te.O_);return{dropOriginIsYLX:e===m.gv,entityIsInFolder:t>0}}const Be=(0,i.createContext)(null);var Ue=r(82052);const _e="",Ve=(0,i.createContext)({openedFolderUri:_e,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),He=({children:e})=>{const{setFilter:t}=(0,i.useContext)(he.g),[r,a]=(0,Ue.x)("opened-folder-uri",_e),n=(0,i.useRef)([r??_e]),l=(0,i.useRef)("PUSH"),o=(0,i.useCallback)((e=>{a(e),t(_e)}),[a,t]),s=(0,i.useCallback)((e=>{n.current.push(e),l.current="PUSH",o(n.current.at(-1))}),[o]),c=(0,i.useCallback)((()=>{n.current.pop();const e=n.current.at(-1);return l.current="POP",o(e),e}),[o]),d=(0,i.useCallback)((()=>{n.current=[_e],o(_e)}),[o]);return(0,P.jsx)(Ve.Provider,{value:{openedFolderUri:r,pushFolder:s,popFolder:c,resetFolder:d,change:l.current},children:e})};var We=r(1884);var ze=r(5342);let Xe=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const Ye=()=>{const[e,t]=(0,Ue.x)("library-row-mode",Xe.DEFAULT),r=(0,E.vW)();return{libraryRowMode:e,setLibraryRowMode:t,rowHeight:e===Xe.DEFAULT||r===E.fX.COLLAPSED?64:32}};var Ke=r(66615),Ze=r(13326),Ge=r(45132);const Je=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,P.jsx)(Ge.T,{"aria-label":i,titleText:i,descriptionText:e?f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:f.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};function qe({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const a=(0,Ke.t)(),{contains:n}=(0,Ze.p)("ylpin"),[l,o]=(0,i.useState)(null),s=(0,i.useCallback)((async(t,i)=>{if(r)return void e(t,i);const{[q.fl.PLAYLISTS_V2]:a=[],[q.fl.FOLDERS]:l=[]}=t,s=[...a,...l];if(!!s.length&&(await n(...s)).some(Boolean)){if(s.length>1)throw new Error("Reordering multiple pinned items at once is not supported");o({dropData:t,dropPosition:i})}else e(t,i)}),[r,n,e]),c=(0,v.s)();return{applyDropWithUnpinConfirmation:s,unpinConfirmationDialog:l?(0,P.jsx)(Je,{isConfirmationForPlaylist:!l.dropData[q.fl.FOLDERS]?.length,onClose:()=>o(null),onConfirm:async()=>{const{[q.fl.PLAYLISTS_V2]:r=[],[q.fl.FOLDERS]:i=[]}=l.dropData;await a.unpin([...r,...i][0]),t?.dragUnpinItem&&c.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(l.dropData,l.dropPosition),o(null)}}):null}}function Qe(){const e=(0,_.g)(),{dropOriginIsYLX:t}=Me();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}function $e(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,C.A)(),n=(0,v.s)(),l=(0,_.g)(),o=Qe(),s=(0,i.useCallback)((r=>{if(!t)return;const{[q.fl.PLAYLISTS_V2]:i=[],[q.fl.FOLDERS]:a=[]}=r,s={after:{uri:t}};i.length&&(o(i,s),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},s),n.logInteraction(e.dragSort()))}),[o,n,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=qe({onApplyDrop:s});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[q.fl.TRACKS]:l=[],[q.fl.LOCAL_TRACKS]:o=[],[q.fl.ALBUMS]:s=[],[q.fl.EPISODES]:c=[],[q.fl.PLAYLISTS_V2]:u=[],[q.fl.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?d(i,Q.Nz.ON):s.length?(r(s[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||o.length||c.length)&&(a([...l,...o,...c],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,d,r,n,e,a])}}var et=r(5689),tt=r(82031),rt=r(8819),it=r(45640);function at(){const[e,t]=(0,i.useState)(null);if((0,rt.l)(tt.UV.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===e?.reason)return null;switch(e.reason){case tt.uL.TOO_MANY_PINS:return(0,P.jsx)(et.x,{animated:!0,headingMessage:f.Ru.get("web-player.your-library-x.pin-error.title"),message:f.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:f.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case tt.uL.NO_PIN_IN_FOLDER:return(0,P.jsx)(et.x,{animated:!0,headingMessage:f.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:f.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:f.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,it.k)(e),null}}var nt=r(7829),lt=r(65742),ot=r(96972),st=r(76922),ct=r(86316),dt=r(67299);const ut=(e,t,r,a,n)=>{const l=(0,dt.Q)(),o=(0,i.useRef)(r),s=(0,i.useRef)(),c=(0,i.useRef)();s.current=a,c.current=n,(0,i.useEffect)((()=>{const r={ident:e,isPrefix:t,onMessage:e=>o.current(e),onSubscribe:async e=>await(s.current?.(e)),onCancel:async e=>await(c.current?.(e))},i=l.subscribe(r);return()=>{i.cancel()}}),[e,t,l])},pt={[tt.Ir.ALBUMS]:F.c.ALBUM,[tt.Ir.ARTISTS]:F.c.ARTIST,[tt.Ir.BOOKS]:F.c.AUDIOBOOK,[tt.Ir.EPISODES]:F.c.EPISODE,[tt.Ir.SHOWS]:F.c.SHOW,[tt.Ir.TRACKS]:F.c.TRACK};function gt(e,t){const r=(0,i.useCallback)((({data:{list:r}})=>{yt(e,pt[r])&&t()}),[e,t]);(0,rt.l)(tt.UV.UPDATE,r),(0,rt.l)(tt.UV.UPDATE_PIN,t);const a=(0,i.useCallback)((()=>{yt(e,F.c.PLAYLIST)&&t()}),[e,t]);(0,ct.L)(a),function(e){ut("hm://collection/ylpin/",!0,e)}(t),function(e){const t=(0,i.useContext)(st._),r=t.getEvents();(0,i.useEffect)((()=>(r.addListener(ot.T.UPDATE,e),()=>{r.removeListener(ot.T.UPDATE,e)})),[t,r,e])}(t),function(e){const t=(0,lt.l)().getEvents();(0,i.useEffect)((()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(nt.ar.ADDED,r),t.addListener(nt.ar.REMOVED,r),()=>{t.removeListener(nt.ar.ADDED,r),t.removeListener(nt.ar.REMOVED,r)}}),[e,t])}(t)}function yt(e,t){switch(e){case F.c.ALBUM:case F.c.ARTIST:case F.c.AUDIOBOOK:case F.c.SHOW:return e===t;case F.c.PLAYLIST:switch(t){case F.c.TRACK:case F.c.PLAYLIST:case F.c.EPISODE:return!0;default:return!1}default:return!0}}var mt=r(25766),xt=r(11283),bt=r(61938),ht=r(88713),ft=r(19293);const St="lvJXjYO7YXxGKHcgx5pe",Ct="yYGZUqSKJttCw_Z2JvPL",vt="wkyebhrfwyJPCfDhQgbp",wt=()=>{const e=(0,E.sy)(),t=(0,v.s)(),r=(0,o.wA)(),{spec:a}=(0,J.r)(bt.V,{}),n=f.Ru.get("web-player.your-library-x.dsa-message",f.Ru.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{r(ft.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())}),[r,t,a]);return(0,P.jsx)("div",{className:St,children:e?(0,P.jsx)(ht.Zp,{label:(0,P.jsx)(we.E,{children:n}),placement:"right",showDelay:0,children:(0,P.jsx)("div",{className:Ct,children:(0,P.jsx)(mt.p,{"aria-label":n})})}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{children:(0,P.jsx)(mt.p,{size:"small"})}),(0,P.jsx)(we.E,{as:"p",semanticColor:"textSubdued",children:f.Ru.get("web-player.your-library-x.dsa-message",(0,P.jsx)(xt.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:l,className:vt,children:(0,P.jsx)(we.E,{variant:"bodyMedium",children:f.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})},Pt="AhNLpx0iVnlj4SuL_Gaw",Tt="JyZRugeRBHbUtS5ABOQ8",Rt=({className:e})=>(0,P.jsx)("section",{className:n()(Pt,e),children:(0,P.jsxs)("div",{className:Tt,children:[(0,P.jsx)(we.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:f.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,P.jsx)(we.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:f.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var At=r(85212),Dt=r(7131);const jt={getTitle:()=>f.Ru.get("action-trigger.create-playlist"),getDescription:()=>f.Ru.get("action-trigger.login-playlist")},It=({children:e,renderInline:t})=>(0,P.jsx)(At.y,{id:Dt.x9,options:{...jt,renderInline:t},children:e});var Lt=r(61080),Ot=r(52995);const Et="CfruGiDGW_FH4l65GMpb",kt="fIgbQ9qpINdyy__tkaHi",Nt="wv308QWnPnkI8n0GdqYO",Ft=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:o}=e;return(0,P.jsxs)("section",{className:n()(Et,o),children:[(0,P.jsxs)("div",{className:kt,children:[(0,P.jsx)(we.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,P.jsx)(we.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,P.jsx)("div",{className:Nt,children:i&&(a||l)&&(0,P.jsx)(Lt.$,{className:Nt,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:Ot.v,size:"small",children:i})})]})})),Mt=({className:e})=>{const{createPlaylist:t}=(0,C.A)(),r=(0,i.useCallback)((()=>{t()}),[t]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(It,{renderInline:!1,children:(0,P.jsx)(Ft,{onClick:r,linkTitle:f.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:f.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:f.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,P.jsx)(Ft,{linkTo:"/genre/podcasts-web",linkTitle:f.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:f.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:f.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},Bt="NOXrKH_1anB9lsOlyv5g",Ut="FIARvjbv_YZKwz7yxNHw",_t="Fqrv8StT3DnEAfntIKCg",Vt="JydI9ZzWnssPC899sOGP",Ht=({query:e,className:t})=>(0,P.jsxs)("div",{className:n()(Bt,t),"data-testid":"no-search-results-view",children:[(0,P.jsx)(we.E,{as:"h1",variant:"bodyMediumBold",className:Ut,children:f.Ru.get("web-player.your-library-x.empty-results-title-short",(0,P.jsx)("span",{className:_t,children:(0,P.jsx)("span",{className:Vt,children:e})}))}),(0,P.jsx)(we.E,{as:"h2",variant:"bodySmall",children:f.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var Wt=r(38074);const zt="vhOeYrTmSoea5vemsMpv",Xt="pCKhe1uJhYBUC4YVmz9B",Yt=({onClick:e})=>(0,P.jsxs)("div",{className:zt,children:[(0,P.jsx)("div",{className:"icon",children:(0,P.jsx)(Wt.b,{size:"xlarge",semanticColor:"textBase"})}),(0,P.jsxs)("div",{className:Xt,children:[(0,P.jsx)(we.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:f.Ru.get("web-player.your-library-x.error-title")}),(0,P.jsx)(we.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:f.Ru.get("web-player.your-library-x.error-body")})]}),(0,P.jsx)("div",{children:(0,P.jsx)(Lt.$,{onClick:e,colorSet:"invertedLight",size:"small",children:f.Ru.get("web-player.your-library-x.error-button")})})]});const Kt=({children:e})=>{const t=function(){const[e,t]=(0,Ue.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,P.jsx)(Be.Provider,{value:t,children:e})},Zt="fYWNdY4zhj4OX_T2Xtg6",Gt="BRX6aJUAuAsvHKD_fpbo",Jt="ZZsPF3Sn4h7m0_5Clhk0",qt="IZq_xBKdh88HLD4QY90X",Qt="PUipCs3_0Qott0Sru3pB",$t="XAOxFVWnd185_vZ5zPGu",er="YsCa3XbOXEm79LH0B7do",tr="eC25_w41L83mXDCqdm_A",rr="VyDwqqtx0153zD8a3TED",ir="rOgsguaurlHVlgCTY0P7",ar="zS8ATyQNwnAiEoPrCcIo",nr="Zwr4MoUVImDin82vBn4y",lr="lb8li6m8Zei4tr0zNKxX",or="aK6vld0FgHGxjz6IiHyS",sr="Xw1OibA6EkrU4F47EMw9",cr="_EFIA9HjgZxxgTSZzQcg",dr="JUPaw8kZF94Coth4G88s",ur="main-yourLibraryX-listItem",pr="c1PJ2LHU0EnzyA0jDc1j",gr=({isScrolled:e})=>(0,P.jsxs)("div",{className:n()(nr,or,{[sr]:e}),children:[(0,P.jsx)(we.E,{variant:"marginalBold",semanticColor:"textSubdued",children:f.Ru.get("web-player.your-library-x.expanded-list-header.title")}),(0,P.jsx)(we.E,{variant:"marginalBold",semanticColor:"textSubdued",children:f.Ru.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,P.jsx)(we.E,{variant:"marginalBold",semanticColor:"textSubdued",children:f.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})]});var yr=r(68104),mr=r(61252),xr=r(3498);const br="mA1QNQx6oUXgQ8kMID2S",hr="a2XwshgvydvJO9If_GzQ",fr="aVLBGREPTnbTFhkSdUMV",Sr="ViXEX4SVVU_NA7zcS9kd",Cr="pQvrkwXAqZnbSqJiiQuo",vr={marginBlockEnd:0,willChange:"transform, opacity"},wr=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:o=Q.Vp,className:s,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,v.s)(),y=(0,Ke.t)(),m=p.selected,x=e?y.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:f,dropPosition:S,...C}=(0,$.A)({allowedMimeTypesByDropPosition:{[Q.Nz.ON]:o},onLongDragOver:b});return(0,P.jsx)(xr.v,{...p,"aria-label":p["aria-label"],...C,...S===Q.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(s,f,{[fr]:S===Q.Nz.ON,[br]:r}),onClick:h,selectedColorSet:S===Q.Nz.ON?"invertedDark":"invertedLight",secondary:m&&!t,style:vr,ref:c,tabIndex:-1})};var Pr=r(81579);const Tr={marginBlockEnd:0,willChange:"transform, opacity"},Rr=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:o=Q.Vp,className:s,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,v.s)(),y=(0,Ke.t)(),m=p.selected,x=e?y.getFilterLabel(e):"",b=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||b()}),[r,b]),{className:f,dropPosition:S,...C}=(0,$.A)({allowedMimeTypesByDropPosition:{[Q.Nz.ON]:o},onLongDragOver:b});return(0,P.jsx)(Pr.m,{...p,"aria-label":p["aria-label"],...C,...S===Q.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(s,f,{[fr]:S===Q.Nz.ON,[br]:r}),onClick:h,style:Tr,ref:c,tabIndex:-1})},Ar=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],Dr=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:a,className:n,spec:l}){const o=!(t||e),s=o?Ar:[...t??[],...e??[]],c=(0,i.useRef)(null),d=(0,i.useCallback)((()=>{(0,mr.MS)(c.current,c.current?.nextElementSibling instanceof HTMLElement?c.current?.nextElementSibling:null),a()}),[a]);return 0===s.length?null:(0,P.jsxs)(yr.F,{className:n,ariaLabel:f.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,P.jsx)(Rr,{resetFilterIds:d,toggleFilterId:r,allowedDropTargetMimeTypes:Ee,"aria-label":f.Ru.get("web-player.your-library-x.clear_filters"),innerRef:c,spec:l}),s.map(((e,i)=>{const n=t?.includes(e),s=0===i;return(0,P.jsx)(wr,{filterId:e.id,isPrimaryFilter:s,isPlaceholder:o,resetFilterIds:a,toggleFilterId:r,selected:n,spec:l,index:i,children:e.name},e.id)}))]})}));var jr=r(65132),Ir=r(70256),Lr=r(30980);const Or=({span:e,onInView:t,marginBottom:r,marginTop:a})=>{const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t()}))}));return n.current&&e.observe(n.current),()=>{e.disconnect()}}),[t]),e<=0?null:(0,P.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${e}`,marginBottom:r,marginTop:a},ref:n,"data-type":"sentinel"},"topSentinel")},Er=({renderItems:e,nrItems:t,estimatedItemMaxHeight:r,scrollNodeRef:a,nrRowsOverscan:n=5,initalNrRows:l=5,onGridResize:o})=>{const[s,c]=(0,i.useState)({firstRowToRender:0,nrRows:l+n}),d=(0,i.useRef)(0),u=(0,i.useRef)(null),p=(0,i.useRef)(r),g=(0,i.useCallback)((()=>{const e=u.current?.querySelector(':scope > *:not([data-type="sentinel"])');p.current=e?e.getBoundingClientRect().height:p.current}),[]),y=(0,i.useCallback)((()=>{const e=a.current;if(!e)return;g();const t=Math.floor((e.scrollTop-d.current)/p.current),r=Math.max(t-n,0),i=Math.ceil(e.offsetHeight/p.current)+2*n;r===s.firstRowToRender&&i===s.nrRows||c({firstRowToRender:r,nrRows:i})}),[n,s,a,g]),m=(0,i.useCallback)((({columnCount:r})=>{if(r<=0)return[null];o&&o(r,p.current);const i=Math.ceil(t/r),a=s.firstRowToRender*r,l=s.firstRowToRender+s.nrRows-1,c=Math.min(t-1,(l+1)*r-1),d=p.current*(n-2);return[(0,P.jsx)(Or,{span:s.firstRowToRender,onInView:y,marginBottom:`-${d}px`},`topSentinel-${s.firstRowToRender}`),e(a,c,r),(0,P.jsx)(Or,{span:i-l,onInView:y,marginTop:`-${d}px`},"bottomSentinel-"+(i-l))]}),[t,n,o,y,e,s]);return(0,i.useEffect)((()=>{const e=u.current,t=a.current;e&&t&&(d.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[a]),(0,P.jsx)(Lr.E,{useUniformRowHeight:!0,ref:u,render:m,onLayoutChange:g})};var kr=r(80314),Nr=r(16649);function Fr(){const e=(0,d.NC)(j.AEN),[t,r]=(0,Ue.x)("ylx-grid-scale",1);return{gridScale:e?t:1,setGridScale:r}}var Mr=r(28244),Br=r(84387),Ur=r(58291),_r=r(47583),Vr=r(26271),Hr=r(73604),Wr=r(74752),zr=r(98196),Xr=r(83856),Yr=r(71673),Kr=r(30692),Zr=r(92353);const Gr=({iconSize:e="small"})=>(0,P.jsx)("span",{className:Qt,children:(0,P.jsx)(Zr.C,{size:e,semanticColor:"textBrightAccent",className:qt})});var Jr=r(82548),qr=r(72728);const Qr=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>{const a=(0,d.NC)(Jr.rW);return(0,P.jsx)(ht.Zp,{label:(0,P.jsxs)("div",{className:n()({"circular-sp-vietnamese":a},ar),children:[(0,P.jsxs)("div",{children:[t,r]}),i&&(0,P.jsx)(Gr,{})]}),placement:"right",showDelay:0,children:e})},$r=e=>{const t=(0,i.useRef)(null);return(0,Nr.c0)(e.uri)?(0,P.jsx)(qr.cW,{parentRef:e.parentRef,api:t,children:(0,P.jsx)(Qr,{...e})}):(0,P.jsx)(Qr,{...e})};var ei=r(48761),ti=r(83455),ri=r(38552);const ii=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,P.jsx)("div",{className:ri.A.subtitle,children:(0,P.jsxs)(ei.j,{lineClamp:1,className:ri.A.link,id:i,dir:"auto",children:[(0,P.jsx)("span",{className:ri.A.subtitleLeadingWrapper,children:e}),t]})})},ai=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,P.jsx)("div",{className:ri.A.subtitle,children:(0,P.jsxs)(ti.j,{lineClamp:1,className:ri.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,P.jsx)("span",{className:ri.A.subtitleLeadingWrapper,children:e}),t]})})};var ni=r(83648),li=r(75783),oi=r(833),si=r(91303);var ci=r(60786);const di={state:{referrer:"your_library",preventMoveFocus:!0}};function ui(e,t,r,a){const{filter:n}=(0,i.useContext)(he.g),{isActive:l}=(0,Hr.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(z);return t===e?r:null}(e),s=!!o,c=(0,si.W)({uri:e,type:"link"})?(0,ci.hF)(t):t,d=(0,i.useRef)(null),u=(0,ni.Zp)(),p=(0,i.useCallback)((e=>{e.preventDefault(),a?a():c&&u(c,di)}),[a,u,c]);(0,i.useLayoutEffect)((()=>{s&&d.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})}),[s]);return{isActive:l,onClick:p,contents:n||o?(0,P.jsx)("span",{ref:d,children:(0,P.jsx)(_r.M,{autoEscape:!0,searchWords:[n.trim(),...o?.split(" ")??""],textToHighlight:r})}):r}}const pi=({uri:e,playbackUri:t=e,title:r,menu:i,to:a=(0,Xr.o_)(e)?.toURLPath(!0)||"",handleNavigate:l})=>{const{isActive:o,contents:s}=ui(t,a,r,l),c=`listrow-title-${e}`;return(0,P.jsx)(p.h,{menu:i,children:(0,P.jsx)(li.d,{id:c,lineClamp:1,className:n()(ri.A.link,ri.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:s})})},gi=({uri:e,playbackUri:t=e,title:r,menu:i,to:a=(0,Xr.o_)(e)?.toURLPath(!0)||"",handleNavigate:l})=>{const{isActive:o,onClick:s,contents:c}=ui(t,a,r,l);return(0,P.jsx)(p.h,{menu:i,children:(0,P.jsx)(oi.Z,{lineClamp:1,className:n()(ri.A.link,ri.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:a,onClick:s,role:"gridcell",dir:"auto",children:c})})};var yi=r(2092);const mi=[q.fl.ALBUMS,q.fl.ARTISTS,q.fl.PLAYLISTS_V2,q.fl.SHOWS,q.fl.FOLDERS,q.fl.PSEUDO_PLAYLISTS],xi=[q.fl.PLAYLISTS_V2,q.fl.FOLDERS];var bi=r(69640);function hi({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const a=(0,_.g)(),n=(0,i.useContext)(N.Z),l=(0,v.s)(),o=Qe(),s=(0,i.useCallback)((async(i,s)=>{const{[q.fl.PLAYLISTS_V2]:c=[],[q.fl.FOLDERS]:[d]=[]}=i,u=s===Q.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,Xr.tb)(e)||(0,Xr.fp)(e)){const t=fi((await a.getContents()).items,e);-1===t?await a.add([e],{before:"start"}):t>0&&((0,Xr.tb)(e)?await a.move({uri:e},{before:"start"}):await a.moveFolder({uri:e},{before:"start"}))}else if(!(0,Xr.Z0)(e)){const[t]=await n.contains(e);t||await n.add({uris:[e]})}await n.pin(e,u),l.logInteraction(t.dragPinItem({itemToPin:e}))}else d?await a.moveFolder({uri:d},u):c.length&&await o(c,u);l.logInteraction(t.dragSort())}),[e,r,n,l,t,a,o]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=qe(r?{onApplyDrop:s,spec:t,isDropTargetPinned:r}:{onApplyDrop:s});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[q.fl.PLAYLISTS_V2]:r=[],[q.fl.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t)}),[d]),unpinConfirmationDialog:c}}function fi(e,t,r=0){for(const i of e)if((0,bi.Af)(i)||(0,bi.sA)(i)){if((0,Xr.B2)(i.uri,t))return r;if((0,bi.sA)(i)){const e=fi(i.items,t,r+1);if(-1!==e)return e}}return-1}const Si={state:{referrer:"your_library",preventMoveFocus:!0}};function Ci({uri:e,to:t=(0,Xr.o_)(e)?.toURLPath(!0)||"",type:r,handleNavigate:a,dragLabel:n,isPinned:l,canReorder:o,allowedDropTargetDropOnMimeTypes:s=[],onDropTargetDropOn:c,onLongDragOver:d,openDeleteDialog:u,togglePlay:p,isItemInGrid:g,playInsteadOfNavigating:y=!1,isPlaying:x,isActive:b,spec:h,folderDepth:f}){const S=(0,si.W)({uri:e,type:"link"})?(0,ci.hF)(t):t,C=(0,ni.Zp)(),w=(0,ni.zy)(),P=(0,i.useCallback)((()=>{C(S,Si)}),[C,S]),T=(0,v.s)(),R=(0,i.useRef)(0),A=(0,i.useRef)(null),D=(0,i.useCallback)((({target:e})=>e instanceof HTMLElement&&!A.current?.contains(e)),[]),j=(0,i.useCallback)((t=>{if(!D(t)){if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),y){if(R.current>Date.now())return;return R.current=Date.now()+300,void(x||(p?.(),T.logInteraction(h.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}a?a():S&&C(S,{...Si,replace:S===w.pathname}),T.logInteraction(h.yourLibraryItemFactory().hitUiNavigate({destination:e}))}}),[D,y,a,S,T,h,e,p,x,C,w.pathname]),I=(0,i.useCallback)((t=>{y||D(t)||p&&(b?x?T.logInteraction(h.yourLibraryItemFactory().doubleHitPause({itemToBePaused:e})):T.logInteraction(h.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:e})):T.logInteraction(h.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),p?.())}),[D,y,p,b,x,T,h,e]),L=(0,i.useCallback)((()=>{T.logInteraction(h.yourLibraryItemFactory().secondaryHitUiReveal())}),[T,h]),{draggable:O,onDragStart:E}=(0,yi.P)({itemUris:[e],itemMimeTypes:[(0,q.j3)(r)],dragLabelText:n,sectionId:f??0,dropOriginUri:m.gv});let k=[];l?k=mi:o&&(k=xi);const N={[Q.Nz.ON]:s,[Q.Nz.BEFORE]:k,[Q.Nz.AFTER]:k},{handleDropBeforeOrAfterRootlistItem:F,unpinConfirmationDialog:M}=hi({dropTargetUri:e,spec:h,isDropTargetPinned:l}),B=(0,i.useCallback)(((e,t)=>{t===Q.Nz.ON?c?.(e,t):t!==Q.Nz.BEFORE&&t!==Q.Nz.AFTER||F(e,t)}),[c,F]),{dropPosition:U,className:_,...V}=(0,$.A)({uri:e,allowedMimeTypesByDropPosition:N,onDrop:B,onLongDragOver:d??P,reorderDirection:g?"horizontal":"vertical"}),H=(0,i.useCallback)((t=>{t.repeat||D(t)||("Backspace"!==t.key&&"Delete"!==t.key||!u||u(),"Enter"===t.key&&t.shiftKey&&p&&(t.preventDefault(),p()),"Enter"===t.key&&T.logInteraction(h.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))}),[D,T,u,h,p,e]),W=(0,Xr.o_)(w.pathname,{parseUnknown:!0})?.toURI();return{onClick:j,onDoubleClick:I,draggable:O&&!!n,onDragStart:E,onKeyDown:H,unpinConfirmationDialog:M,dropPosition:U,dropTargetClassName:_,logRightClick:L,isViewActive:!!W&&(0,Xr.B2)(e,W),itemRef:A,...V}}const vi=e=>{switch(e){case F.c.ALBUM:return f.Ru.get("web-player.your-library-x.type-album");case F.c.ARTIST:return f.Ru.get("web-player.your-library-x.type-artist");case F.c.FOLDER:return f.Ru.get("web-player.your-library-x.type-folder");case F.c.AUDIOBOOK:return f.Ru.get("web-player.your-library-x.type-audiobook");case F.c.YOUR_EPISODES:case F.c.LOCAL_FILES:case F.c.LIKED_SONGS:case F.c.PLAYLIST:return f.Ru.get("web-player.your-library-x.type-playlist");case F.c.SHOW:return f.Ru.get("web-player.your-library-x.type-show");case F.c.PRE_RELEASE_ALBUM:return f.Ru.get("web-player.your-library-x.type-prerelease-album");case F.c.PRE_RELEASE_BOOK:return f.Ru.get("web-player.your-library-x.type-prerelease-audiobook");default:return(0,it.d)(e)}},wi=e=>{switch(e){case F.c.YOUR_EPISODES:case F.c.LIKED_SONGS:case F.c.LOCAL_FILES:return F.c.PLAYLIST;default:return e}};var Pi=r(50718);const Ti=i.createContext(!1),Ri=({children:e,isCompact:t})=>(0,P.jsx)(Ti.Provider,{value:t,children:e}),Ai=()=>(0,i.useContext)(Ti),Di="wJTUKAyYI219kJtclJLa",ji="q0_cpEyu_8EC7he96qT_",Ii="L8ET6xwMh_wMEqCpmunH",Li="D_1eJKOJ3wTCKO93GX06",Oi="_7kcfiJ2UNEh3CDR9Wau",Ei="N8wAJha8ApfxgOfqv4UM",ki="iJMxV9zMXSfrjJPyB3Fw",Ni=({uri:e,to:t=(0,Xr.o_)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:a,name:l,subtitle:o,cover:s,type:c,downloadButton:d,canReorder:u,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,menu:x,leading:b,openDeleteDialog:h,togglePlay:f,isPinned:S,shouldShowType:C,playbackUri:v,isPlaying:w,isActive:T,playInsteadOfNavigating:R,spec:A,index:D,animateClassName:j="",animateState:I,preReleaseIcon:L})=>{const{onClick:O,onDoubleClick:E,draggable:k,onDragStart:N,onKeyDown:F,dropPosition:M,dropTargetClassName:B,unpinConfirmationDialog:U,logRightClick:_,isViewActive:V,itemRef:H,...W}=Ci({uri:e,to:t,handleNavigate:r,dragLabel:a,isPinned:S,canReorder:u,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,openDeleteDialog:h,onLongDragOver:m,togglePlay:f,isItemInGrid:!0,isPlaying:w,isActive:T,spec:A,playInsteadOfNavigating:R}),z=(0,P.jsx)(gi,{uri:e,title:l,menu:x,handleNavigate:r,playbackUri:v}),X=(0,P.jsx)(ai,{leading:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Pi.g,{pinned:S}),L,d]}),subtitle:(0,P.jsxs)(P.Fragment,{children:[C&&vi(c),!!o&&C&&" • ",o]}),uri:e}),Y=(0,i.useRef)(null),K=Ai();let Z=(0,P.jsx)(p.h,{menu:x,onShow:_,children:(0,P.jsx)(Kr.E,{uri:e,trigger:Kr.l.OnMouseDown,children:(0,P.jsx)(Wr.Z,{id:e,title:z,subtitle:X,media:s,size:"sm",leading:b,className:n()(Di,{[j]:I}),variant:V?"tinted":void 0,onClick:O,onDoubleClick:E,padding:zr.CJ,...W})})});return K&&(Z=(0,P.jsx)($r,{title:z,subtitleSlot:X,uri:e,isPlaying:w,parentRef:Y,children:(0,P.jsx)("div",{children:(0,P.jsx)(p.h,{menu:x,onShow:_,children:(0,P.jsx)(Kr.E,{uri:e,trigger:Kr.l.OnMouseDown,children:(0,P.jsx)(Wr.Z,{id:e,title:void 0,media:s,size:"sm",className:n()(Di,ji,{[j]:I}),variant:V?"tinted":void 0,onClick:O,onDoubleClick:E,padding:zr.vw,ref:Y,...W})})})})})),(0,P.jsxs)(P.Fragment,{children:[U,(0,P.jsx)(Yr.W,{draggable:k,onDragStart:N,onKeyDown:F,className:n()(B,{[hr]:M===Q.Nz.ON,[Sr]:M===Q.Nz.BEFORE,[Cr]:M===Q.Nz.AFTER}),"aria-selected":T,innerRef:H,"aria-posinset":D,children:Z})]})};var Fi=r(66956),Mi=r(61681),Bi=r(94009),Ui=r(8955),_i=r(74938),Vi=r(4254),Hi=r(263);const Wi=({name:e,uri:t,togglePlay:r,spec:a,isActive:l,isPlaying:o,size:s})=>{const c=(0,v.s)(),d=(0,i.useCallback)((()=>{l?o?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()}),[l,o,c,a,r,t]);return(0,P.jsx)("div",{className:n()(Oi,{[ki]:o,[Ei]:"small"===s}),role:"gridcell",children:(0,P.jsx)(Hi.R,{isPlaying:o,onClick:d,ariaPlayLabel:f.Ru.get("playlist.a11y.play",e),ariaPauseLabel:f.Ru.get("playlist.a11y.pause",e),size:s})})},zi=(0,i.memo)((function({title:e,type:t,images:r,isCircular:i,color:a,animateState:l,animateClassName:o=""}){const s=(0,Vi._)();return(0,P.jsx)(Mi.b,{fadeIn:!0,images:s(r,48),shape:i?Mi.u.CIRCLE:Mi.u.ROUNDED_CORNERS,size:Bi.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:n()(ri.A.entityImage,{[o]:l}),color:a,loadingMode:"eager"})})),Xi=(0,i.memo)((function({title:e,type:t,uri:r,images:a,isCircular:n,togglePlay:l,color:o,spec:s,isActive:c,isPlaying:u}){const p=(0,d.NC)(Jr.AE),g=Ai(),y=(0,Vi._)(),[m,x]=(0,i.useState)("medium"),b=(0,i.useRef)(null);return(0,_i.w)({onResize:({width:e})=>{x(e<90?"small":"medium")},refOrElement:b}),(0,P.jsx)("div",{className:Li,ref:b,children:(0,P.jsx)(Fi.M,{images:y(a,250),FallbackComponent:e=>(0,P.jsx)(Ui.s,{semanticColor:"textSubdued",type:t,size:"xxlarge",className:p?Ii:"",...e}),isCircular:n,color:o,loadingMode:"eager",children:l&&!g&&(0,P.jsx)(Wi,{name:e,uri:r,togglePlay:l,spec:s,isActive:c,isPlaying:u,size:m})})})}));var Yi=r(68529);const Ki="_ymJNIfklFmogab9uWY1",Zi=({folderDepth:e=0})=>(0,P.jsx)("li",{className:Ki,style:{"--ylx-folder-depth":e}}),Gi=e=>{const{RowVariantComponent:t,uri:r,to:a=(0,Xr.o_)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:o,className:s,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,style:m,openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:f,type:S,menu:C,name:v,subtitle:w,downloadButton:T,expandFolderButton:R,cover:A,alt:D,addedAt:j,lastPlayedAt:I,shouldShowType:L,playbackUri:O,playInsteadOfNavigating:E,spec:k,nrValidItems:N,index:F,lockedIcon:M,onKeyDown:B,preReleaseIcon:U,..._}=e,{onClick:V,onDoubleClick:H,onDragStart:W,onKeyDown:z,dropPosition:X,dropTargetClassName:Y,draggable:K,unpinConfirmationDialog:Z,logRightClick:G,isViewActive:J,itemRef:q,...$}=Ci({uri:r,to:a,type:S,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:f,playInsteadOfNavigating:E,spec:k,folderDepth:o}),ee=(0,i.useCallback)((e=>{z(e),B?.(e)}),[z,B]);return(0,P.jsxs)(P.Fragment,{children:[Z,X===Q.Nz.BEFORE&&(0,P.jsx)(Zi,{folderDepth:o}),(0,P.jsx)(Yi.c,{style:{"--ylx-folder-depth":o,...m},draggable:K,onDragStart:W,onDoubleClick:H,className:n()(s,Y,ur,{[hr]:X===Q.Nz.ON}),..._,...$,onKeyDown:ee,innerRef:q,"aria-setsize":N,"aria-posinset":F+1,children:(0,P.jsx)(t,{...e,to:a,isActive:f,isViewActive:J,onClick:V,logRightClick:G,playInsteadOfNavigating:E,parentRef:q})}),X===Q.Nz.AFTER&&(0,P.jsx)(Zi,{folderDepth:o})]})};function Ji(e){const{uri:t,artists:r}=e,{filter:a}=(0,i.useContext)(he.g),{isPlaying:n,isActive:l}=(0,Hr.l_)(t),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{s((0,Mr.aw)(t))}),[s,t]),{togglePlay:d}=(0,Vr.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:n,isActive:l,openDeleteDialog:c,togglePlay:d,menu:(0,P.jsx)(Br.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,P.jsx)(_r.M,{searchWords:[a.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,P.jsx)(Ur.M,{uri:t,size:"xsmall",className:ri.A.icon,as:"span"})}}const qi=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,togglePlay:b,menu:h,subtitleText:f,downloadButton:S}=Ji(e),C=(0,P.jsx)(zi,{title:s,type:d,images:o,color:g});return(0,P.jsx)(Gi,{RowVariantComponent:r,uri:l,cover:C,name:s,subtitle:f,downloadButton:S,alt:s,type:d,dragLabel:s,menu:h,togglePlay:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:y,isActive:m,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Qi=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:o,type:s,color:c}=e,{togglePlay:d,menu:u,subtitleText:p,downloadButton:g,openDeleteDialog:y,isPlaying:m,isActive:x}=Ji(e),b=(0,P.jsx)(Xi,{title:l,type:s,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:x,isPlaying:m});return(0,P.jsx)(Ni,{uri:a,name:l,subtitle:p,menu:u,dragLabel:l,cover:b,downloadButton:g,type:s,togglePlay:d,isPinned:o,shouldShowType:t,openDeleteDialog:y,isPlaying:m,isActive:x,spec:r,index:i})};var $i=r(59416);function ea(e){const{uri:t}=e,r=(0,o.wA)(),{togglePlay:a}=(0,Vr.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:n,isActive:l}=(0,Hr.l_)(t);return{togglePlay:a,isPlaying:n,isActive:l,openDeleteDialog:(0,i.useCallback)((()=>{r((0,Mr.aw)(t))}),[r,t]),menu:(0,P.jsx)($i.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const ta=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{togglePlay:y,isPlaying:m,isActive:x,openDeleteDialog:b,menu:h}=ea(e),f=(0,P.jsx)(zi,{title:s,type:c,images:o,isCircular:!0,color:g});return(0,P.jsx)(Gi,{RowVariantComponent:r,uri:l,cover:f,name:s,type:c,alt:s,dragLabel:s,menu:h,togglePlay:y,openDeleteDialog:b,addedAt:d,lastPlayedAt:u,isPlaying:m,isActive:x,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},ra=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{togglePlay:d,menu:u,openDeleteDialog:p,isPlaying:g,isActive:y}=ea(e),m=(0,P.jsx)(Xi,{title:l,type:o,images:n,uri:a,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:y,isPlaying:g});return(0,P.jsx)(Ni,{uri:a,name:l,menu:u,dragLabel:l,cover:m,type:o,togglePlay:d,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:g,isActive:y,spec:r,index:i})};var ia=r(84749),aa=r(43505);const na=({locked:e})=>e?(0,P.jsx)(aa.u,{semanticColor:"textSubdued",title:f.Ru.get("mwp.header.content.unavailable"),className:ri.A.icon,size:"xsmall"}):null;function la(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(he.g),n=(0,o.wA)(),{isPlaying:l,isActive:s}=(0,Hr.l_)(t);return{isPlaying:l,isActive:s,openDeleteDialog:(0,i.useCallback)((()=>{n((0,Mr.aw)(t))}),[n,t]),menu:(0,P.jsx)(ia.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,P.jsx)(_r.M,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,P.jsx)(Ur.M,{uri:t,size:"xsmall",className:ri.A.icon,as:"span"})}}const oa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,menu:b,subtitleText:h,downloadButton:f}=la(e),S=(0,P.jsx)(zi,{title:s,type:c,images:o,color:g}),C=(0,P.jsx)(na,{locked:e.isLocked});return(0,P.jsx)(Gi,{RowVariantComponent:r,uri:l,cover:S,name:s,subtitle:h,alt:s,dragLabel:s,menu:b,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:m,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:a,lockedIcon:C,index:n,downloadButton:f})},sa=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:g,isActive:y,downloadButton:m}=la(e),x=(0,P.jsx)(Xi,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:y,isPlaying:g});return(0,P.jsx)(Ni,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:x,isPinned:s,shouldShowType:t,type:o,openDeleteDialog:p,isPlaying:g,isActive:y,spec:r,index:i,downloadButton:m})};var ca=r(3265),da=r(33482),ua=r(74540);const pa=({uri:e,divider:t,onDeleteCallback:r})=>{const a=(0,w.W)(),n=(0,o.wA)(),l=(0,i.useCallback)((()=>{a({intent:"playlisting",type:"click"}),n((0,Mr.OB)(e,r))}),[n,r,a,e]);return(0,P.jsx)(S.D,{role:"menuitem",divider:t,onClick:l,leadingIcon:(0,P.jsx)(ua.P,{semanticColor:"textSubdued",size:"small"}),children:f.Ru.get("contextmenu.delete")})},ga=i.memo((function(e){return(0,P.jsx)(y.pZ,{value:"delete-folder",children:(0,P.jsx)(pa,{...e})})}));var ya=r(89374),ma=r(54015),xa=r(37463);const ba=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:a,isActive:n}=(0,Vr.P)({uri:e},{featureIdentifier:"folder"}),l=(0,v.s)(),o=(0,i.useCallback)((()=>{r(),t&&l&&(a?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):n?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))}),[n,a,l,t,r,e]);return(0,P.jsx)(S.D,{role:"menuitem",onClick:o,leadingIcon:a?(0,P.jsx)(ma._,{semanticColor:"textSubdued",size:"small"}):(0,P.jsx)(xa.A,{semanticColor:"textSubdued",size:"small"}),children:a?f.Ru.get("pause"):f.Ru.get("play")})},ha=i.memo((function(e){return(0,P.jsx)(y.pZ,{value:"create-folder",children:(0,P.jsx)(ba,{...e})})}));var fa=r(70201);const Sa=({uri:e,name:t,divider:r,spec:a,handleRename:n})=>{const l=(0,v.s)(),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{a&&l.logInteraction(a.editButtonFactory({uri:e}).hitUiReveal()),s((0,Mr.O2)(t,n))}),[s,l,t,n,a,e]);return(0,P.jsx)(S.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,P.jsx)(fa.G,{semanticColor:"textSubdued",size:"small"}),children:f.Ru.get("contextmenu.rename")})},Ca=i.memo((function(e){return(0,P.jsx)(y.pZ,{value:"rename",children:(0,P.jsx)(Sa,{...e})})}));var va=r(56631);const wa=i.memo((function({reference:e,name:t="",onRename:r,onCreateCallback:i=(()=>{}),onDeleteCallback:a,canPin:n=m.oT.NO,isPinned:l=!1}){const{spec:o}=(0,x.o)(e.uri),s=(0,da.Ek)();return(0,P.jsx)(y.pZ,{value:"folder",children:(0,P.jsxs)(g.W,{children:[(0,P.jsx)(Ca,{spec:o,uri:e.uri,name:t,handleRename:r}),(0,P.jsx)(ga,{uri:e.uri,divider:"after",onDeleteCallback:a}),(n!==m.oT.NO||l)&&(0,P.jsx)(ya.k,{uri:e.uri,canPin:n,isPinned:l,type:F.c.FOLDER,spec:o}),(0,P.jsx)(R,{position:{after:e},onCreateCallback:i,spec:o}),(0,P.jsx)(b.j,{position:{after:e},onCreateCallback:i,spec:o}),(0,P.jsx)(va.y,{uriToBeAdded:e.uri,isInLibrary:!0,spec:o}),s&&(0,P.jsx)(ha,{uri:e.uri,spec:o})]})})}));var Pa=r(54361),Ta=r(96217),Ra=r(26831);const Aa=({uri:e})=>{const[t,r]=(0,i.useState)(!1),a=(0,i.useCallback)((()=>{r(!0),setTimeout((()=>{r(!1)}),500)}),[]);return(0,rt.l)(tt.UV.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&"liked-songs"===e&&a()})),(0,Ta.e)(Pa.Lj.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===t.data.uri&&a()})),(0,ct.b)(Ra.tD.OPERATION_COMPLETE,(t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,Xr.fp)(e)&&a()})),{animateState:t,animateClassName:ri.A.pulse}};var Da=r(50014),ja=r(87240);function Ia(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:s}=e,{isPlaying:c,isActive:d}=(0,Hr.l_)(r),{pushFolder:u}=(0,i.useContext)(Ve),p=(0,o.wA)(),{togglePlay:g}=(0,Vr.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),y=(0,o.d4)((e=>e.platform.isDesktop)),{handleDropOnFolder:m,unpinConfirmationDialog:x}=$e(t,r),{renameFolder:b}=(0,Da.Z)(),h=m,S=[l>0||!n?f.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?f.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(ja.P).join(f.Ru.getSeparator()),C=(0,i.useCallback)(((t="")=>{b(e,t)}),[e,b]),v=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,Mr.OB)(r))}),[p,r]),togglePlay:y?g:void 0,menu:(0,P.jsx)(wa,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:s,onRename:C}),subtitleText:S,onDropTargetDropOn:h,handleNavigate:v,dropOnFolderUnpinConfirmationDialog:x,isPlaying:c,isActive:d}}const La=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:a,index:l})=>{const{uri:o,folderDepth:s,name:c,type:d,isFlattened:u,pinned:p,canReorder:g}=e,{openDeleteDialog:y,togglePlay:m,menu:x,subtitleText:b,onDropTargetDropOn:h,handleNavigate:S,dropOnFolderUnpinConfirmationDialog:C,isPlaying:w,isActive:T}=Ia(e,r),[R,A]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(Be);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(o),D=(0,v.s)(),j=(0,i.useCallback)((()=>{A(!0),D.logInteraction(r.yourLibraryItemFactory().dragUiReveal())}),[D,A,r]),I=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),L=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),A(!R),R?D.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):D.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[A,R,D,r]),O=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?A(!1):"ArrowRight"===e.key&&A(!0)}),[A]),E=!u&&(0,P.jsx)(xt.H,{"data-skip-in-keyboard-nav":!0,"aria-label":R?f.Ru.get("web-player.your-library-x.collapse-folder"):f.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:ca.y,size:"small",condensedAll:!0,onClick:L,onDoubleClick:I,tabIndex:-1,className:n()(Qt,$t,{[dr]:!R})}),{animateState:k,animateClassName:N}=Aa({uri:o}),F=(0,P.jsx)(zi,{title:c,type:d,animateState:k,animateClassName:N});return(0,P.jsxs)(P.Fragment,{children:[C,(0,P.jsx)(Gi,{onKeyDown:O,RowVariantComponent:t,uri:o,to:`/folder/${(0,Xr.o_)(o)?.id??""}`,handleNavigate:S,folderDepth:s,cover:F,name:c,subtitle:b,alt:c,dragLabel:c,menu:x,canReorder:g,allowedDropTargetDropOnMimeTypes:Ne,onDropTargetDropOn:h,onLongDragOver:j,togglePlay:m,openDeleteDialog:y,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:w,isActive:T,expandFolderButton:E,spec:r,nrValidItems:a,index:l})]})},Oa=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:a,type:n,pinned:l,canReorder:o}=e,{togglePlay:s,menu:c,subtitleText:d,onDropTargetDropOn:u,handleNavigate:p,openDeleteDialog:g,isPlaying:y,isActive:m}=Ia(e,t),{animateState:x,animateClassName:b}=Aa({uri:i}),h=(0,P.jsx)(Xi,{title:a,type:n,uri:i,togglePlay:s,spec:t,isActive:m,isPlaying:y});return(0,P.jsx)(Ni,{uri:i,to:`/folder/${(0,Xr.o_)(i)?.id??""}`,handleNavigate:p,cover:h,name:a,subtitle:d,menu:c,dragLabel:a,canReorder:o,allowedDropTargetDropOnMimeTypes:Ne,onLongDragOver:p,onDropTargetDropOn:u,togglePlay:s,isPinned:l,shouldShowType:!1,type:n,openDeleteDialog:g,isPlaying:y,isActive:m,spec:t,index:r,animateState:x,animateClassName:b})};var Ea=r(1084);const ka=i.memo((function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:a}=(0,x.o)(e);return(0,P.jsx)(y.pZ,{value:"generic",children:(0,P.jsxs)(g.W,{children:[i?(0,P.jsx)(Ea.d,{spec:a,uri:i}):null,t!==m.oT.NO&&(0,P.jsx)(ya.k,{uri:e,canPin:t,isPinned:r,type:F.c.PLAYLIST,spec:a})]})})}));var Na=r(31350);const Fa=[q.fl.TRACKS,q.fl.LOCAL_TRACKS];function Ma(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,o.d4)(Na.Ht),n=(0,Xr.fH)(a?.id).toURI(),l=n,s=n,{togglePlay:c}=(0,Vr.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),d=(0,i.useContext)(N.Z),{isPlaying:u,isActive:p}=(0,Hr.l_)(l),g=(0,i.useCallback)((e=>{const{[q.fl.TRACKS]:t=[],[q.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&d?.add({uris:i})}),[d]);return{isPlaying:u,isActive:p,togglePlay:c,menu:(0,P.jsx)(ka,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:s}),downloadButton:(0,P.jsx)(Ur.M,{uri:s,size:"xsmall",className:ri.A.icon,as:"span"}),subtitleText:(0,P.jsx)(P.Fragment,{children:f.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:g,playbackUri:l,uri:r}}const Ba=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{images:l,name:o,type:s,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:g,isActive:y,togglePlay:m,menu:x,subtitleText:b,onDropTargetDropOn:h,playbackUri:f,uri:S,downloadButton:C}=Ma(e),{animateState:v,animateClassName:w}=Aa({uri:"liked-songs"}),T=(0,P.jsx)(zi,{title:o,type:s,images:l,color:p,animateState:v,animateClassName:w});return(0,P.jsx)(Gi,{RowVariantComponent:r,uri:S,cover:T,name:o,subtitle:b,alt:o,dragLabel:o,menu:x,allowedDropTargetDropOnMimeTypes:Fa,onDropTargetDropOn:h,togglePlay:m,addedAt:d,lastPlayedAt:u,isPlaying:g,isActive:y,isPinned:c,shouldShowType:t,type:s,playbackUri:f,downloadButton:C,spec:i,nrValidItems:a,index:n})},Ua=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:a,name:n,type:l,pinned:o,color:s}=e,{togglePlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,playbackUri:g,uri:y,downloadButton:m,isPlaying:x,isActive:b}=Ma(e),{animateState:h,animateClassName:f}=Aa({uri:"liked-songs"}),S=(0,P.jsx)(Xi,{title:n,type:l,images:a,uri:g,togglePlay:c,color:s,spec:r,isActive:b,isPlaying:x});return(0,P.jsx)(Ni,{uri:y,name:n,subtitle:u,menu:d,dragLabel:n,allowedDropTargetDropOnMimeTypes:Fa,onDropTargetDropOn:p,cover:S,togglePlay:c,isPinned:o,shouldShowType:t,type:l,playbackUri:g,downloadButton:m,isPlaying:x,isActive:b,spec:r,index:i,animateState:h,animateClassName:f})};var _a=r(11866),Va=r(56799),Ha=r(53886),Wa=r(75653);function za(e){const{numberOfFiles:t}=e,r=Wa.bV,i=(0,Ha.Iu)().uri,{isPlaying:a,isActive:n}=(0,Hr.l_)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,P.jsx)(ka,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,P.jsx)(_a.F,{size:"xsmall",className:ri.A.icon,semanticColor:"textBrightAccent"}),subtitleText:f.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Xa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{name:l,addedAt:o,lastPlayedAt:s,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:g,menu:y,subtitleText:m,downloadButton:x,isActive:b}=za(e),h=(0,P.jsx)("div",{className:er,children:(0,P.jsx)(Va.e,{iconSize:24,title:l})});return(0,P.jsx)(Gi,{RowVariantComponent:r,uri:p,name:l,subtitle:m,alt:l,dragLabel:l,menu:y,addedAt:o,lastPlayedAt:s,isPinned:d,isPlaying:g,isActive:b,shouldShowType:t,playbackUri:u,downloadButton:x,cover:h,type:c,spec:i,nrValidItems:a,index:n})},Ya=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:a,images:n,type:l,pinned:o}=e,{playbackUri:s,uri:c,menu:u,downloadButton:p,subtitleText:g,isPlaying:y,isActive:m}=za(e),x=(0,d.NC)(Jr.AE),b=(0,P.jsx)("div",{className:Li,children:(0,P.jsx)(Fi.M,{images:n,FallbackComponent:e=>(0,P.jsx)(Va.e,{size:"xxlarge",className:x?Ii:"",...e})})});return(0,P.jsx)(Ni,{uri:c,name:a,subtitle:g,menu:u,cover:b,type:l,playbackUri:s,downloadButton:p,isPinned:o,shouldShowType:t,isPlaying:y,isActive:m,spec:r,index:i})};var Ka=r(52612);const Za=({index:e,type:t})=>{const r=(0,d.NC)(Jr.AE),i=Ai();return(0,P.jsx)(Ka.T,{columnIndex:0,children:(0,P.jsx)(Wr.Z,{className:n()(Di,{[ji]:i}),media:(0,P.jsx)(Fi.M,{images:[],FallbackComponent:()=>(0,P.jsx)(Ui.s,{type:t,size:"xxlarge",className:r?Ii:"",semanticColor:"textSubdued"}),isCircular:t===F.c.ARTIST}),variant:"naked",id:e,title:"",padding:i?zr.vw:zr.CJ})})};var Ga=r(41078),Ja=r(88482),qa=r(17980),Qa=r(96710),$a=r(20490),en=r(28540),tn=r(41190),rn=r(74062),an=r(48134),nn=r(86722),ln=r(54850),on=r(350),sn=r(47204),cn=r(41694),dn=r(56094),un=r(31452),pn=r(41894),gn=r(64645);const yn=i.memo((function({reference:e,isPublished:t,canPin:r=m.oT.NO,isPinned:i=!1,useDialogForUnfollow:a=!1,isInLibrary:n}){const{uri:l}=e,o=(0,qa.J)(l),s=!!o?.permissions?.isPrivate,c=(0,Qa.v)(l)??o?.isPublished??t,{spec:d}=(0,x.o)(l),u=o?.hasSpotifyAudiobooks;return o&&(0,P.jsx)(y.pZ,{value:"playlist",children:(0,P.jsxs)(g.W,{children:[!u&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(en.K,{spec:d,uris:[l]}),(0,P.jsx)($a._,{uri:l,spec:d})]}),!s&&(0,P.jsx)(dn._,{spec:d,divider:o.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),o.isOwnedBySelf&&(0,P.jsx)(an.T,{spec:d,uri:l,name:o.name,description:o.description,image:o.images[0]}),!o.isOwnedBySelf&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(un.P,{spec:d,uri:l}),(0,P.jsx)(Ja.ET,{uri:l,useDialog:a,initialState:n})]}),o.isOwnedBySelf&&(0,P.jsx)(rn.u,{spec:d,uri:l}),!u&&(0,P.jsx)(Ea.d,{spec:d,uri:l}),(0,P.jsx)(R,{position:{after:e},divider:"before",spec:d}),(0,P.jsx)(b.j,{position:{after:e},spec:d}),o.permissions?.canAdministratePermissions&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(cn.U,{spec:d,divider:"before",uri:l,isPrivate:s}),!u&&(0,P.jsx)(ln.n,{uri:l,spec:d})]}),o.permissions?.canCancelMembership&&(0,P.jsx)(on._,{spec:d,divider:"before",uri:l}),(0,P.jsx)(nn.w,{spec:d,uri:l}),(0,P.jsx)(va.y,{uriToBeAdded:l,isInLibrary:!0,spec:d}),!u&&(0,P.jsx)(pn.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==m.oT.NO||i)&&(0,P.jsx)(ya.k,{uri:l,canPin:r,isPinned:i,type:F.c.PLAYLIST,spec:d}),(o.isOwnedBySelf||!s)&&(0,P.jsxs)(gn.h,{divider:"before",children:[(0,P.jsx)(tn.m,{spec:d,uri:l,displayText:f.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:s}),(0,P.jsx)(sn.x,{spec:d,uri:l,type:F.c.PLAYLIST})]})]})})})),mn=i.memo((function({reference:e,canPin:t=m.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:a}=(0,x.o)(i);return(0,P.jsx)(y.pZ,{value:"playlist",children:(0,P.jsxs)(g.W,{children:[(0,P.jsx)(R,{position:{after:e},divider:"before",spec:a}),(0,P.jsx)(b.j,{position:{after:e},spec:a}),t!==m.oT.NO&&(0,P.jsx)(ya.k,{uri:i,canPin:t,isPinned:r,type:F.c.PLAYLIST,spec:a})]})})}));var xn=r(42529);const bn=()=>(0,i.useContext)(xn.w).getCapabilities();function hn(e,t){const{uri:r,isLoading:a,owner:n,pinned:l}=e,s=(0,i.useContext)(xn.w),{filter:c}=(0,i.useContext)(he.g),{canAddAudiobooks:d}=bn(),u=[q.fl.TRACKS,q.fl.LOCAL_TRACKS,q.fl.ALBUMS,q.fl.EPISODES],p=d?[q.fl.AUDIOBOOKS]:[];(0,i.useEffect)((()=>{a&&s.resync(r)}),[s,r,a]);const{togglePlay:y}=(0,Vr.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:m,isActive:x}=(0,Hr.l_)(r),b=(0,o.wA)(),h=(0,v.s)();let S,C=[];const w=(0,i.useCallback)((async e=>{const{[q.fl.TRACKS]:i=[],[q.fl.LOCAL_TRACKS]:a=[],[q.fl.ALBUMS]:n=[],[q.fl.EPISODES]:l=[],[q.fl.AUDIOBOOKS]:o=[]}=e,s=[...i,...a,...n,...l,...o];b((0,Ga.io)(r,s)),h.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:s.at(0)??"",playlist:r}))}),[b,h,t,r]);e.canAddTo&&(C=e.isEmpty?[...p,...u]:e.isBooklist?p:u,S=w);const T=(0,i.useCallback)((()=>{b((0,Mr.O)(r))}),[b,r]),R=(0,Nr.c0)(r),A=a&&!e.name;let D;D=R?(0,P.jsx)(mn,{reference:e,canPin:e.canPin,isPinned:l}):A?(0,P.jsx)(g.W,{children:(0,P.jsx)(Ja.ET,{uri:r,initialState:!0})}):(0,P.jsx)(yn,{reference:e,canPin:e.canPin,isPinned:l,useDialogForUnfollow:!0,isInLibrary:!0});const j=(0,P.jsx)(Ur.M,{uri:r,size:"xsmall",className:ri.A.icon,as:"span"}),I=(0,Nr.c0)(r)?(0,P.jsx)(P.Fragment,{children:f.Ru.get("ylx.clicktoplay")}):(n.uri,(0,P.jsx)(_r.M,{searchWords:[c.trim()],textToHighlight:n.name}));return{openDeleteDialog:T,togglePlay:e.isBooklist?void 0:y,isPlaying:m,isActive:x,menu:D,downloadButton:j,subtitleText:I,allowedDropTargetDropOnMimeTypes:C,onDropTargetDropOn:S}}const fn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,folderDepth:s,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:g,color:y,canReorder:m}=e,{openDeleteDialog:x,togglePlay:b,isPlaying:h,isActive:f,menu:S,downloadButton:C,subtitleText:v,allowedDropTargetDropOnMimeTypes:w,onDropTargetDropOn:T}=hn(e,i),{animateState:R,animateClassName:A}=Aa({uri:l}),D=(0,P.jsx)(zi,{title:c,type:d,images:o,color:y,animateState:R,animateClassName:A});return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Gi,{RowVariantComponent:r,uri:l,folderDepth:s,cover:D,name:c,subtitle:v,alt:c,dragLabel:c,menu:S,canReorder:m,allowedDropTargetDropOnMimeTypes:w,onDropTargetDropOn:T,togglePlay:b,openDeleteDialog:x,addedAt:p,lastPlayedAt:g,isPlaying:h,isActive:f,isPinned:u,shouldShowType:t,type:d,downloadButton:C,spec:i,playInsteadOfNavigating:(0,Nr.c0)(l),nrValidItems:a,index:n})})},Sn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c,canReorder:d}=e,{togglePlay:u,menu:p,downloadButton:g,subtitleText:y,onDropTargetDropOn:m,allowedDropTargetDropOnMimeTypes:x,openDeleteDialog:b,isPlaying:h,isActive:f}=hn(e,r),{animateState:S,animateClassName:C}=Aa({uri:a}),v=(0,P.jsx)(Xi,{title:l,type:o,images:n,uri:a,togglePlay:u,color:c,spec:r,isActive:f,isPlaying:h});return(0,P.jsx)(Ni,{uri:a,name:l,subtitle:y,menu:p,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:x,onDropTargetDropOn:m,cover:v,togglePlay:u,isPinned:s,shouldShowType:t,type:o,downloadButton:g,openDeleteDialog:b,isPlaying:h,isActive:f,spec:r,playInsteadOfNavigating:(0,Nr.c0)(a),index:i,animateState:S,animateClassName:C})};var Cn=r(98986),vn=r(79787),wn=r(80430),Pn=r(79280);const Tn=i.memo((function({uri:e,canPin:t=m.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:a}=(0,x.o)(e);return(0,P.jsx)(y.pZ,{value:"audiobook",children:(0,P.jsxs)(g.W,{children:[i&&(0,P.jsx)(Pn.p,{uri:e,removeLabel:f.Ru.get("contextmenu.remove-from-library")}),t!==m.oT.NO&&(0,P.jsx)(ya.k,{uri:e,canPin:t,isPinned:r,type:F.c.PRE_RELEASE_BOOK,spec:a}),(0,P.jsx)(tn.m,{uri:e,spec:a,displayText:f.Ru.get("context-menu.copy-book-link")}),(0,P.jsx)(wn.q,{spec:a,divider:"before",uri:e})]})})}));function Rn(e){const{uri:t,canPin:r,pinned:a,type:n}=e,{filter:l}=(0,i.useContext)(he.g),s=(0,o.wA)(),c=(0,i.useCallback)((()=>{s((0,Mr.aw)(t,!0))}),[s,t]);let d,u="";if(n===F.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,P.jsx)(vn.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:a,canRemove:!0})}else u=e.authorName,d=(0,P.jsx)(Tn,{uri:t,canPin:r,isPinned:a,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,P.jsx)(_r.M,{searchWords:[l.trim()],textToHighlight:u})}}const An=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{openDeleteDialog:y,menu:m,subtitleText:x}=Rn(e),b=(0,P.jsx)(zi,{title:s,type:d,images:o,color:g});return(0,P.jsx)(Gi,{RowVariantComponent:r,uri:l,cover:b,name:s,subtitle:x,alt:s,type:d,dragLabel:s,menu:m,openDeleteDialog:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n,preReleaseIcon:(0,P.jsx)(Cn.t,{size:"xsmall",className:ri.A.icon})})},Dn=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:o,type:s,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=Rn(e),g=(0,P.jsx)(Xi,{title:l,type:s,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,P.jsx)(Ni,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:g,type:s,isPinned:o,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,P.jsx)(Cn.t,{size:"xsmall",className:ri.A.icon})})};var jn=r(63445);function In(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(he.g),n=(0,o.wA)(),{togglePlay:l}=(0,Vr.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:c}=(0,Hr.l_)(t);return{isPlaying:s,isActive:c,openDeleteDialog:(0,i.useCallback)((()=>{n((0,Mr.aw)(t))}),[n,t]),togglePlay:l,menu:(0,P.jsx)(jn.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,P.jsx)(Ur.M,{uri:t,size:"xsmall",className:ri.A.icon,as:"span"}),subtitleText:(0,P.jsx)(_r.M,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const Ln=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:o,name:s,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,togglePlay:b,menu:h,downloadButton:f,subtitleText:S}=In(e),C=(0,P.jsx)(zi,{title:s,type:c,images:o,color:g});return(0,P.jsx)(Gi,{RowVariantComponent:r,uri:l,cover:C,name:s,subtitle:S,alt:s,dragLabel:s,menu:h,togglePlay:b,openDeleteDialog:x,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:m,isPinned:p,shouldShowType:t,type:c,downloadButton:f,spec:i,nrValidItems:a,index:n})},On=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:o,pinned:s,color:c}=e,{togglePlay:d,menu:u,downloadButton:p,subtitleText:g,openDeleteDialog:y,isPlaying:m,isActive:x}=In(e),b=(0,P.jsx)(Xi,{title:l,type:o,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:x,isPlaying:m});return(0,P.jsx)(Ni,{uri:a,name:l,subtitle:g,menu:u,dragLabel:l,cover:b,togglePlay:d,isPinned:s,shouldShowType:t,type:o,downloadButton:p,openDeleteDialog:y,isPlaying:m,isActive:x,spec:r,index:i})},En=[q.fl.EPISODES];function kn(e){const{numberOfDownloadedEpisodes:t}=e,{user:r}=(0,o.d4)(Na.Ht),a=(0,Xr.fH)(r?.id,"your-episodes").toURI(),n=m.Xn,{togglePlay:l}=(0,Vr.P)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:c}=(0,Hr.l_)(a),d=(0,i.useContext)(N.Z),u=(0,i.useCallback)((e=>{const{[q.fl.EPISODES]:t=[]}=e;t?.length&&d?.add({uris:t})}),[d]);return{isPlaying:s,isActive:c,togglePlay:l,menu:(0,P.jsx)(ka,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,P.jsx)(_a.F,{size:"xsmall",className:ri.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:f.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n}}const Nn=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:a})=>{const{images:n,name:l,type:o,pinned:s,lastPlayedAt:c,addedAt:d,color:u}=e,{isPlaying:p,isActive:g,togglePlay:y,menu:m,downloadButton:x,subtitleText:b,onDropTargetDropOn:h,playbackUri:f,uri:S}=kn(e),C=(0,P.jsx)(zi,{title:l,type:o,images:n,color:u});return(0,P.jsx)(Gi,{RowVariantComponent:t,uri:S,cover:C,name:l,subtitle:b,alt:l,dragLabel:l,menu:m,allowedDropTargetDropOnMimeTypes:En,onDropTargetDropOn:h,togglePlay:y,addedAt:d,lastPlayedAt:c,isPlaying:p,isActive:g,isPinned:s,shouldShowType:!1,type:o,downloadButton:x,playbackUri:f,spec:r,nrValidItems:i,index:a})},Fn=({libraryItem:e,spec:t,index:r})=>{const{images:i,name:a,type:n,pinned:l,color:o}=e,{togglePlay:s,menu:c,downloadButton:d,subtitleText:u,onDropTargetDropOn:p,playbackUri:g,uri:y,isPlaying:m,isActive:x}=kn(e),b=(0,P.jsx)(Xi,{title:a,type:n,images:i,uri:y,togglePlay:s,color:o,spec:t,isActive:x,isPlaying:m});return(0,P.jsx)(Ni,{uri:y,name:a,subtitle:u,menu:c,dragLabel:a,allowedDropTargetDropOnMimeTypes:En,onDropTargetDropOn:p,cover:b,togglePlay:s,playbackUri:g,downloadButton:d,isPinned:l,shouldShowType:!1,type:n,isPlaying:m,isActive:x,spec:t,index:r})},Mn=(0,se.g)(F.c),Bn=(0,i.memo)((function({item:e,primaryFilter:t,spec:r,index:i}){const a={shouldShowType:!(0,Nr.c0)(e.uri)&&wi(e.type)!==t,spec:r,index:i},n=(0,d.NC)(j.lDH),l=(0,d.NC)(j.H8e);switch(e.type){case F.c.FOLDER:return(0,P.jsx)(Oa,{libraryItem:e,...a});case F.c.ALBUM:return(0,P.jsx)(Qi,{libraryItem:e,...a});case F.c.ARTIST:return(0,P.jsx)(ra,{libraryItem:e,...a});case F.c.AUDIOBOOK:return(0,P.jsx)(sa,{libraryItem:e,...a});case F.c.SHOW:return(0,P.jsx)(On,{libraryItem:e,...a});case F.c.PLAYLIST:return(0,P.jsx)(Sn,{libraryItem:e,...a});case F.c.LIKED_SONGS:return(0,P.jsx)(Ua,{libraryItem:e,...a});case F.c.YOUR_EPISODES:return(0,P.jsx)(Fn,{libraryItem:e,...a});case F.c.LOCAL_FILES:return(0,P.jsx)(Ya,{libraryItem:e,...a});case F.c.PRE_RELEASE_ALBUM:return n?(0,P.jsx)(Dn,{libraryItem:e,...a}):null;case F.c.PRE_RELEASE_BOOK:return l?(0,P.jsx)(Dn,{libraryItem:e,...a}):null;default:(0,it.d)(e)}})),Un=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const{gridScale:l}=Fr(),o=(0,Ir.s1)(Ir.yV.NEW_CARDS,l),s=(0,i.useRef)({}),c=function(){const{gridScale:e}=Fr();return!!(0,d.NC)(j.AEN)&&e<.8}(),u=(0,i.useCallback)((e=>(0,P.jsx)(Za,{index:e,type:Mn(r)?r:void 0},e)),[r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>e?(0,P.jsx)(Bn,{item:e,spec:n,primaryFilter:r,index:t+i},e.uri):u(`${t+i}`)))),[e,r,u,n]),g=(0,i.useCallback)(((e,t)=>{s.current={numColumns:e,rowHeight:t}}),[]);return(0,P.jsx)(jr.x,{config:o,children:(0,P.jsx)(Ri,{isCompact:c,children:(0,P.jsx)(kr.R,{firstInteractiveIsWrapper:!0,"aria-label":f.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(s.current.numColumns??1)),"aria-colcount":s.current.numColumns,children:(0,P.jsx)(Er,{renderItems:p,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:g})})})})};var _n=r(49253),Vn=r(53735);const Hn="main-yourLibraryX-header",Wn="ILEuCdEH9mglJaM4gKuf",zn="main-yourLibraryX-collapseButtonWrapper",Xn="main-yourLibraryX-headerContent",Yn="iYP0xuQiJCgi7gx1jUPJ",Kn="main-yourLibraryX-collapseButton",Zn="main-yourLibraryX-button",Gn="af749NDLYTDK_8LinKWD",Jn="nGWhztVvLY1BInXjcWYa",qn="oZT8iKL42zhLAm_zE5F5",Qn="MdDY8fQ_j94mQZy7ZVXf",$n="uNReR011bI8ML42Pgveg",el=e=>{switch(e){case E.fX.EXPANDED:return"expanded";case E.fX.COLLAPSED:return"collapsed";case E.fX.DEFAULT:return"default";default:throw(0,it.k)(e)}},tl=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:a,ylxSidebarState:l,setYlxSidebarState:o,lastUncollapsedYlxSidebarState:s}=(0,E.$)(),c=(0,v.s)(),d=(0,i.useCallback)((()=>{const e=l===E.fX.COLLAPSED?s:E.fX.COLLAPSED;o(e),c.logInteraction(r.hitToggleState({stateBeforeToggle:el(l),stateAfterToggle:el(e)}))}),[l,s,o,c,r]),u=a?_n.M:Vn.A;return(0,P.jsx)(ht.Zp,{label:a?f.Ru.get("web-player.your-library-x.expand-your-library"):f.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:(0,P.jsx)(xt.H,{"aria-label":a?f.Ru.get("web-player.your-library-x.expand-your-library"):f.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:d,className:n()(zn,Zn,t),condensed:!0,iconLeading:e||a?void 0:u,iconOnly:e||a?u:void 0,children:!e&&!a&&f.Ru.get("web-player.your-library-x.your-library")})})};var rl=r(87034),il=r(76817);const al=({dropTargetClassName:e,spec:t})=>{const{ylxSidebarState:r,setYlxSidebarState:i}=(0,E.$)(),a=r===E.fX.DEFAULT,l=(0,v.s)();return(0,P.jsx)(ht.Zp,{label:a?f.Ru.get("web-player.your-library-x.show-more"):f.Ru.get("web-player.your-library-x.show-less"),children:(0,P.jsx)(xt.H,{className:n()(Zn,Jn,e),iconOnly:a?rl.h:il.G,"aria-label":a?f.Ru.get("web-player.your-library-x.enlarge-your-library"):f.Ru.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{i(a?E.fX.EXPANDED:E.fX.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:a?"default":"expanded",stateAfterToggle:a?"expanded":"default"}))},size:"small"})})};var nl=r(18258),ll=r(65325);const ol=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,P.jsx)(ll.b,{menu:e,children:(0,P.jsx)("span",{children:(0,P.jsx)(ht.Zp,{label:f.Ru.get("more.label.context",t),children:(0,P.jsx)(xt.H,{className:n()(Zn,Jn,r),iconOnly:nl.x,"aria-haspopup":"menu","aria-label":f.Ru.get("more.label.context",t),size:"small"})})})});var sl=r(30190),cl=r(14570);const dl=({dropTargetClassName:e,spec:t})=>{const{isGridView:r,setItemsView:i}=(0,ze.t)(),a=(0,v.s)();return(0,P.jsx)(ht.Zp,{label:r?f.Ru.get("web-player.your-library-x.list-view"):f.Ru.get("web-player.your-library-x.grid-view"),children:(0,P.jsx)(xt.H,{className:n()(Zn,e),iconOnly:r?sl.N:cl.D,"aria-label":r?f.Ru.get("web-player.your-library-x.list-view"):f.Ru.get("web-player.your-library-x.grid-view"),onClick:()=>{i(r?ze.X.LIST:ze.X.GRID),a.logInteraction(t.hitToggleState({stateBeforeToggle:r?"grid":"list",stateAfterToggle:r?"list":"grid"}))},size:"small"})})};var ul=r(90923);var pl=r(55129),gl=r(87882),yl=r(33117);const ml=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,C.A)(),{createFolder:i}=(0,Da.Z)(),a=(0,v.s)(),n=(0,Re.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,P.jsxs)(g.W,{children:[(0,P.jsx)(S.D,{onClick:()=>{r(void 0,l),a.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,P.jsx)(h.u,{size:"small"}),children:f.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!n&&(0,P.jsx)(S.D,{onClick:()=>{i(f.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(t.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,P.jsx)(yl.h,{size:"small"}),children:f.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},xl=({className:e="",folderUri:t,tooltipPlacement:r,spec:a})=>{const l=f.Ru.get("web-player.your-library-x.create.button-label"),o=(0,v.s)(),{canAddAudiobooks:s}=bn(),{createPlaylistFromAlbum:c,createPlaylistFromTracks:d,createPlaylistFromPlaylist:u}=(0,C.A)(),{className:p,dropPosition:g,...y}=(0,$.A)({allowedMimeTypesByDropPosition:{[Q.Nz.ON]:[q.fl.TRACKS,q.fl.EPISODES,q.fl.ALBUMS,q.fl.PLAYLISTS_V2,...s?[q.fl.AUDIOBOOKS]:[]]},onDrop:(0,i.useCallback)((e=>{const{[q.fl.TRACKS]:r=[],[q.fl.LOCAL_TRACKS]:i=[],[q.fl.EPISODES]:a=[],[q.fl.AUDIOBOOKS]:n=[],[q.fl.ALBUMS]:l=[],[q.fl.PLAYLISTS_V2]:o=[]}=e,s=t?{after:{uri:t}}:{before:"start"},p=[...r,...i,...a];n.length>0?d(n,s):p.length?d(p,s):l.length>0?c(l[0],s):o.length>0&&u(o[0],s)}),[c,u,d,t])});return(0,P.jsx)(gl.t,{renderInline:!0,menu:(0,P.jsx)(ml,{folderUri:t,spec:a.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,i,s)=>(0,P.jsx)(ht.Zp,{label:l,placement:r,children:(0,P.jsx)(xt.H,{ref:s,iconOnly:pl.u,className:n()(e,p,{[fr]:g===Q.Nz.ON}),"aria-label":l,onClick:e=>{i(e),o.logInteraction(a.hitUiReveal())},size:"small",...y})})})};var bl=r(23659);const hl=({handleNavigateBack:e,parentFolderUri:t,spec:r})=>{const{handleDropBeforeOrAfterRootlistItem:i}=hi({dropTargetUri:t,spec:r}),{dropPosition:a,className:l,...o}=(0,$.A)({allowedMimeTypesByDropPosition:{[Q.Nz.ON]:Ee},onDrop:async e=>{i(e,Q.Nz.BEFORE)},onLongDragOver:e});return(0,P.jsx)(ht.Zp,{label:f.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,P.jsx)(xt.H,{className:n()(Zn,Gn,l,{[fr]:a===Q.Nz.ON}),"aria-label":f.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:bl.g,size:"small",...o})})},fl=(0,i.forwardRef)((function({folderUri:e,folderName:t,folderMenu:r,onRename:a,spec:l,className:s},c){const{isActive:d}=(0,Hr.l_)(e??"not-a-folder"),u=(0,o.wA)(),g=(0,v.s)(),y=(0,i.useCallback)((()=>{u((0,Mr.O2)(t,a)),g.logInteraction(l.hitRenameFolder({uri:e}))}),[u,t,e,g,a,l]);return(0,P.jsx)(ht.Zp,{label:t,showDelay:ht.uF,children:(0,P.jsx)("div",{className:n()(Qn,s),children:(0,P.jsx)(p.h,{menu:r,children:(0,P.jsx)(xt.H,{"aria-label":t,onClick:y,size:"small",condensed:!0,className:n()(Zn),ref:c,children:(0,P.jsx)(we.E,{variant:"bodyMediumBold",semanticColor:d?"textBrightAccent":void 0,className:$n,children:t})})})})})}));var Sl=r(55758),Cl=r(65687),vl=r(98931);const wl="fJrnaZd0QWm65978IgD2",Pl="yCpl0fAaEYj7E8F_Oabw",Tl=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=Cl.I.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,vl.b)(r,a),e}();return e?(0,P.jsxs)("div",{className:wl,children:[(0,P.jsxs)("div",{className:Pl,children:[(0,P.jsx)(we.E,{variant:"bodySmallBold",semanticColor:"textBase",children:f.Ru.get("web-player.your-library-x.download-progress-title")}),(0,P.jsx)(we.E,{variant:"bodySmallBold",semanticColor:"textBase",children:f.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,P.jsx)(Sl.z,{value:t})]}):null},Rl=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:a,spec:l})=>{const{isCollapsed:o,ylxSidebarState:s,canExpand:u}=(0,E.$)(),{renameFolder:p}=(0,Da.Z)(),{popFolder:g}=(0,i.useContext)(Ve),y=(0,i.useCallback)(((e="")=>{r&&p({uri:r},e)}),[r,p]),m=(0,i.useCallback)((()=>{g()}),[g]),x=r?(0,P.jsx)(wa,{reference:{uri:r},name:a,onRename:y,onDeleteCallback:m}):null,{dropOriginIsYLX:b}=Me(),h=!o&&r&&void 0!==a,f=(0,i.useRef)(null),S=(0,i.useRef)(null),C=(0,i.useRef)(null);!function(e,t,r,...a){const n=(0,c.U0)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[a]);(0,i.useLayoutEffect)(n,[n]),(0,_i.w)({refOrElement:r,observeOnly:"width",onResize:n})}(C,(0,i.useMemo)((()=>({get current(){return S.current?.firstElementChild instanceof HTMLElement?S.current?.firstElementChild:null}})),[]),f,a,h);const v=(0,d.NC)(j.AEN),w=(0,ul.A)(),T=!o||t&&o;return(0,P.jsxs)("header",{className:n()(Hn,{[Wn]:w,[qn]:o}),ref:f,children:[!o&&(0,P.jsx)(Tl,{}),(0,P.jsxs)("div",{className:n()(Xn,{[Yn]:o}),children:[(0,P.jsxs)("div",{className:n()(Kn,{[Yn]:o}),children:[(0,P.jsx)(tl,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory({identifier:""})}),r&&(0,P.jsx)(hl,{handleNavigateBack:m,parentFolderUri:r,spec:l.folderBackButtonFactory()}),h&&(0,P.jsx)(fl,{folderUri:r,folderName:a,folderMenu:x,onRename:y,spec:l.folderTitleFactory(),className:b?e:void 0,ref:S},r)]}),T&&(0,P.jsx)("span",{ref:C,children:(0,P.jsx)(xl,{className:n()(Zn,Jn),folderUri:r,tooltipPlacement:o?"right":void 0,spec:l.createMenuButtonFactory()})}),r&&!o&&(0,P.jsx)(ol,{folderName:a,folderMenu:x,dropTargetClassName:e}),s===E.fX.EXPANDED&&!v&&(0,P.jsx)(dl,{dropTargetClassName:e,spec:l.viewDensityToggleFactory({identifier:""})}),(s===E.fX.DEFAULT&&u||s===E.fX.EXPANDED)&&(0,P.jsx)(al,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory({identifier:""})})]})]})};var Al=r(24032),Dl=r(30132),jl=r(2394),Il=r(88395);const Ll=({date:e})=>(0,P.jsx)(we.E,{variant:"bodySmall",semanticColor:"textSubdued",className:lr,children:e&&f.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),Ol=e=>{const t=e.handleNavigate,r=(0,P.jsx)(pi,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,P.jsx)(Gr,{})),a=(0,P.jsx)(ii,{leading:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Pi.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,P.jsxs)(P.Fragment,{children:[e.shouldShowType&&vi(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),n=e.logRightClick,l=(0,P.jsx)(p.h,{menu:e.menu,onShow:n,children:(0,P.jsx)(Kr.E,{uri:e.uri,trigger:Kr.l.OnMouseDown,children:(0,P.jsx)(jl.v,{className:Zt,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:zr.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})});return(0,Nr.c0)(e.uri)?(0,P.jsx)(qr.cW,{parentRef:e.parentRef,children:l}):l},El=e=>{const t=e.handleNavigate,r=(0,P.jsx)(pi,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,P.jsx)(ii,{leading:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Pi.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,P.jsxs)(P.Fragment,{children:[e.shouldShowType&&vi(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),a=e.logRightClick;return(0,P.jsx)($r,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,P.jsxs)("div",{children:[(0,P.jsx)(p.h,{menu:e.menu,onShow:a,children:(0,P.jsx)(Kr.E,{uri:e.uri,trigger:Kr.l.OnMouseDown,children:(0,P.jsx)(jl.v,{className:n()(Zt,Jt),media:e.cover,id:e.uri,padding:zr.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,P.jsxs)("span",{className:pr,children:[r," ",i]})]})})},kl=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,P.jsx)(p.h,{menu:e.menu,onShow:r,children:(0,P.jsxs)("div",{className:nr,ref:t,children:[(0,P.jsx)(Ol,{...e,parentRef:t}),(0,P.jsx)(Ll,{date:e.addedAt}),(0,P.jsx)(Ll,{date:e.lastPlayedAt})]})})},Nl=e=>{const t=e.handleNavigate,r=(0,P.jsxs)("div",{className:cr,children:[(0,P.jsx)(pi,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Il.v,{children:"•"}),(0,P.jsx)(Il.v,{lineClamp:1,children:vi(e.type)})]}),(!e.shouldShowType&&e.type===F.c.ALBUM||(0,Nr.c0)(e.uri))&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Il.v,{children:"•"}),(0,P.jsx)(ii,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,P.jsx)(Pi.g,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,P.jsx)(Gr,{iconSize:"xsmall"}):(0,P.jsxs)(P.Fragment,{children:[e.downloadButton&&(0,P.jsx)("div",{className:Qt,children:e.downloadButton}),e.preReleaseIcon&&(0,P.jsx)("div",{className:Qt,children:e.preReleaseIcon}),e.lockedIcon&&(0,P.jsx)("div",{className:Qt,children:e.lockedIcon})]})),l=e.logRightClick;return(0,P.jsx)(p.h,{menu:e.menu,onShow:l,children:(0,P.jsx)(Kr.E,{uri:e.uri,trigger:Kr.l.OnMouseDown,children:(0,P.jsx)(jl.v,{className:n()(Zt,Gt),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${zr.vw} ${zr.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},Fl=e=>{const t=e.logRightClick;return(0,P.jsx)(p.h,{menu:e.menu,onShow:t,children:(0,P.jsxs)("div",{className:nr,children:[(0,P.jsx)(Nl,{...e}),(0,P.jsx)(Ll,{date:e.addedAt}),(0,P.jsx)(Ll,{date:e.lastPlayedAt})]})})},Ml=({height:e,isCompact:t,primaryFilter:r})=>(0,P.jsx)(Yi.c,{className:n()({[tr]:!t,[ir]:t,[rr]:r===F.c.ARTIST}),style:{height:e}}),Bl=(0,i.memo)((function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n}){const l={shouldShowType:!(0,Nr.c0)(e.uri)&&wi(e.type)!==t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n},o=(0,d.NC)(j.lDH),s=(0,d.NC)(j.H8e);switch(e.type){case F.c.FOLDER:return(0,P.jsx)(La,{libraryItem:e,...l});case F.c.ALBUM:return(0,P.jsx)(qi,{libraryItem:e,...l});case F.c.ARTIST:return(0,P.jsx)(ta,{libraryItem:e,...l});case F.c.AUDIOBOOK:return(0,P.jsx)(oa,{libraryItem:e,...l});case F.c.SHOW:return(0,P.jsx)(Ln,{libraryItem:e,...l});case F.c.PLAYLIST:return(0,P.jsx)(fn,{libraryItem:e,...l});case F.c.LIKED_SONGS:return(0,P.jsx)(Ba,{libraryItem:e,...l});case F.c.YOUR_EPISODES:return(0,P.jsx)(Nn,{libraryItem:e,...l});case F.c.LOCAL_FILES:return(0,P.jsx)(Xa,{libraryItem:e,...l});case F.c.PRE_RELEASE_ALBUM:return o?(0,P.jsx)(An,{libraryItem:e,...l}):null;case F.c.PRE_RELEASE_BOOK:return s?(0,P.jsx)(An,{libraryItem:e,...l}):null;default:(0,it.d)(e)}})),Ul=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const l=(0,E.vW)(),{rowHeight:o,libraryRowMode:s}=Ye(),c=s===Xe.COMPACT,d=((e,t)=>{switch(e){case E.fX.COLLAPSED:return El;case E.fX.DEFAULT:return t?Nl:Ol;case E.fX.EXPANDED:return t?Fl:kl;default:(0,it.d)(e)}})(l,c),u=(0,i.useCallback)(((e,t)=>(0,P.jsx)(Ml,{height:e,isCompact:c,primaryFilter:r},t)),[c,r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>e?(0,P.jsx)(Bl,{item:e,spec:n,RowVariantComponent:d,primaryFilter:r,nrValidItems:a,index:t+i},e.uri):u(`${o}px`,`${t+i}`)))),[d,e,r,u,o,n,a]);return(0,P.jsx)(Dl.$,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":f.Ru.get("web-player.your-library-x.your-library"),children:(0,P.jsx)(Al.L,{renderRows:p,nrRows:a,rowHeight:o,scrollNodeRef:t,renderPlaceholder:u})})};var _l=r(95063);const Vl=(e,t=!0)=>{const[r,a]=(0,Ue.x)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,Ue.x)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[o,s]=(0,i.useState)(!1),{dropOriginIsYLX:c}=Me(),{draggingIsInProgress:d}=(0,i.useContext)(te.O_);(0,i.useEffect)((()=>{d&&c&&s(!0)}),[d,c]);const u=(0,i.useCallback)((()=>{a(!0),s(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||o)&&(t||o),onHide:u}};var Hl=r(41615),Wl=r(42784),zl=r(23689);const Xl="cZ3IJprhLYLVtLoxVtDe",Yl="C8nlESBb6d0huyAhMq2v",Kl="yclq4HDmRA_euiUYwB9O",Zl=function({title:e,bodyText:t,children:r,root:a,show:n,childrenWrapperClassName:l,onHide:o}){const[s,c]=(0,i.useState)(null),[u,p]=(0,i.useState)(null),g=(0,d.NC)(j.zJD),y=(0,i.useCallback)((()=>{o()}),[o]);(0,i.useEffect)((()=>{if(!n)return()=>{};const e=e=>{"Escape"===e.key&&y()};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}}),[y,u,n]);const m=s?.getBoundingClientRect();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("span",{ref:c,className:l,children:r}),m&&n&&g&&(0,Hl.createPortal)((0,P.jsx)("div",{className:Xl,style:{top:m?.top??0,left:m?.left??0,width:m?.width,height:m?.height},ref:p,children:(0,P.jsxs)(Wl.A,{popoverTitle:e,arrow:Wl.A.left,colorSet:"announcement",className:Yl,children:[(0,P.jsx)(we.E,{as:"p",dangerouslySetInnerHTML:{__html:t||""}}),(0,P.jsx)(xt.H,{size:"small",onClick:y,iconOnly:zl.M,"aria-label":f.Ru.get("close"),className:Kl})]})}),a||document.body)]})};var Gl=r(41764),Jl=r(29977),ql=r(60832),Ql=r(44104);const $l=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),a=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===Ql.O.UP){const r=a?.[a.length-1],n=e.previousElementSibling,l=i?.previousElementSibling?.previousElementSibling;if(t instanceof HTMLUListElement||!l){if(n&&n instanceof HTMLUListElement)return n;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:a?.[0]}}},eo="GvHaMehoYEIaLhHafB4F",to="main-yourLibraryX-librarySortWrapper",ro="ijaSPbJ8wd3RNiyukjlh",io="w0nWe_59HwsG7nQLoibF",ao="LbAtRPub21imosz1Xjht",no=[{itemsViewState:ze.X.LIST,compactModeState:Xe.COMPACT},{itemsViewState:ze.X.LIST,compactModeState:Xe.DEFAULT},{itemsViewState:ze.X.GRID,compactModeState:Xe.DEFAULT}],lo=(e,t,r)=>Math.round((e+t)*r)/r,oo=e=>e.itemsViewState===ze.X.GRID?f.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===Xe.COMPACT?f.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"):f.Ru.get("web-player.your-library-x.sort-and-view-picker.list"),so=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:a,sortOptions:n,spec:l,id:o})=>{const s=(0,v.s)(),c=(0,i.useCallback)((e=>e.itemsViewState===ze.X.GRID?(0,P.jsx)(cl.D,{size:"small"}):e.compactModeState===Xe.COMPACT?(0,P.jsx)(Gl.d,{size:"small"}):(0,P.jsx)(sl.N,{size:"small"})),[]),{gridScale:d,setGridScale:u}=Fr(),p=e=>{const t=lo(e,.5,100);u(t),s.logInteraction(l.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},y=(0,i.useCallback)((e=>{u(e),s.logInteraction(l.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[s,u,l]),m=e=>e?.parentElement?.querySelector("ul"),x=(0,i.useRef)(null);return(0,P.jsxs)("div",{id:o,className:ro,ref:x,children:[(0,P.jsxs)(g.W,{"aria-label":f.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:$l,getInitialFocusElement:m,children:[(0,P.jsx)(Jl.y,{children:f.Ru.get("web-player.your-library-x.sort_by")}),n.map((({key:t,value:i},a)=>(0,P.jsx)(S.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,a),divider:a===n.length-1?"after":void 0,autoClose:!1,children:i},t)))]}),(0,P.jsxs)(g.W,{"aria-label":f.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:$l,getInitialFocusElement:m,children:[(0,P.jsx)(Jl.y,{children:f.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),no.map((e=>{const r=oo(e),i=e.itemsViewState===t.itemsViewState&&e.compactModeState===t.compactModeState;return(0,P.jsx)(S.D,{role:"menuitemradio","aria-checked":i,onClick:()=>a(e),leadingIcon:c(e),autoClose:!1,children:r},r)})),ze.X.GRID===t.itemsViewState&&(0,P.jsx)("li",{role:"presentation",children:(0,P.jsx)("div",{role:"menuitem",className:ao,children:(0,P.jsx)(ql.z2,{labelText:f.Ru.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:lo(d,-.5,100),max:1,step:.1,onDragStart:p,onDragMove:p,onDragEnd:p,onStepBackward:()=>y(lo(d,-.1,10)),onStepForward:()=>y(lo(d,.1,10)),forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})},co=({sortOptions:e,selectedSort:t,onSortSelect:r,root:a,showReorderingOnboarding:n,scrollNodeRef:l,spec:o})=>{const{itemsView:s,setItemsView:c}=(0,ze.t)(),{libraryRowMode:d,setLibraryRowMode:u}=Ye(),p=(0,v.s)(),g=(0,i.useCallback)((()=>{p.logInteraction(o.hitUiReveal())}),[p,o]),y=(0,i.useMemo)((()=>s===ze.X.GRID?{itemsViewState:ze.X.GRID,compactModeState:Xe.DEFAULT}:d===Xe.COMPACT?{itemsViewState:ze.X.LIST,compactModeState:Xe.COMPACT}:{itemsViewState:ze.X.LIST,compactModeState:Xe.DEFAULT}),[s,d]),m=(0,i.useCallback)((e=>{let t=o.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===ze.X.GRID?c(ze.X.GRID):e.compactModeState===Xe.COMPACT?(t=o.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),c(ze.X.LIST),u(Xe.COMPACT)):(t=o.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),c(ze.X.LIST),u(Xe.DEFAULT)),p.logInteraction(t)}),[p,c,u,o]),x=(0,i.useRef)(null),b=(0,Se.y)(l,"0px 0px 0px 0px",.75,x),[h,S]=(0,Ue.x)("sort-view-picker-onboarding-seen",!1),{show:C,onHide:w}=Vl(h&&n,!b),T=(0,i.useCallback)((()=>{g(),S(!0)}),[g,S]);return(0,P.jsx)(Zl,{bodyText:f.Ru.get("web-player.your-library-x.sort-and-view-picker.view-onboarding"),root:a,show:!h&&!b,childrenWrapperClassName:to,onHide:()=>S(!0),children:(0,P.jsx)(Zl,{bodyText:f.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:a,show:C,childrenWrapperClassName:to,onHide:w,children:(0,P.jsx)(ll.b,{menu:(0,P.jsx)(so,{selectedSort:t,selectedView:{itemsViewState:y.itemsViewState??ze.X.LIST,compactModeState:y.compactModeState??Xe.DEFAULT},sortOptions:e,onSortSelect:r,onViewSelect:m,spec:o,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,P.jsx)(xt.H,{"aria-label":f.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",t.value,oo(y)),onClick:T,size:"small",iconTrailing:(R=y,R.itemsViewState===ze.X.GRID?cl.D:R.compactModeState===Xe.COMPACT?Gl.d:sl.N),ref:x,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,P.jsx)(we.E,{variant:"bodySmall",className:io,children:t.value})})})})});var R},uo=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,root:a,showReorderingOnboarding:n,spec:l,scrollNodeRef:o})=>{const s=(0,i.useMemo)((()=>l.sortMenuButtonFactory()),[l]),c=(0,i.useMemo)((()=>l.sortbyViewasMenuButtonFactory()),[l]),u=(0,v.s)(),p=(0,Ke.t)(),g=e.find((e=>e.id===t))??e?.at(0),y=(0,i.useRef)(null),m=(0,d.NC)(j.AEN),x=(0,i.useCallback)(((e,t)=>{r(e);const i=p.getSortOrderLabel(e);m?u.logInteraction(c.sortOptionFactory({identifier:i,position:t}).hitSort()):u.logInteraction(s.sortMenuFactory().sortOptionFactory({identifier:i,position:t}).hitSort())}),[p,u,r,c,s,m]),{show:b,onHide:h}=Vl(n);return m?(0,P.jsx)(co,{sortOptions:e.map((({id:e,name:t})=>({key:e,value:t}))),selectedSort:{key:g?.id??"",value:g?.name??""},onSortSelect:x,root:a,showReorderingOnboarding:n,scrollNodeRef:o,spec:c}):(0,P.jsx)("div",{className:eo,ref:y,children:(0,P.jsx)(Zl,{bodyText:f.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:a,show:b,childrenWrapperClassName:to,onHide:h,children:(0,P.jsx)(_l.g,{options:e.map((({id:e,name:t})=>({key:e,value:t}))),onClick:()=>{u.logInteraction(s.hitUiReveal())},onSelect:x,selected:{key:g?.id??"",value:g?.name??""},heading:f.Ru.get("web-player.your-library-x.sort_by"),ariaLabel:f.Ru.get("web-player.your-library-x.sort_by")})})})};var po=r(39950),go=r(24369);const yo=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r})=>{const a=(0,Ke.t)(),n=(0,v.s)(),l=function(e){switch(e){case F.c.PRE_RELEASE_ALBUM:case F.c.ALBUM:return f.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case F.c.ARTIST:return f.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case F.c.PLAYLIST:return f.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case F.c.SHOW:return f.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case F.c.PRE_RELEASE_BOOK:case F.c.AUDIOBOOK:return f.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return f.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return f.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,it.k)(e)}}(t),o=(0,i.useCallback)((()=>(n.logInteraction(r.searchButtonFactory().hitUiReveal()),!0)),[n,r]),s=(0,i.useCallback)((()=>(n.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0)),[n,r]);return(0,P.jsx)(po.S,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:a?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:o,onClear:s,useExpandCallback:e=>{(0,go.f)(L.gO.FOCUS_YLX_TEXT_FILTER,e)}})},mo="main-yourLibraryX-libraryContainer",xo="main-yourLibraryX-libraryFilter",bo="iwhVJuPipY1lrQIjaA1k",ho="main-yourLibraryX-libraryItemContainer",fo="main-yourLibraryX-libraryRootlist",So="sikBfynL1Y6I25nVpbAg",Co="KwShd3RdVrsX6dGLJNxT",vo="main-yourLibraryX-filters",wo="qOtD4rsRpIMhQLCjJ4K3",Po="RHRitk6QC3rvuG24RAdj",To="main-yourLibraryX-filterArea",Ro={items:[],totalLength:0},Ao=()=>null,Do=()=>{const{filter:e}=(0,i.useContext)(he.g),[t,r]=(0,i.useState)(null),{filtersPickedByUserRef:a,selectedFilterIds:o,resetFilterIds:g,resetAndToggleRootFilter:y,toggleFilterId:x}=function(e){const{openedFolderUri:t=_e,change:r,resetFolder:a}=(0,i.useContext)(Ve),n=(0,i.useRef)(t),[l,o]=(0,Ue.x)("ylx-active-filter-ids",{[t]:[]}),s=(0,i.useRef)(!0),d=(0,c.U0)(((r,i=!0)=>{const a=new Set(e);a.has(r)?a.delete(r):a.add(r),s.current=i,o({...l,[t]:Array.from(a)})}),[e,o,t]),u=(0,i.useCallback)((()=>o({...l,[t]:[]})),[t,l,o]),p=(0,i.useCallback)((e=>{t&&a(),o({...l,[_e]:e?[e]:[]})}),[t,a,l,o]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==_e&&"PUSH"===r&&o({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,o]),{filtersPickedByUserRef:s,selectedFilterIds:l[t],resetFilterIds:u,resetAndToggleRootFilter:p,toggleFilterId:d}}(t?.selectedFilters?.map((e=>e.id))??[]),b=o?.[0],{selectedSortOrderId:h,setSelectedSortOrderId:f}=function(e){const t=(0,Ke.t)().getContentsPrimaryFilterId(F.c.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(Ve),[a,n]=(0,Ue.x)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(b),S=(0,i.useRef)(null),C=(0,i.useRef)(null),w=(0,i.useRef)(null),{expandedFolders:T}=function(){const e=(0,i.useContext)(Be);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:R,resetFolder:D}=(0,i.useContext)(Ve),H=(0,fe.p)(),W=(0,U.P)(),z=(0,i.useContext)(N.Z),Y=(0,_.g)(),K=(()=>{const e=(0,d.NC)(j.d2Y),t="1"===(0,I.$)("is-cheetara");return e&&t})(),ie=Qe(),[ae,ne]=(0,i.useState)(!1),{isCollapsed:le,isExpanded:oe,setYlxSidebarState:se}=(0,E.$)();(e=>{const t=(0,i.useContext)(N.Z),{isCollapsed:r,setYlxSidebarState:a,lastUncollapsedYlxSidebarState:n}=(0,E.$)(),l=(0,k.W)(),o=(0,i.useCallback)((()=>{const e=r?n:E.fX.COLLAPSED;a(e)}),[r,n,a]),s=(0,i.useCallback)((()=>{e(null),r&&a(n)}),[r,n,e,a]),c=(0,i.useCallback)((i=>()=>{e(t.getContentsPrimaryFilterId(i)),r&&a(n)}),[r,n,t,e,a]),d=c(F.c.PLAYLIST),u=c(F.c.SHOW),p=c(F.c.ARTIST),g=c(F.c.ALBUM),y=c(F.c.AUDIOBOOK);(0,O.Nx)(l?L.gO.TOGGLE_NPV_SIDEBAR:L.gO.TOGGLE_YLX_SIDEBAR,o),(0,O.Nx)(L.gO.GO_TO_LIBRARY,s),(0,O.Nx)(L.gO.GO_TO_PLAYLISTS,d),(0,O.Nx)(L.gO.GO_TO_PODCASTS,u),(0,O.Nx)(L.gO.GO_TO_ARTISTS,p),(0,O.Nx)(L.gO.GO_TO_ALBUMS,g),(0,O.Nx)(L.gO.GO_TO_AUDIOBOOKS,y)})(y);const{isGridView:ce}=(0,ze.t)(),{libraryRowMode:de}=Ye(),ue=de===Xe.COMPACT,{spec:pe,UBIFragment:ge}=(0,J.r)(u.j,{data:{identifier:"yourlibraryx"}});let ye;ye=le?"collapsed":ce?oe?"expanded_grid":"default_grid":ue?oe?"expanded_compact":"default_compact":oe?"expanded_list":"default_list";const me=(0,i.useMemo)((()=>pe.sidebarFactory({uri:R??_e,identifier:ye})),[pe,R,ye]),xe=(0,G.t)(me),ve=(0,i.useMemo)((()=>me.headerFactory()),[me]),we=(0,i.useMemo)((()=>ve.filtersFactory()),[ve]),Pe=(0,i.useMemo)((()=>ve.searchBarFactory()),[ve]),Te=(0,i.useMemo)((()=>me.listFactory()),[me]),Re=(0,v.s)();!function(e=[],t=[],r){const a=(0,Fe.n)(),n=(0,i.useContext)(N.Z).getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const o=(0,i.useRef)(t);o.current=t;const s=(0,i.useRef)(r);s.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=o.current.includes(n),t=l.current.includes(n),r=o.current.length>1,i=!a&&!r&&!e&&t,c=a&&e&&d.current;(i||c)&&(i&&(d.current=!0),s.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,c.Ij)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&d.current||(d.current=!1),u.current=t)}),[n,t])}(t?.availableFilters?.map((e=>e.id)),t?.selectedFilters?.map((e=>e.id)),x);const{handleDropOnFolder:Ae,unpinConfirmationDialog:De}=$e(Te,R),{dropOriginIsYLX:je,entityIsInFolder:Ie}=Me(),{setDraggingIsInProgress:Le}=(0,i.useContext)(te.O_);(0,re.g)(S);const Oe=R?ke:Ee,Ne=Ie&&!t?.reorderAllowed?[q.fl.PLAYLISTS_V2,q.fl.FOLDERS]:[],{dropPosition:He,className:Ze,...Ge}=(0,$.A)({allowedMimeTypesByDropPosition:{[Q.Nz.ON]:je?Ne:Oe},onDrop:(0,i.useCallback)((async e=>{if(R)Ae(e);else{const{[q.fl.TRACKS]:t=[],[q.fl.LOCAL_TRACKS]:r=[],[q.fl.ALBUMS]:i,[q.fl.ARTISTS]:a,[q.fl.EPISODES]:n,[q.fl.SHOWS]:l,[q.fl.PLAYLISTS_V2]:o=[],[q.fl.FOLDERS]:s,[q.fl.AUDIOBOOKS]:c}=e,d=[...t,...r];d.length&&(z?.add({uris:d}),Re.logInteraction(Te.dragCreatePlaylist())),i?.length&&(z?.add({uris:i}),Re.logInteraction(Te.dragLike({itemToBeLiked:i.at(0)??""}))),a?.length&&(z?.add({uris:a}),Re.logInteraction(Te.dragLike({itemToBeLiked:a.at(0)??""}))),n?.length&&(z?.add({uris:n}),Re.logInteraction(Te.dragLike({itemToBeLiked:n.at(0)??""}))),l?.length&&(z?.add({uris:l}),Re.logInteraction(Te.dragLike({itemToBeLiked:l.at(0)??""}))),c?.length&&(z?.add({uris:c}),Re.logInteraction(Te.dragLike({itemToBeLiked:c.at(0)??""}))),o.length&&(ie(o,{before:"start"}),je?Re.logInteraction(Te.dragSort()):Re.logInteraction(Te.dragLike({itemToBeLiked:o.at(0)??""}))),s?.length&&(Y.moveFolder({uri:s[0]},{before:"start"}),Re.logInteraction(Te.dragSort()))}}),[R,Ae,z,Re,Te,ie,je,Y]),onLongDragOver:(0,i.useCallback)((()=>{le&&se(E.fX.DEFAULT)}),[le,se])}),Je=(0,d.NC)(j.H8e),qe=(0,d.NC)(j.lDH),et=Je||qe,tt=(0,i.useMemo)((()=>({filters:o,sortOrder:h,textFilter:e,includeLocalFiles:W,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:et,expandedFolders:le||ce?[]:T,filtersPickedByUser:a.current,folderUri:R})),[o,h,e,W,et,le,ce,T,a,R]),rt=(0,i.useCallback)((async(e,t)=>{try{const i=await z.getContents({offset:e,limit:t,...tt}),{offset:a,limit:n,items:o,...s}=i;return ne(!1),{fetchedId:tt.folderUri,onCacheSuccess:()=>{r((e=>(0,l.j)(s,e)?e:s))},...i}}catch(e){return e instanceof m.c_?(g(),Ro):e instanceof m.IU?(f(void 0),Ro):e instanceof m.db?(D(),Ro):((0,V.UD)(e),ne(!0),Ro)}}),[tt,z,g,D,f]),it=!1===t?.hasUnfilteredItems,nt=t?.hasTextFilter&&0===t.totalLength&&""!==e,{setFilter:lt}=(0,i.useContext)(he.g);(0,i.useEffect)((()=>{nt&&le&&lt("")}),[nt,le,lt]);const ot=0===t?.totalLength&&t.selectedFilters.length>0&&!t.passedFolderUri&&!t.hasTextFilter;(0,c.Ij)((()=>{const e=t?.selectedFilters.at(-1);ot&&e&&x(e.id,!1)}),[ot,t?.selectedFilters]);const st=(0,d.NC)(j.HbK,{loadingValue:!1})&&z?.getCapabilities().canFetchAllItems,{fetchedId:ct,getItems:dt,nrValidItems:ut,invalidateCache:pt}=(0,B.E)({nrItems:50,fetch:rt,limit:50,cacheAllOnInvalidation:st,cacheAllLimit:5e4}),yt=(0,s.YQ)(pt,200,{leading:!0,trailing:!0,maxWait:1e3});gt(t?.primaryFilter,yt);const mt=!R&&!ct||R===ct;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}}),[e,t])})(S,ct);const xt=(0,i.useCallback)((()=>{pt(),ne(!1)}),[pt]),bt=(0,Se.y)(S),ht=!!t?.openedFolderName,ft=(0,d.NC)(j._p8,{loadingValue:!1})&&st,St=function(e,t,r){const{isGridView:a}=(0,ze.t)(),{rowHeight:n}=Ye();return(0,i.useCallback)((async i=>{let l=n,o=1;if(a){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(o=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const s=r(0,5e4,{cachedOnly:!0}),c=s.find((e=>e?.name&&(0,We.u)(i,e.name))),d=c?s.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/o)*l,l),c?.uri??null}),[e,t,n,r,a])}(w,S,dt),Ct=ae?(0,P.jsx)(Yt,{onClick:xt}):null;let vt;(0,i.useEffect)((()=>{ae&&le&&se(E.fX.DEFAULT)}),[ae,le,se]),it&&!le&&(vt=ht?(0,P.jsx)(Rt,{className:Ze}):(0,P.jsx)(Mt,{className:Ze}));const Pt=nt?(0,P.jsx)(Ht,{query:e,className:Ze}):null,Tt=(0,d.NC)(j.AEN),At=!le&&!vt&&(0,P.jsxs)("div",{className:n()(xo,Ze,{[bo]:Tt}),children:[(0,P.jsx)(yo,{clearOnEscapeInElementRef:C,primaryFilter:t?.primaryFilter,spec:Pe},R),(0,P.jsx)(uo,{sortOrders:t?.availableSortOrders??[],activeSortOrderId:t?.selectedSortOrder?.id,setActiveSortOrderId:f,root:C.current,showReorderingOnboarding:t?.primaryFilter===F.c.PLAYLIST&&!t?.reorderAllowed,spec:ve,scrollNodeRef:S})]}),Dt=ae&&!t,jt=oe&&!ce&&!Ct&&!vt,It=(t?.selectedFilters??[]).length>0,Lt=K&&!It&&!R;return(0,P.jsx)(X,{containerRef:C,findMatchingTypeaheadUid:St,isEnabled:ft,children:(0,P.jsxs)(ge,{spec:pe,children:[(0,P.jsx)(be,{}),(0,P.jsx)(p.h,{menu:(0,P.jsx)(A,{folderUri:R}),children:(0,P.jsxs)("div",{className:n()(mo,{[hr]:He===Q.Nz.ON,[So]:le}),ref:e=>{C.current=e,xe(e)},...Ge,tabIndex:-1,onDragStart:()=>Le(!0),onDragEnd:()=>Le(!1),children:[De,(0,P.jsxs)("div",{className:n()({[Po]:bt}),children:[(0,P.jsx)(Rl,{parentDropTargetClassName:Ze,isLibraryCompletelyEmpty:it,folderUri:t?.passedFolderUri,folderName:t?.openedFolderName,spec:ve.titleRowFactory()}),!H&&(0,P.jsx)(ge,{spec:ve,children:(0,P.jsx)(wt,{})}),!le&&!Dt&&(0,P.jsxs)("div",{className:To,children:[Lt&&(0,P.jsx)(Ao,{availableFilters:t?.availableFilters}),(0,P.jsx)(Dr,{selectedFilters:t?.selectedFilters,availableFilters:t?.availableFilters,toggleFilterId:x,resetFilterIds:g,className:n()(vo,{[wo]:!mt}),scrollNodeRef:S,spec:we},ct),oe&&At]}),jt&&(0,P.jsx)(gr,{isScrolled:bt})]}),(0,P.jsx)(ee.a,{className:ho,onInstanceCreated:e=>{S.current=e.elements().viewport},children:(0,P.jsx)(M.L,{containerRef:C,children:(0,P.jsxs)("div",{className:n()(fo,{[wo]:!ae&&!mt,[So]:le,[Co]:jt}),children:[!oe&&At,!le&&t?.tagPlaylist&&(0,P.jsx)(Ce,{playlist:t.tagPlaylist}),Ct||vt||Pt,(0,P.jsx)("div",{ref:w,children:ce?(0,P.jsx)(Un,{getItems:dt,scrollNodeRef:S,primaryFilter:t?.primaryFilter,nrValidItems:ut,spec:Te}):(0,P.jsx)(Ul,{getItems:dt,scrollNodeRef:S,primaryFilter:t?.primaryFilter,nrValidItems:ut,spec:Te})})]})})}),at(),(0,P.jsx)(Z,{})]})})]})})},jo=()=>{const{isAnonymous:e}=(0,o.d4)((e=>e.session));return(0,P.jsx)(D.s,{onError:e=>{(0,V.Jy)(e,"YourLibraryX")},children:(0,P.jsx)(he.s,{uri:m.gv,children:(0,P.jsx)(Kt,{children:(0,P.jsxs)(He,{children:[(0,P.jsx)(Do,{}),(0,P.jsx)(Oe,{isAnonymous:e})]})})})})}},46113:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(38732);function a(){return(0,i.y)()[0]}},38732:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(79474),a=r(76922);function n(){const e=(0,i.useContext)(a._),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,i.useCallback)((t=>e.setIsEnabled(t)),[e])]}}}]);
//# sourceMappingURL=3654.js.map