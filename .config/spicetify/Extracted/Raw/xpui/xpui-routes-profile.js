"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9480],{72484:(e,r,t)=>{t.d(r,{M:()=>m});var i=t(98866),n=(t(45803),t(37302)),a=t(26173),o=t(22684),l=t(36711),s=t(60003);const u="profile-editImage-imageContainer",c="profile-editImage-editImageButtonContainer";var d=t(86070),m=function(e){var r=e.onClick,t=e.name,m=e.images,p=e.canEdit,f=e.placeholderType,v=e.shape,g=void 0===v?s.u.SQUARE:v,h=e.dragUri,b=void 0===h?"":h,x=(0,a.P)(m),y=(0,i.A)(x,2),j=y[0],k=y[1],w=(0,o.b)(j,k)===o.g.loaded,A=(0,n.P)({itemUris:[b],dragLabelText:t}),O=A.draggable,I=A.onDragStart;return(0,d.jsxs)("div",{className:u,"data-testid":"".concat(f,"-image"),draggable:O&&!!b,onDragStart:I,children:[(0,d.jsx)(s.b,{loading:"eager",name:t,images:m,placeholderType:f,shape:g}),p&&(0,d.jsx)("div",{className:c,children:(0,d.jsx)(l.a,{overlay:w,onClick:r,rounded:g===s.u.CIRCLE})})]})}},36711:(e,r,t)=>{t.d(r,{a:()=>x});var i=t(66569),n=t(97500),a=t.n(n),o=t(59787),l=t(30777),s=t(58184),u=t(17635),c=t(8539),d=t(46600);const m="main-editImage-buttonContainer",p="main-editImageButton-image",f="main-editImageButton-overlay",v="main-editImageButton-rounded",g="main-editImageButton-icon",h="main-editImageButton-copy";var b=t(86070),x=function(e){var r=e.overlay,t=void 0!==r&&r,n=e.rounded,x=void 0!==n&&n,y=e.onClick,j=(0,u.NC)(d.vvY),k=j?"Create your own cover art":c.Ru.get("choose_photo"),w=j?(0,b.jsx)(o.S,{size:"xlarge","aria-hidden":"true"}):(0,b.jsx)(l.G,{size:"xlarge","aria-hidden":"true"});return(0,b.jsx)("div",{className:m,children:(0,b.jsx)("button",{"data-testid":"edit-image-button",className:a()(p,(0,i.A)((0,i.A)({},v,x),f,t)),"aria-haspopup":"true",onClick:y,type:"button",children:(0,b.jsxs)("div",{className:a()(g,"icon"),children:[w,(0,b.jsx)(s.E,{variant:"bodyMedium",className:h,children:k})]})})})}},62465:(e,r,t)=>{t.d(r,{u:()=>b,i:()=>h});t(59208),t(9555),t(80710),t(80766),t(10866),t(43864),t(18535),t(41681),t(62980),t(75231),t(21977),t(26980),t(46825);var i=t(98866),n=t(29969),a=t(66569),o=t(25259),l=t(52618),s=t.n(l),u=(t(59433),t(82368),t(32599),t(58470),t(36389),t(30758)),c=t(32989);const d="main-imagePicker-fileInput";var m=t(86070),p=["onChange","onError","isOpen","minImageWidth","minImageHeight","maxFileSizeMB"];function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach((function(r){(0,a.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g={accept:"image/.jpg, image/.jpeg, image/.png"},h=function(e){return e.FILE_TOO_BIG="FILE_TOO_BIG",e.IMAGE_TOO_SMALL="IMAGE_TOO_SMALL",e}({}),b=function(e){var r=e.onChange,t=e.onError,a=e.isOpen,l=void 0!==a&&a,f=e.minImageWidth,b=void 0===f?0:f,x=e.minImageHeight,y=void 0===x?0:x,j=e.maxFileSizeMB,k=void 0===j?1/0:j,w=(0,o.A)(e,p),A=u.useRef(null),O=v(v({},g),w);(0,u.useEffect)((function(){A.current&&l&&A.current.click()}),[A,l]);var I=1048576*k;function R(){return(R=(0,n.A)(s().mark((function e(n){var a,o,l,u,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target,o=Array.from(a.files||[]),l=(0,i.A)(o,1),u=l[0],e.next=4,T(u);case 4:return c=e.sent,e.prev=5,e.next=8,P(c);case 8:r(c),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(5),"string"!=typeof e.t0||!Object.values(h).includes(e.t0)){e.next=17;break}t(e.t0),e.next=18;break;case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[5,11]])})))).apply(this,arguments)}function P(e){return _.apply(this,arguments)}function _(){return(_=(0,n.A)(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.imageWidth<b||r.imageHeight<y)){e.next=2;break}throw h.IMAGE_TOO_SMALL;case 2:if(!(r.imageFile.size>I)){e.next=4;break}throw h.FILE_TOO_BIG;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return E.apply(this,arguments)}function E(){return(E=(0,n.A)(s().mark((function e(r){var t,n,a,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.j)(r);case 2:return t=e.sent,e.next=5,(0,c.v)(t);case 5:return n=e.sent,a=(0,i.A)(n,2),o=a[0],l=a[1],e.abrupt("return",{imageFile:r,imageDataUrl:t,imageWidth:o,imageHeight:l});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,m.jsx)("input",v(v({},O),{},{type:"file","data-testid":"image-file-picker",ref:A,className:d,onChange:function(e){return R.apply(this,arguments)}}))}},37103:(e,r,t)=>{t.d(r,{z:()=>p});var i=t(66569),n=t(97500),a=t.n(n),o=t(58184),l=t(27770);const s="pIZVZOfjnJGth1BcoA1E",u="ZBBTIITnUdwh05dCI0tm",c="sz8Nwj2lvhOZxDwYWRQr",d="jjPsW7vuG9xH9qhEGL3I";var m=t(86070),p=function(e){var r=e.message,t=e.isErrorMessage,n=void 0!==t&&t;return r?(0,m.jsx)("div",{role:"alert",children:(0,m.jsx)("div",{className:a()(s,(0,i.A)({},u,n)),children:(0,m.jsxs)(o.E,{as:"p",variant:"marginal",className:c,children:[(0,m.jsx)(l.b,{size:"small",className:d,"aria-hidden":"true"}),r]})})}):null}},32989:(e,r,t)=>{t.d(r,{j:()=>i,v:()=>n});t(24847),t(20427),t(62980),t(22711),t(47246);function i(e){return new Promise((function(r,t){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){var e,t;r(null!==(e=null===(t=i.result)||void 0===t?void 0:t.toString())&&void 0!==e?e:"")},i.onerror=function(e){return t(e)}}))}function n(e){return new Promise((function(r,t){var i=new Image;i.onload=function(){var e=i.width,t=i.height;r([e,t])},i.src=e,i.onerror=function(e){return t(e)}}))}},11070:(e,r,t)=>{t.d(r,{p:()=>a});var i=t(98866),n=(t(60418),t(30758));function a(){var e=(0,n.useState)(!1),r=(0,i.A)(e,2),t=r[0],a=r[1];return[t,(0,n.useCallback)((function(){a(!0),setTimeout((function(){return a(!1)}),0)}),[a])]}},89921:(e,r,t)=>{t.r(r),t.d(r,{default:()=>wi});var i=t(30758),n=t(33165),a=t(23243),o=t(96839),l=t(5621),s=t(63259),u=t(82281),c=(t(83603),t(45803),t(76133),t(67264)),d=t(8539),m=t(24930),p=t(57528),f=t(98802),v=t(1610),g=t(59518),h=t(86070),b=function(e){var r=e.uri,t=(0,g.Z)(v.SR,[r]),i=t.data,n=t.loading,a=t.error,o=null==i?void 0:i.profiles;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:d.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{title:d.Ru.get("followers"),total:null==o?void 0:o.length,showAll:!0,fullPage:!0,rowGap:c.lT,children:null==o?void 0:o.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))})},x=function(e){var r=e.uri,t=(0,g.Z)(v.mH,[r]),i=t.data,n=t.loading,a=t.error,o=null==i?void 0:i.profiles;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:d.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{title:d.Ru.get("following"),total:null==o?void 0:o.length,showAll:!0,fullPage:!0,rowGap:c.lT,children:null==o?void 0:o.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))})},y=t(98866),j=(t(10565),t(62980),t(75231),t(2795),t(9373)),k=t(41978),w=t(42551),A=t(17635),O=t(89998),I=t(70494),R=t(54168),P=t(87349),_=t(20610),T=t(82342),E=t(72484),N=t(64741),C=t(79851),S=t(29969),U=t(52618),D=t.n(U),M=(t(42363),t(97500)),L=t.n(M),F=t(58184),B=t(90441),H=t(39029),W=t(95477),G=t(66569),z=t(30777),Q=t(26173),Z=t(22684),q=t(60003);const K="profile-userEditDetails-image",V="valcBm4lLe9qFBcg0sFY",$="tAIzXn8C9KriGwGuBfWg",Y="PsrXxenHUFXYM1ub1xWw",X="U_VWfeeLWnDPhUTxCmrQ";var J=function(e){var r=e.onClickEdit,t=e.onClickRemove,i=e.name,n=e.images,a=e.canEdit,o=(0,Q.P)(n),l=(0,y.A)(o,2),s=l[0],u=l[1],c=(0,Z.b)(s,u)===Z.g.loaded;return(0,h.jsxs)("div",{className:K,children:[(0,h.jsx)(q.b,{loading:"eager",name:i,images:n,placeholderType:"user",shape:q.u.CIRCLE}),a&&(0,h.jsxs)("div",{className:L()(V,(0,G.A)({},Y,c)),children:[(0,h.jsx)("button",{className:$,"aria-haspopup":"true",onClick:r,type:"button",children:(0,h.jsx)(F.E,{variant:"bodyMedium",children:d.Ru.get("user.edit-details.choose-photo")})}),(0,h.jsx)("div",{className:L()(X,"icon"),children:(0,h.jsx)(z.G,{size:"xlarge","aria-hidden":!0})}),(0,h.jsx)("button",{className:$,onClick:t,type:"button",children:(0,h.jsx)(F.E,{variant:"bodyMedium",children:d.Ru.get("user.edit-details.remove-photo")})})]})]})},ee=(t(40313),t(24847),t(60989),t(50778)),re=t(75610),te=(t(59208),t(2944),t(42078),t(9555),t(80710),t(59433),t(52165),t(45191),t(20767),t(11998),t(16448),t(57836),t(39109),t(34381),t(82860),t(20427),t(26527),t(80766),t(10866),t(43864),t(18535),t(41681),t(11034),t(65083),t(47246),t(36389),t(71956),t(37331),t(10571),t(58343),t(74387),t(23888),t(90713),t(82508),t(64414),t(18547),t(17461),t(28479),t(61956),t(28456),t(53646),t(82289),t(17798),t(78592),t(78711),t(63138),t(23860),t(71110),t(96678),t(71942),t(90333),t(8030),t(9878),t(46801),t(31061),t(66462),t(21977),t(26980),t(46825),t(77020),t(99354));function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function ne(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ie(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ae(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return oe(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oe(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}function oe(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=Array(r);t<r;t++)i[t]=e[t];return i}var le={paths:""},se=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create(),i=ae(e.paths);try{for(i.s();!(r=i.n()).done;){var n=r.value;t.uint32(10).string(n)}}catch(e){i.e(e)}finally{i.f()}return t},ue=function(e,r){var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ne({},le);for(n.paths=[];t.pos<i;){var a=t.uint32();if(a>>>3==1)n.paths.push(t.string());else t.skipType(7&a)}return n},ce=function(e){var r=ne({},le);if(r.paths=[],void 0!==e.paths&&null!==e.paths){var t,i=ae(e.paths);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.paths.push(String(n))}}catch(e){i.e(e)}finally{i.f()}}return r},de=function(e){var r=ne({},le);if(r.paths=[],void 0!==e.paths&&null!==e.paths){var t,i=ae(e.paths);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.paths.push(n)}}catch(e){i.e(e)}finally{i.f()}}return r},me=function(e){var r={};return e.paths?r.paths=e.paths.map((function(e){return e})):r.paths=[],r},pe=(t(23833),t(63516),t(20448),t(78750),t(27480),t(28360),t(4264),t(21364)),fe=t(84686).hp;function ve(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function ge(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ve(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var he={value:0},be={value:!1},xe={value:""};var ye=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(8).int32(e.value),r},je=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ge({},he);t.pos<i;){var a=t.uint32();if(a>>>3==1)n.value=t.int32();else t.skipType(7&a)}return n},ke=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(8).bool(e.value),r},we=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ge({},be);t.pos<i;){var a=t.uint32();if(a>>>3==1)n.value=t.bool();else t.skipType(7&a)}return n},Ae=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(10).string(e.value),r},Oe=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=ge({},xe);t.pos<i;){var a=t.uint32();if(a>>>3==1)n.value=t.string();else t.skipType(7&a)}return n};te.util.Long!==pe.A&&(te.util.Long=pe.A,(0,te.configure)());var Ie=globalThis;Ie.atob,Ie.btoa;function Re(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return Pe(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pe(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}function Pe(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=Array(r);t<r;t++)i[t]=e[t];return i}function _e(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function Te(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_e(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ee={maxWidth:0,maxHeight:0,url:""},Ne={},Ce={},Se=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return r.uint32(8).int32(e.maxWidth),r.uint32(16).int32(e.maxHeight),r.uint32(26).string(e.url),r},Ue=function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=Te({},Ee);t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:n.maxWidth=t.int32();break;case 2:n.maxHeight=t.int32();break;case 3:n.url=t.string();break;default:t.skipType(7&a)}}return n},De=function(e){var r=Te({},Ee);return void 0!==e.maxWidth&&null!==e.maxWidth?r.maxWidth=Number(e.maxWidth):r.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?r.maxHeight=Number(e.maxHeight):r.maxHeight=0,void 0!==e.url&&null!==e.url?r.url=String(e.url):r.url="",r},Me=function(e){var r=Te({},Ee);return void 0!==e.maxWidth&&null!==e.maxWidth?r.maxWidth=e.maxWidth:r.maxWidth=0,void 0!==e.maxHeight&&null!==e.maxHeight?r.maxHeight=e.maxHeight:r.maxHeight=0,void 0!==e.url&&null!==e.url?r.url=e.url:r.url="",r},Le=function(e){var r={};return void 0!==e.maxWidth&&(r.maxWidth=e.maxWidth),void 0!==e.maxHeight&&(r.maxHeight=e.maxHeight),void 0!==e.url&&(r.url=e.url),r},Fe=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();void 0!==e.username&&void 0!==e.username&&Ae({value:e.username},r.uint32(10).fork()).ldelim(),void 0!==e.name&&void 0!==e.name&&Ae({value:e.name},r.uint32(18).fork()).ldelim();var t,i=Re(e.images);try{for(i.s();!(t=i.n()).done;){var n=t.value;Se(n,r.uint32(26).fork()).ldelim()}}catch(e){i.e(e)}finally{i.f()}return void 0!==e.verified&&void 0!==e.verified&&ke({value:e.verified},r.uint32(34).fork()).ldelim(),void 0!==e.editProfileDisabled&&void 0!==e.editProfileDisabled&&ke({value:e.editProfileDisabled},r.uint32(42).fork()).ldelim(),void 0!==e.reportAbuseDisabled&&void 0!==e.reportAbuseDisabled&&ke({value:e.reportAbuseDisabled},r.uint32(50).fork()).ldelim(),void 0!==e.abuseReportedName&&void 0!==e.abuseReportedName&&ke({value:e.abuseReportedName},r.uint32(58).fork()).ldelim(),void 0!==e.abuseReportedImage&&void 0!==e.abuseReportedImage&&ke({value:e.abuseReportedImage},r.uint32(66).fork()).ldelim(),void 0!==e.hasSpotifyName&&void 0!==e.hasSpotifyName&&ke({value:e.hasSpotifyName},r.uint32(74).fork()).ldelim(),void 0!==e.hasSpotifyImage&&void 0!==e.hasSpotifyImage&&ke({value:e.hasSpotifyImage},r.uint32(82).fork()).ldelim(),void 0!==e.color&&void 0!==e.color&&ye({value:e.color},r.uint32(90).fork()).ldelim(),r},Be=function(e,r){var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=Te({},Ne);for(n.images=[];t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:n.username=Oe(t,t.uint32()).value;break;case 2:n.name=Oe(t,t.uint32()).value;break;case 3:n.images.push(Ue(t,t.uint32()));break;case 4:n.verified=we(t,t.uint32()).value;break;case 5:n.editProfileDisabled=we(t,t.uint32()).value;break;case 6:n.reportAbuseDisabled=we(t,t.uint32()).value;break;case 7:n.abuseReportedName=we(t,t.uint32()).value;break;case 8:n.abuseReportedImage=we(t,t.uint32()).value;break;case 9:n.hasSpotifyName=we(t,t.uint32()).value;break;case 10:n.hasSpotifyImage=we(t,t.uint32()).value;break;case 11:n.color=je(t,t.uint32()).value;break;default:t.skipType(7&a)}}return n},He=function(e){var r=Te({},Ne);if(r.images=[],void 0!==e.username&&null!==e.username?r.username=String(e.username):r.username=void 0,void 0!==e.name&&null!==e.name?r.name=String(e.name):r.name=void 0,void 0!==e.images&&null!==e.images){var t,i=Re(e.images);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.images.push(De(n))}}catch(e){i.e(e)}finally{i.f()}}return void 0!==e.verified&&null!==e.verified?r.verified=Boolean(e.verified):r.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?r.editProfileDisabled=Boolean(e.editProfileDisabled):r.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?r.reportAbuseDisabled=Boolean(e.reportAbuseDisabled):r.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?r.abuseReportedName=Boolean(e.abuseReportedName):r.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?r.abuseReportedImage=Boolean(e.abuseReportedImage):r.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?r.hasSpotifyName=Boolean(e.hasSpotifyName):r.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?r.hasSpotifyImage=Boolean(e.hasSpotifyImage):r.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?r.color=Number(e.color):r.color=void 0,r},We=function(e){var r=Te({},Ne);if(r.images=[],void 0!==e.username&&null!==e.username?r.username=e.username:r.username=void 0,void 0!==e.name&&null!==e.name?r.name=e.name:r.name=void 0,void 0!==e.images&&null!==e.images){var t,i=Re(e.images);try{for(i.s();!(t=i.n()).done;){var n=t.value;r.images.push(Me(n))}}catch(e){i.e(e)}finally{i.f()}}return void 0!==e.verified&&null!==e.verified?r.verified=e.verified:r.verified=void 0,void 0!==e.editProfileDisabled&&null!==e.editProfileDisabled?r.editProfileDisabled=e.editProfileDisabled:r.editProfileDisabled=void 0,void 0!==e.reportAbuseDisabled&&null!==e.reportAbuseDisabled?r.reportAbuseDisabled=e.reportAbuseDisabled:r.reportAbuseDisabled=void 0,void 0!==e.abuseReportedName&&null!==e.abuseReportedName?r.abuseReportedName=e.abuseReportedName:r.abuseReportedName=void 0,void 0!==e.abuseReportedImage&&null!==e.abuseReportedImage?r.abuseReportedImage=e.abuseReportedImage:r.abuseReportedImage=void 0,void 0!==e.hasSpotifyName&&null!==e.hasSpotifyName?r.hasSpotifyName=e.hasSpotifyName:r.hasSpotifyName=void 0,void 0!==e.hasSpotifyImage&&null!==e.hasSpotifyImage?r.hasSpotifyImage=e.hasSpotifyImage:r.hasSpotifyImage=void 0,void 0!==e.color&&null!==e.color?r.color=e.color:r.color=void 0,r},Ge=function(e){var r={};return void 0!==e.username&&(r.username=e.username),void 0!==e.name&&(r.name=e.name),e.images?r.images=e.images.map((function(e){return e?Le(e):void 0})):r.images=[],void 0!==e.verified&&(r.verified=e.verified),void 0!==e.editProfileDisabled&&(r.editProfileDisabled=e.editProfileDisabled),void 0!==e.reportAbuseDisabled&&(r.reportAbuseDisabled=e.reportAbuseDisabled),void 0!==e.abuseReportedName&&(r.abuseReportedName=e.abuseReportedName),void 0!==e.abuseReportedImage&&(r.abuseReportedImage=e.abuseReportedImage),void 0!==e.hasSpotifyName&&(r.hasSpotifyName=e.hasSpotifyName),void 0!==e.hasSpotifyImage&&(r.hasSpotifyImage=e.hasSpotifyImage),void 0!==e.color&&(r.color=e.color),r},ze={encode:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.Writer.create();return void 0!==e.mask&&void 0!==e.mask&&se(e.mask,r.uint32(10).fork()).ldelim(),void 0!==e.userProfile&&void 0!==e.userProfile&&Fe(e.userProfile,r.uint32(18).fork()).ldelim(),r},decode:function(e,r){for(var t=e instanceof Uint8Array?new te.Reader(e):e,i=void 0===r?t.len:t.pos+r,n=Te({},Ce);t.pos<i;){var a=t.uint32();switch(a>>>3){case 1:n.mask=ue(t,t.uint32());break;case 2:n.userProfile=Be(t,t.uint32());break;default:t.skipType(7&a)}}return n},fromJSON:function(e){var r=Te({},Ce);return void 0!==e.mask&&null!==e.mask?r.mask=ce(e.mask):r.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?r.userProfile=He(e.userProfile):r.userProfile=void 0,r},fromPartial:function(e){var r=Te({},Ce);return void 0!==e.mask&&null!==e.mask?r.mask=de(e.mask):r.mask=void 0,void 0!==e.userProfile&&null!==e.userProfile?r.userProfile=We(e.userProfile):r.userProfile=void 0,r},toJSON:function(e){var r={};return void 0!==e.mask&&(r.mask=e.mask?me(e.mask):void 0),void 0!==e.userProfile&&(r.userProfile=e.userProfile?Ge(e.userProfile):void 0),r}},Qe="".concat(ee.I_,"/identity");function Ze(e,r,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,S.A)(D().mark((function e(r,t,i){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.build().withHost(Qe).withMethod("POST").withPath("/v3/profile-image/".concat(encodeURIComponent((0,re.v)(t)),"/").concat(i)).withEndpointIdentifier("/v3/profile-image/{username}/{uploadToken}").withoutMarket().send();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,r){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,S.A)(D().mark((function e(r,t){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.build().withHost(Qe).withMethod("DELETE").withPath("/v3/profile-image/".concat(encodeURIComponent((0,re.v)(t)))).withEndpointIdentifier("/v3/profile-image/{username}").withoutMarket().send();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,r,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,S.A)(D().mark((function e(r,t,i){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ze.encode(ze.fromPartial({mask:{paths:["name"]},userProfile:null!==i?{name:i}:{}})),e.next=3,r.build().withHost(Qe).withMethod("POST").withPath("/v3/user/username/".concat(encodeURIComponent((0,re.v)(t)))).withEndpointIdentifier("/v3/user/username/{username}").withBody(n.finish()).withoutMarket().send();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,r,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,S.A)(D().mark((function e(r,t,i){var n,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.name,a=i.imageUploadToken,void 0===n){e.next=4;break}return e.next=4,$e(r,t,n);case 4:if(void 0===a){e.next=12;break}if(null===a){e.next=10;break}return e.next=8,Ze(r,t,a);case 8:e.next=12;break;case 10:return e.next=12,Ke(r,t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var er=t(30040),rr="https://image-upload.spotify.com/v4";function tr(e,r){return ir.apply(this,arguments)}function ir(){return(ir=(0,S.A)(D().mark((function e(r,t){var i,n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,n=t.imageUploadToken,e.next=3,Xe(er.n.getInstance(),r,{name:i,imageUploadToken:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nr(e){return ar.apply(this,arguments)}function ar(){return(ar=(0,S.A)(D().mark((function e(r){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er.n.getInstance().build().withEndpointIdentifier("image-upload/v4/user-profile").withHost(rr).withMethod("POST").withPath("/user-profile").withBody(r).withoutGlobalHeaders().withHeaders([{key:"Content-Type",value:"image/jpeg"}]).withoutMarket().send();case 2:if((t=e.sent).body){e.next=5;break}throw new Error("No upload token recieved");case 5:return e.abrupt("return",t.body.uploadToken);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var or={type:"error",get message(){return d.Ru.get("user.edit-details.error.file-size-exceeded",10)}},lr={type:"error",get message(){return d.Ru.get("user.edit-details.error.too-small",300,300)}},sr={type:"error",get message(){return d.Ru.get("user.edit-details.error.missing-name")}},ur={type:"error",get message(){return d.Ru.get("user.edit-details.error.failed-to-save")}},cr={type:"error",get message(){return d.Ru.get("user.edit-details.error.file-upload-failed")}};function dr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function mr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?dr(Object(t),!0).forEach((function(r){(0,G.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function pr(e){return{type:"setLoading",loading:e}}function fr(e){return{type:"setMessage",message:e}}function vr(e,r){switch(r.type){case"setName":return mr(mr({},e),{},{name:r.name});case"setMessage":return mr(mr({},e),{},{message:r.message,loading:!1});case"setLoading":return mr(mr({},e),{},{loading:r.loading,message:null});case"setImageData":return mr(mr({},e),{},{imageData:r.data,removeImage:!1});case"setImageToken":return mr(mr({},e),{},{imageToken:r.token,removeImage:!1});case"removeImage":return mr(mr({},e),{},{imageToken:void 0,imageData:void 0,image:void 0,removeImage:!0});default:return e}}var gr=t(16743),hr=t(62465),br=t(11070),xr=t(37103);const yr="profile-userEditDetails-container",jr="profile-userEditDetails-content",kr="profile-userEditDetails-header",wr="profile-userEditDetails-closeButton",Ar="vAeyAmeLkDEDKdL9Hou0",Or="dnmzO6yYKkxUV8jl7O1Z",Ir="profile-userEditDetails-nameInput",Rr="profile-userEditDetails-name",Pr="profile-userEditDetails-label",_r="profile-userEditDetails-labelText",Tr="dMhJaxli87_22jb_3d9x",Er="profile-userEditDetails-saveButton",Nr="profile-userEditDetails-disclaimer";var Cr=i.memo((function(e){var r=e.uri,t=e.name,n=e.image,a=e.onClose,o=e.shouldOpenImagePicker,l=e.userCapabilities,s=(0,br.p)(),u=(0,y.A)(s,2),c=u[0],m=u[1],p=function(e){var r=e.name,t=e.image;return(0,i.useReducer)(vr,{loading:!1,message:null,name:r,image:t})}({name:t,image:n}),f=(0,y.A)(p,2),v=f[0],g=f[1],b=(0,i.useMemo)((function(){var e=v.imageData||v.image;return e?[{url:e,width:300,height:300}]:[]}),[v.image,v.imageData]);function x(){return(x=(0,S.A)(D().mark((function e(r){var t,i,n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(t=r.imageFile,i=r.imageDataUrl,g(fr(null)),g({type:"setImageData",data:i}),!t){e.next=18;break}return e.prev=6,g(pr(!0)),e.next=10,nr(t);case 10:n=e.sent,g({type:"setImageToken",token:n}),g(pr(!1)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),g(fr(cr));case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}(0,i.useEffect)((function(){o&&m()}),[m,o]);var j=(0,i.useCallback)((function(e){e===hr.i.FILE_TOO_BIG?g(fr(or)):e===hr.i.IMAGE_TOO_SMALL&&g(fr(lr))}),[g]),k=(0,i.useCallback)((function(){g({type:"removeImage"})}),[g]),w=(0,i.useCallback)(function(){var e=(0,S.A)(D().mark((function e(t){var i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==v.name.trim().length){e.next=5;break}return g(fr(sr)),e.abrupt("return");case 5:return g(pr(!0)),e.prev=6,i=v.removeImage?null:v.imageToken,e.next=10,tr(r,{name:v.name,imageUploadToken:i});case 10:a({name:v.name,image:v.imageData||v.image}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),g(fr(ur));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(r){return e.apply(this,arguments)}}(),[g,a,v.image,v.imageData,v.imageToken,v.name,v.removeImage,r]);return(0,h.jsx)(gr.A,{isOpen:!0,contentLabel:d.Ru.get("user.edit-details.title"),onRequestClose:function(){return a()},children:(0,h.jsxs)("div",{className:yr,children:[(0,h.jsxs)("div",{className:kr,children:[(0,h.jsx)(F.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("user.edit-details.title")}),(0,h.jsx)("button",{className:wr,onClick:function(){return a()},"aria-label":d.Ru.get("close"),children:(0,h.jsx)(B.M,{size:"small"})})]}),v.message&&(0,h.jsx)(xr.z,{isErrorMessage:"error"===v.message.type,message:v.message.message}),(0,h.jsxs)("form",{className:jr,onSubmit:w,children:[l.edit_image&&(0,h.jsx)(hr.u,{isOpen:c,minImageWidth:300,minImageHeight:300,maxFileSizeMB:10,onChange:function(e){return x.apply(this,arguments)},onError:j}),(0,h.jsxs)("div",{className:Ar,children:[(0,h.jsx)(J,{name:t,images:b,onClickEdit:m,onClickRemove:k,canEdit:l.edit_image}),v.loading&&(0,h.jsx)("div",{className:Or,children:(0,h.jsx)(H.I,{})})]}),(0,h.jsxs)("div",{className:Rr,children:[(0,h.jsx)("label",{htmlFor:"user-edit-name",className:Pr,children:(0,h.jsx)(F.E,{variant:"marginalBold",className:_r,children:d.Ru.get("user.edit-details.name-label")})}),(0,h.jsx)("input",{"data-testid":"user-edit-name-input",id:"user-edit-name",type:"text",dir:"auto",className:L()(Ir,Tr),onChange:function(e){g(function(e){return{type:"setName",name:e}}(e.target.value))},placeholder:d.Ru.get("user.edit-details.name-placeholder"),maxLength:32,value:v.name,disabled:!l.edit_name})]}),(0,h.jsx)("div",{className:Er,children:(0,h.jsx)(W.$,{colorSet:"invertedLight",onClick:w,disabled:v.loading,children:d.Ru.get("save")})}),(0,h.jsx)(F.E,{as:"p",variant:"marginalBold",className:Nr,children:d.Ru.get("image-upload.legal-disclaimer")})]})]})})})),Sr=t(40212),Ur=t(68688),Dr=t(1567),Mr=t(3169),Lr=t(92633),Fr=t(10644),Br=t(58400),Hr=t(59943),Wr=t(84459),Gr=t(18520),zr=t(48781),Qr=t(66932),Zr=t(7138),qr=t(50629),Kr=t(74460),Vr=t(63698),$r=t(42931),Yr=t(79055),Xr=t(72185),Jr=t(46600),et=t(64526),rt=t(67281),tt=t(42344),it=new rt.l("userTopContent","query","feb6d55177e2cbce2ac59214f9493f1ef2e4368eec01b3d4c3468fa1b97336e2",null);function nt(e){return"Artist"===e.__typename}function at(e){var r;if("ArtistPageV2"!==(null==e||null===(r=e.topArtists)||void 0===r?void 0:r.__typename))return null;var t=e.topArtists.items.map((function(e){return e.data})).filter(nt);return 0===t.length?null:{totalCount:e.topArtists.totalCount,items:t}}function ot(e){return"Track"===e.__typename}function lt(e){var r;if("TrackPageV2"!==(null==e||null===(r=e.topTracks)||void 0===r?void 0:r.__typename))return null;var t=e.topTracks.items.map((function(e){return e.data})).filter(ot).filter((function(e){return null!==e.albumOfTrack}));return 0===t.length?null:{totalCount:e.topTracks.totalCount,items:t}}var st=et.xE.Affinity,ut=et.Nm.ShortTerm;function ct(e){var r,t,i,n,a,o,l=e.includeTopArtists,s=e.includeTopTracks,u=e.topArtistsLimit,c=e.topTracksLimit,d=(a={includeTopArtists:l,topArtistsInput:{offset:0,limit:u,sortBy:st,timeRange:ut},includeTopTracks:s,topTracksInput:{offset:0,limit:c,sortBy:st,timeRange:ut}},o={enabled:l||s,gcTime:18e5,staleTime:3e5},(0,tt.I)(it,a,o)),m=d.data,p=d.loading;return null!==d.error?{topTracks:null,topArtists:null,loading:p,error:new Error("Failed loading user top content!")}:{topTracks:lt(null!==(r=null==m||null===(t=m.me)||void 0===t?void 0:t.profile)&&void 0!==r?r:null),topArtists:at(null!==(i=null==m||null===(n=m.me)||void 0===n?void 0:n.profile)&&void 0!==i?i:null),loading:p,error:null}}var dt=t(45782),mt=t(93239),pt=t(24380),ft=t(22523),vt=t(68262),gt=t(90577),ht=t(92824),bt=t(10139),xt=t(93655),yt=t(44671),jt=i.memo((function(e){var r=e.openModal,t=e.spec,n=e.logger,a=e.name,o=e.backgroundColor,l=e.isCurrentUser,s=e.uri,u=(0,ht.Y)(s),c=(0,y.A)(u,2),m=c[0],p=c[1],f=(0,vt.W)(),v=!(0,gt.n)(),g=(0,i.useCallback)((function(){f({targetUri:s,intent:m?"unfollow":"follow",type:"click"});var e=t.actionBarFactory().followButtonFactory();m?(p(!1),n.logInteraction(e.hitUnfollow({itemToBeUnfollowed:s}))):(p(!0),n.logInteraction(e.hitFollow({itemToBeFollowed:s})))}),[m,n,f,p,t,s]),b=(0,i.useCallback)((function(){var e=t.actionBarFactory().contextMenuButtonFactory().hitUiReveal();n.logInteraction(e)}),[n,t]),x=(0,yt.j)();return(0,h.jsx)(bt.E,{backgroundColor:o,children:(0,h.jsxs)(xt.S,{children:[!l&&(0,h.jsx)(pt.e,{children:(0,h.jsx)(ft.W,{isFollowing:Boolean(m),onClick:g,disabled:v})}),(0,h.jsx)(mt.b,{menu:(0,h.jsx)(_.B,{uri:s,onEditProfileCallback:r}),children:(0,h.jsx)(dt.e,{label:d.Ru.get("more.label.context",a),onClick:b,size:x})})]})})})),kt=t(45100),wt=t(79464),At=t(94541),Ot=t(79655),It=t(27679),Rt=t(93697),Pt=t(60093),_t=t(22058),Tt=t(89220),Et=t(15554),Nt=t(52756),Ct=t(86116),St=t(22443),Ut=t(54229),Dt=t(96915),Mt=t(59417),Lt=t(87393),Ft=t(6748),Bt=t(4866),Ht=t(64436),Wt=t(14936),Gt=t(1479),zt=t(72786),Qt=t(38680),Zt=t(13148),qt=t(59960),Kt=t(81472),Vt=t(9172),$t=t(39240),Yt=t(70252),Xt=t(93412),Jt=t(29794),ei=t(54847),ri=t(76967),ti=i.memo((function(e){var r,t=e.uri,i=e.name,n=e.duration_ms,a=e.artists,o=e.album,l=e.contextUri,s=e.isExplicit,u=e.isMOGEFRestricted,c=e.isPlayable,m=e.index,p=e.imgUrl,f=e.usePlayContextItem,v=(0,Br.r)(Tt.i,{data:{position:m,reason:"",uri:t}}).spec,g=f({uri:t,index:m}),b=g.isActive,x=g.isPlaying,y=g.triggerPlay,j=g.togglePlay,k=(0,St.T)(t),w=(0,Mt.g)(t,c),A=(0,Ut.b)({downloadAvailability:k,isExplicit:s,isMOGEFRestricted:u}),O=A.badges,I=A.hasBadges,R=(null==a?void 0:a.map((function(e){return e.name})).join(d.Ru.getSeparator()))||"";return(0,h.jsx)(Rt.pZ,{value:"row",index:m,children:(0,h.jsx)(P.h,{menu:(0,h.jsx)(Lt.P,{uri:t,albumUri:o.uri,artists:a,contextUri:l}),children:(0,h.jsxs)(ei.w,{uri:t,contextUri:l,onTriggerPlay:function(e,r){y({loggingParams:r})},isActive:b,index:m,ariaRowIndex:m+1,isPlayable:w,ageRestricted:u,dragMetadata:{name:i,createdBy:R},spec:v,children:[(0,h.jsx)(Vt.y,{ariaColIndex:0,children:(0,h.jsx)(Qt.$,{uri:t,playAriaLabel:d.Ru.get("tracklist.a11y.play",i,R),isPlaying:x,isActive:b,onClick:function(e,r){j({loggingParams:r})},spec:v,children:(0,h.jsx)(qt.a,{children:m+1})})}),(0,h.jsxs)($t.U,{ariaColIndex:1,children:[(0,h.jsx)(Gt.e,{src:p}),(0,h.jsxs)(zt.l,{children:[(0,h.jsx)(Jt.p,{titleText:i,children:i}),I&&(0,h.jsxs)(Ht.P,{children:[O.download&&(0,h.jsx)(Et._,{}),O.explicit&&(0,h.jsx)(Nt.g,{}),O.nineteen&&(0,h.jsx)(Ct.q,{className:ri.A.nineteen,size:16})]}),(0,h.jsx)(Xt.p,{children:(0,h.jsx)(Bt.l,{artists:a,spec:v})})]})]}),(0,h.jsx)(Yt.o,{ariaColIndex:2,children:(0,h.jsx)(Ft.g,{uri:o.uri,name:o.name,creatorUri:null==a||null===(r=a[0])||void 0===r?void 0:r.uri,spec:v,children:o.name})}),(0,h.jsxs)(Kt.l,{ariaColIndex:3,children:[(0,h.jsx)(Dt.d,{uri:t,spec:v}),(0,h.jsx)(Wt.P,{duration:n}),(0,h.jsx)(Zt.Y,{menu:(0,h.jsx)(Lt.P,{uri:t,albumUri:o.uri,artists:a,contextUri:l}),label:d.Ru.get("more.label.track",i,R),spec:v})]})]})})})}),(function(e,r){return e.uri===r.uri})),ii=t(49294),ni=i.memo((function(e){var r=e.tracks,t=e.hasHeaderRow,n=void 0!==t&&t,a=e.nrTracksVisible,l=e.uri,s=(0,re.v)(l),u=(0,o.du)(s,"tracks").toURI(),c=(0,i.useMemo)((function(){return a?r.slice(0,a):r}),[a,r]),m=(0,Pt.P)({uri:u,pages:[{items:r.map((function(e){return{type:_t.c.TRACK,uri:e.uri,uid:null,provider:null}}))}]},{featureIdentifier:"profile",referrerIdentifier:"user_profile"}).usePlayContextItem,p=(0,i.useCallback)((function(e,r){var t,i,n,a=(0,Hr.g)(null==e||null===(t=e.albumOfTrack)||void 0===t||null===(t=t.coverArt)||void 0===t?void 0:t.sources,{desiredSize:40});return(0,h.jsx)(ti,{index:r,uri:(0,It.a)(e),duration_ms:e.duration.totalMilliseconds,name:e.name,artists:e.artists.items.map((function(e){return{uri:e.uri,name:e.profile.name}})),album:e.albumOfTrack,isPlayable:!0,isExplicit:(null===(i=e.contentRating)||void 0===i?void 0:i.label)===et.x7.Explicit,isMOGEFRestricted:(null===(n=e.contentRating)||void 0===n?void 0:n.label)===et.x7.NineteenPlus,imgUrl:(null==a?void 0:a.url)||"",contextUri:u,usePlayContextItem:m},r+e.uri)}),[u,m]),f=(0,i.useMemo)((function(){return[At.$.INDEX,At.$.TITLE_AND_ARTIST,At.$.ALBUM,At.$.DURATION]}),[]),v=(0,i.useCallback)((function(e){return{uri:e.uri}}),[]),g=(0,Ot.A)()?0:void 0;return(0,h.jsx)(Rt.pZ,{value:"user-top-tracks-tracklist",children:(0,h.jsx)(ii.S4,{ariaLabel:d.Ru.get("top_tracks_this_month"),renderRow:p,nrTracks:c.length,tracks:c,resolveItem:v,headerTop:g,hasHeaderRow:n,columns:f,columnPersistenceKey:"user-top-tracks-tracklist"})})}),(function(e,r){return e.tracks===r.tracks})),ai=i.memo((function(e){var r=e.tracks,t=e.title,n=e.tagline,a=e.seeAllUri,o=e.className,l=e.uri,s=e.spec,u=(0,wt.s)(),c=(0,i.useCallback)((function(){var e=s.titleLinkFactory().hitUiNavigate({destination:a});u.logInteraction(e)}),[u,a,s]),d=(0,i.useCallback)((function(){var e=s.titleLinkFactory().hitUiNavigate({destination:a});u.logInteraction(e)}),[u,a,s]);if(!r||0===r.totalCount||0===r.items.length)return null;var m=r.totalCount>4;return(0,h.jsxs)("section",{className:o,children:[(0,h.jsx)(kt.U,{title:t,tagline:n,seeAllUri:a,hasMoreElements:m,onClickTitle:c,onClickSeeAll:d}),(0,h.jsx)(Fr.r,{spec:s,children:(0,h.jsx)(ni,{tracks:r.items,uri:l,nrTracksVisible:4})})]})}),(function(e,r){return e.tracks===r.tracks}));function oi(e,r){switch(r.type){case"OPEN_MODAL":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!1};case"OPEN_MODAL_WITH_IMAGEPICKER":return{isModalOpen:!0,modalVariant:"editProfile",shouldOpenImagePicker:!0};case"CLOSE_MODAL":return{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1};default:return e}}const li="J6PX6RfvHlA4BPp7_8sJ",si="DJCugGBTcU3io4Q28BHl",ui="vpTiIBeCfuGKOTj3Tzg6",ci="eGAuBpyB1eqsyPKbaQU7",di="GoG_UTK1uLaPCfhipeF0";var mi=18e5,pi=3e5,fi=(0,w.Mz)(Ur.mB,(function(e){return(null==e?void 0:e.images)||[]})),vi=function(e){var r,t,n,a=e.uri,l=e.isCurrentUser,u=null===(r=(0,k.d4)(Ur.mB))||void 0===r?void 0:r.uri,c=(0,k.d4)(Ur.Mn),f=(0,k.d4)(fi),b=(0,k.wA)(),x=(0,j.jE)(),w=(0,A.NC)(Jr.DGB,{loadingValue:!0}),S=(0,i.useMemo)((function(){return(0,Hr.g)(f)}),[f]),U=(t=(0,i.useReducer)(oi,{isModalOpen:!1,modalVariant:null,shouldOpenImagePicker:!1}),[(n=(0,y.A)(t,2))[0],n[1]]),D=(0,y.A)(U,2),M=D[0],L=M.isModalOpen,F=M.modalVariant,B=M.shouldOpenImagePicker,H=D[1],W=(0,g.Z)(v.E$,[{uri:a,playlists:10,artists:10,episodes:10}],{gcTime:mi,staleTime:pi}),G=W.data,z=W.loading,Q=W.queryKey,Z=(0,s.V)();(0,Xr.N)(Yr.mc.OPERATION_COMPLETE,(function(){x.invalidateQueries({queryKey:Q})})),(0,Lr.l)(Mr.UV.OPERATION_COMPLETE,(function(){x.invalidateQueries({queryKey:Q})}));var K=null==G?void 0:G.public_playlists,V=null==G?void 0:G.is_verified,$=null==G?void 0:G.recently_played_artists,Y=l?(null==S?void 0:S.url)||"":(null==G?void 0:G.image_url)||"",X=(0,re.v)(a),J=(l?c:null==G?void 0:G.name)||"",ee=(0,Sr.H)((null==G?void 0:G.image_url)||null),te=(0,Br.r)(O._,{data:{uri:a}}),ie=te.spec,ne=te.logger,ae=(0,i.useMemo)((function(){return ie.sectionTopTracksFactory()}),[ie]),oe=!Z&&(!1!==(null==G?void 0:G.show_follows)||l),le=l&&w,se=(0,g.Z)(v.mH,[a],{enabled:oe,gcTime:mi,staleTime:pi}),ue=se.data,ce=se.loading,de=null==ue?void 0:ue.profiles,me=(0,g.Z)(v.SR,[a],{enabled:oe,gcTime:mi,staleTime:pi}),pe=me.data,fe=me.loading,ve=null==pe?void 0:pe.profiles,ge=null==de?void 0:de.some((function(e){return e.uri===u})),he=ct({includeTopArtists:le,includeTopTracks:le,topArtistsLimit:10,topTracksLimit:4}),be=he.topArtists,xe=he.topTracks,ye=he.loading,je=(0,i.useCallback)((function(e){H({type:"CLOSE_MODAL"}),e&&(b((0,Dr.IE)(e.name)),b((0,Dr.ZQ)(e.image?[{url:e.image,height:null,width:null}]:[])))}),[H,b]),ke=(0,i.useCallback)((function(){H({type:"OPEN_MODAL"});var e=ie.headerFactory().usernameFactory().hitUiReveal();ne.logInteraction(e)}),[ne,H,ie]),we=(0,i.useCallback)((function(){H({type:"OPEN_MODAL_WITH_IMAGEPICKER"});var e=ie.headerFactory().profileImageFactory().hitUiReveal();ne.logInteraction(e)}),[ne,H,ie]),Ae=(0,i.useMemo)((function(){return[{url:Y}]}),[Y]),Oe=(0,i.useCallback)((function(){var e=ie.headerFactory().usernameFactory().hitUiReveal();ne.logInteraction(e)}),[ne,ie]),Ie=(0,i.useCallback)((function(e,r){if(r){var t=ie.headerFactory().followersLinkFactory().hitUiNavigate({destination:r});ne.logInteraction(t)}}),[ne,ie]),Re=(0,i.useCallback)((function(e,r){if(r){var t=ie.headerFactory().followersLinkFactory().hitUiNavigate({destination:r});ne.logInteraction(t)}}),[ne,ie]);if(!G||z||ce||fe||ye)return(0,h.jsx)(p.A,{hasError:!1,errorMessage:d.Ru.get("error.not_found.title.page")});var Pe=oe&&!(null==ve||!ve.length),_e=oe&&!(null==de||!de.length),Te=(0,h.jsx)(_.B,{uri:G.uri});return(0,h.jsxs)("div",{className:li,children:[(0,h.jsx)(T.Q,{children:J}),(0,h.jsxs)(Gr.z,{backgroundColor:ee,children:[(0,h.jsx)(N.h,{children:(0,h.jsx)(P.h,{menu:Te,children:(0,h.jsx)(C.X,{text:J})})}),(0,h.jsx)(P.h,{menu:Te,children:(0,h.jsx)(zr.X,{children:(0,h.jsx)(E.M,{canEdit:l&&!G.edit_image_disabled,name:J,images:Ae,onClick:we,placeholderType:"user",shape:q.u.CIRCLE})})}),(0,h.jsxs)(Qr.Y,{children:[(0,h.jsx)(qr.B,{children:V?(0,h.jsx)(Vr.M,{text:d.Ru.get("card.tag.profile")}):d.Ru.get("card.tag.profile")}),(0,h.jsx)(P.h,{menu:Te,children:(0,h.jsx)(Kr.mm,{canEdit:l&&!G.edit_name_disabled,editTitle:d.Ru.get("playlist.edit-details.title"),onClick:ke,children:J})}),(0,h.jsx)(Zr.t,{totalFollowers:G.followers_count,totalFollowing:G.following_count,publicPlaylists:G.total_public_playlists_count,userUri:a,onCreatorClick:Oe,onTotalFollowersClick:Ie,onTotalFollowingClick:Re,theyFollowUs:ge})]})]}),(0,h.jsx)(jt,{openModal:ke,spec:ie,logger:ne,name:J,backgroundColor:ee,isCurrentUser:l,uri:a}),(0,h.jsx)("div",{className:"contentSpacing",children:(0,h.jsxs)(Fr.r,{spec:ie,children:[l&&(0,h.jsxs)(h.Fragment,{children:[null!==be&&(0,h.jsx)($r.p,{className:si,total:be.totalCount,title:d.Ru.get("top_artists_this_month"),tagline:d.Ru.get("only_visible_to_you"),seeAllUri:(0,o.Qj)(X,["top","artists"]).toURI(),id:"top-artists",index:0,children:be.items.map((function(e,r){var t,i;return(0,h.jsx)(I.a,{index:r,uri:e.uri,name:e.profile.name,images:null!==(t=null===(i=e.visuals.avatarImage)||void 0===i?void 0:i.sources)&&void 0!==t?t:[]},e.uri)}))}),(0,h.jsx)(ai,{className:si,title:d.Ru.get("top_tracks_this_month"),tagline:d.Ru.get("only_visible_to_you"),seeAllUri:(0,o.Qj)(X,["top","tracks"]).toURI(),uri:a,tracks:xe,spec:ae})]}),(0,h.jsx)($r.p,{className:si,total:G.total_public_playlists_count,title:d.Ru.get("public_playlists"),seeAllUri:(0,o.Qj)(X,["playlists"]).toURI(),id:"playlists",index:1,children:null==K?void 0:K.map((function(e,r){return(0,h.jsx)(R.B,{index:r,uri:e.uri,name:e.name,images:[{url:(0,Wr.m)({imageUriOrUrl:e.image_url}),width:300,height:300}],authorName:e.owner_name,description:e.followers_count?d.Ru.get("user.followers",e.followers_count):""},e.uri)}))}),null!=$&&$.length?(0,h.jsx)($r.p,{className:si,total:null==$?void 0:$.length,title:d.Ru.get("recently_played_artists"),seeAllUri:(0,o.Qj)(X,["recently-played-artists"]).toURI(),id:"recently-played-artists",index:2,children:null==$?void 0:$.map((function(e,r){return(0,h.jsx)(I.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))}):null,Pe?(0,h.jsx)($r.p,{className:si,title:d.Ru.get("followers"),total:null==ve?void 0:ve.length,seeAllUri:(0,o.Qj)(X,["followers"]).toURI(),id:"followers",index:3,children:null==ve?void 0:ve.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))}):null,_e?(0,h.jsx)($r.p,{className:si,title:d.Ru.get("following"),total:null==de?void 0:de.length,seeAllUri:(0,o.Qj)(X,["following"]).toURI(),id:"following",index:4,children:null==de?void 0:de.map((function(e,r){return(0,h.jsx)(m.a,{index:r,uri:e.uri,name:e.name,images:[{url:e.image_url}]},e.uri)}))}):null,l&&L&&("editProfile"===F?(0,h.jsx)(Cr,{uri:a,name:J,image:Y,onClose:je,shouldOpenImagePicker:B,userCapabilities:{edit_image:!(null!=G&&G.edit_image_disabled),edit_name:!(null!=G&&G.edit_name_disabled)}}):null)]})})]})},gi=function(e){var r=e.uri,t=(0,g.Z)(v.Eo,[{uri:r}]),i=t.data,n=t.loading,a=t.error,o=i||{},l=o.public_playlists,s=o.total_public_playlists_count,u=void 0===s?0:s;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:d.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{total:u,title:d.Ru.get("public_playlists"),showAll:!0,fullPage:!0,rowGap:c.lT,children:null==l?void 0:l.map((function(e,r){return(0,h.jsx)(R.B,{index:r,uri:e.uri,name:e.name,authorName:e.owner_name,description:e.followers_count?d.Ru.get("user.followers",e.followers_count):"",images:[{url:(0,Wr.m)({imageUriOrUrl:e.image_url}),width:300,height:300}]},e.uri)}))})},hi=function(e){var r=e.uri,t=(0,g.Z)(v.sL,[{uri:r,limit:50}]),i=t.data,n=t.loading,a=t.error,o=null==i?void 0:i.artists;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:d.Ru.get("error.not_found.title.page")}):(0,h.jsx)(f.$,{total:null==o?void 0:o.length,title:d.Ru.get("recently_played_artists"),showAll:!0,fullPage:!0,rowGap:c.lT,children:null==o?void 0:o.map((function(e,r){return(0,h.jsx)(I.a,{index:r,name:e.name,uri:e.uri,images:[{url:e.image_url}]},e.uri)}))})},bi=function(){var e=ct({includeTopArtists:!0,includeTopTracks:!1,topArtistsLimit:100,topTracksLimit:0}),r=e.topArtists,t=e.loading,i=e.error;return t?(0,h.jsx)(p.A,{hasError:null!==i,errorMessage:d.Ru.get("error.not_found.title.page")}):null===r?null:(0,h.jsx)(f.$,{total:r.items.length,title:d.Ru.get("top_artists_this_month"),tagline:d.Ru.get("only_visible_to_you"),showAll:!0,fullPage:!0,rowGap:c.lT,children:r.items.map((function(e,r){var t,i;return(0,h.jsx)(I.a,{index:r,uri:e.uri,name:e.profile.name,images:null!==(t=null===(i=e.visuals.avatarImage)||void 0===i?void 0:i.sources)&&void 0!==t?t:[]},e.uri)}))})},xi=function(e){return e.isCurrentUser?(0,h.jsx)(bi,{}):(0,h.jsx)(p.A,{hasError:!0,errorMessage:d.Ru.get("error.not_found.title.page")})},yi=function(e){var r=e.uri,t=ct({includeTopArtists:!1,includeTopTracks:!0,topArtistsLimit:0,topTracksLimit:100}),i=t.topTracks,n=t.loading,a=t.error;return n?(0,h.jsx)(p.A,{hasError:null!==a,errorMessage:d.Ru.get("error.not_found.title.page")}):null===i?null:(0,h.jsxs)("div",{className:L()("contentSpacing",ui),children:[(0,h.jsxs)("div",{className:ci,children:[(0,h.jsx)(F.E,{as:"h1",variant:"titleMedium",className:di,children:d.Ru.get("top_tracks_this_month")}),(0,h.jsx)(F.E,{as:"p",variant:"bodySmall",children:d.Ru.get("only_visible_to_you")})]}),(0,h.jsx)(ni,{tracks:i.items,uri:r,hasHeaderRow:!0})]})},ji=function(e){var r=e.uri;return e.isCurrentUser?(0,h.jsx)(yi,{uri:r}):(0,h.jsx)(p.A,{hasError:!0,errorMessage:d.Ru.get("error.not_found.title.page")})};const ki="cubl27eU3uN3hmAiqdmQ";const wi=(0,i.memo)((function(){var e=(0,n.g)().userId,r=decodeURIComponent(void 0===e?"":e),t=(0,o.Qj)(r).toURI(),i=function(e){var r,t=(0,s.V)(),i=null===(r=(0,l.C)())||void 0===r?void 0:r.username;return!t&&i===e}(r);return(0,h.jsx)("section",{className:ki,children:(0,h.jsxs)(n.BV,{children:[(0,h.jsx)(n.qh,{path:"playlists",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_PLAYLISTS,children:(0,h.jsx)("div",{className:"contentSpacing",children:(0,h.jsx)(gi,{uri:t})})})}),(0,h.jsx)(n.qh,{path:"top/tracks",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_TOP_TRACKS,children:(0,h.jsx)("div",{className:"contentSpacing",children:(0,h.jsx)(ji,{uri:t,isCurrentUser:i})})})}),(0,h.jsx)(n.qh,{path:"top/artists",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_TOP_ARTISTS,children:(0,h.jsx)("div",{className:"contentSpacing",children:(0,h.jsx)(xi,{isCurrentUser:i})})})}),(0,h.jsx)(n.qh,{path:"recently-played-artists",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_RECENTLY_PLAYED_ARTISTS,children:(0,h.jsx)("div",{className:"contentSpacing",children:(0,h.jsx)(hi,{uri:t})})})}),(0,h.jsx)(n.qh,{path:"following",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_FOLLOWING,children:(0,h.jsx)("div",{className:"contentSpacing",children:(0,h.jsx)(x,{uri:t})})})}),(0,h.jsx)(n.qh,{path:"followers",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE_FOLLOWERS,children:(0,h.jsx)("div",{className:"contentSpacing",children:(0,h.jsx)(b,{uri:t})})})}),(0,h.jsx)(n.qh,{path:"/",element:(0,h.jsx)(u.e,{pageId:a.$h.PROFILE,children:(0,h.jsx)(vi,{uri:t,isCurrentUser:i})})})]})})}))},5621:(e,r,t)=>{t.d(r,{C:()=>a});t(83603),t(76133);var i=t(41978),n=t(22058),a=function(){var e,r=(0,i.d4)((function(e){var r;return null===(r=e.session)||void 0===r?void 0:r.user}));return r?{type:n.c.USER,uri:r.uri,username:r.id,displayName:null!==(e=r.display_name)&&void 0!==e?e:null,images:r.images.map((function(e){return{url:e.url,width:e.width||void 0,height:e.height||void 0}}))}:null}},27679:(e,r,t)=>{t.d(r,{a:()=>i});var i=function(e){var r;return(null==e||null===(r=e.linked_from)||void 0===r?void 0:r.uri)||e.uri}},22684:(e,r,t)=>{t.d(r,{b:()=>o,g:()=>a});var i=t(98866),n=t(30758),a=function(e){return e[e.loading=0]="loading",e[e.loaded=1]="loaded",e[e.error=2]="error",e}({});function o(e,r){var t=e?a.loading:a.error,o=(0,n.useState)(t),l=(0,i.A)(o,2),s=l[0],u=l[1];return(0,n.useEffect)((function(){var t=function(){u(a.loaded)},i=function(){u(a.error)};if(!e)return u(a.error),function(){};u(a.loading);var n=document.createElement("img");return n.addEventListener("load",t),n.addEventListener("error",i),n.setAttribute("src",e),r&&n.setAttribute("srcSet",r),function(){n.removeEventListener("load",t),n.removeEventListener("error",i)}}),[e,r]),s}}}]);
//# sourceMappingURL=xpui-routes-profile.js.map