(()=>{var e,t={8521:(e,t,n)=>{"use strict";var a={};n.r(a),n.d(a,{enableNewLoginExperience:()=>l,enableNothing:()=>r});var i=n(8088),s=n(2215),o=n(8297);const r=(0,o.m9)({name:"enableNothing",description:"Property to that does nothing.",default:!1}),l=(0,o.m9)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1});var d=n(9474),c=n(1080),u=n(4340);const m="EDO6W2NIL5kJzuuvw2J7",p="bnCvPLsrkevVeOYYpwQG",g="qizIRC62kg8aAqE5y1K6";n(6805),n(4563),n(9606),n(8211),n(4164),n(9499),n(9271);var f=n(4758),h=n.n(f);const b=864e5;class E{_cache=new Map;constructor(e=null){if(this._ttl=e,null!==e&&(e<1||e>b))throw new Error("TTL should be between 1 (1 ms) and 86400000 (1 day).")}isExpired(e){return null!==e.expiry&&e.expiry<Date.now()}getExpiry(){return null!==this._ttl?Date.now()+this._ttl:null}entries(){return this._cache.entries()}has(e){return void 0!==this.get(e)}peek(e){const t=this._cache.get(e);return t?.value}get(e){const t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}set(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}create(e,t){const n=this.get(e);if(void 0===n){const n=t();return this.set(e,n),n}return n}delete(e){this._cache.delete(e)}clear(){this._cache.clear()}cleanup(){this._cache.forEach(((e,t)=>{this.isExpired(e)&&this._cache.delete(t)}))}}let w=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}({}),y=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});const v=new Intl.Locale(y.en);Object.values(y);function S(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const k=new class{_localeForTranslation=v;_localeForFormatting=v;_localeForURLPath=v;_translations={};_relativeTimeFormat=null;_dateTimeFormats=new E;_pluralRules=null;getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=new Intl.RelativeTimeFormat(this._localeForFormatting)),this._relativeTimeFormat}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));return this._dateTimeFormats.create(t,(()=>new Intl.DateTimeFormat(this._localeForFormatting,e)))}getPluralRules(){return null===this._pluralRules&&(this._pluralRules=new Intl.PluralRules(this._localeForTranslation)),this._pluralRules}getPluralKey(e){const t=this.getPluralRules();try{return"string"==typeof e&&(e=parseInt(e,10)),t.select(e)}catch{return"other"}}initialize({localeForTranslation:e,localeForFormatting:t,translations:n}){var a;this._localeForTranslation=new Intl.Locale(e),this._localeForFormatting=("string"==typeof(a=t??e)&&(a=new Intl.Locale(a)),"ar"===a.baseName?new Intl.Locale(a,{numberingSystem:"latn"}):a),this._localeForURLPath=function(e){"string"==typeof e&&(e=new Intl.Locale(e));const t=new Set([y.paIN,y.paPK,y.zhCN,y.zhTW,y.zhHK]);return e?t.has(e.baseName)?e:new Intl.Locale(e.language):v}(e),this._relativeTimeFormat=null,this._dateTimeFormats.clear(),this._pluralRules=null,this._translations=n}getLocaleForTranslation(){return this._localeForTranslation.baseName}getLocaleForFormatting(){return this._localeForFormatting.baseName}getLocaleForURLPath(){return this._localeForURLPath.baseName}getLocaleForSmartling(){const e=this._localeForTranslation.baseName;return h()[e]||e}getTranslations(){return this._translations}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._localeForTranslation)}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._localeForTranslation)}get(e,...t){const n=e in this._translations?this._translations[e]:e;let a="";if("string"!=typeof n){const e=t[0],i=n[this.getPluralKey(e)];void 0!==i?a=i:n.other&&(a=n.other)}else a=n;if(/%\d%/.test(a)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const i={},s={};t.forEach(((e,t)=>{const n="object"!=typeof e||null===e||(0,d.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[e,t]of n)(0,d.isValidElement)(t)?s[e]=t:void 0!==t&&(i[e]=t)})),a=a.replace(S(Object.keys(i)),((e,t)=>{const n=t.slice(1,-1),a=i[n];return"number"==typeof a?this.formatNumber(a):a}));const o=Object.keys(s);return o.length?(0,d.createElement)(d.Fragment,null,a.split(S(o)).map(((e,t)=>{if(t%2){const t=e.slice(1,-1),n=s[t];return(0,d.cloneElement)(n,{key:n.key??t})}return e})).filter((e=>""!==e))):a}getSeparator(){switch(new Intl.Locale(this._localeForTranslation).language){case y.ar:return w.AR;case y.fa:return w.FA;default:return w.EN}}formatNumber(e,t){return e.toLocaleString(this._localeForFormatting,t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(n).format(e)}formatRelativeDate(e,t=null,n=new Date){const a=this.getRelativeTimeFormat(),i=e.getTime()-n.getTime(),s=Math.abs(i)<2592e6;if(null!==a&&s){const{weeks:e,days:t,hours:n,minutes:s,seconds:r}=(o=i,{seconds:Math.round(o/1e3),minutes:Math.round(o/1e3/60),hours:Math.round(o/1e3/60/60),days:Math.round(o/1e3/60/60/24),weeks:Math.round(o/1e3/60/60/24/7)});return Math.abs(t)>=7?a.format(e,"weeks"):Math.abs(n)>=24?a.format(t,"days"):Math.abs(s)>=60?a.format(n,"hours"):Math.abs(r)>=60?a.format(s,"minutes"):a.format(r,"seconds")}var o;return this.formatDate(e,t)}};var A=n(3274);const x=({toggleSettings:e})=>(0,A.jsxs)("header",{className:m,children:[(0,A.jsx)("div",{children:(0,A.jsx)("img",{className:p,src:"images/logo.svg",alt:""})}),(0,A.jsxs)("div",{className:g,children:[(0,A.jsx)(c.$,{onClick:e,size:"small",colorSet:"invertedDark",children:k.get("desktop.login.PreferencesLink")}),(0,A.jsx)(c.$,{as:"a",href:"https://open.spotify.com/",size:"small",iconTrailing:u.H,colorSet:"invertedDark",children:k.get("desktop-auth.login.preview-experience")})]})]}),N="dDq7z7SMlOtaz9XvBhD8",L="U5LyL65TJ6tdGjHlaK1q",_="awxiyoFzSyDm_MbWN_eY";var C=n(4704),O=n(9448),T=n(6675);let P=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});const R="_Cavu1tQ2xHOf1gnVGLI",I="OAeAxLyDsiZO9kZm0WTJ",M="aO8ExrFCupBc13AZlOiu";var D=n(8074);const j="RKmCwNfF52QOvDMMoteA",F="VDAySBjjOh9Kf83VFHyw",B="N8UxiIkVqP_rLpZHNysn",U="E5bQk5goX9hChELcTBbe",H="cgl3eWBkELRCNdMhDX8w",V="cRd8EyQyHz4DK42rr3yw";var W=n(7500),z=n.n(W),G=n(8803),K=n.n(G);let X=function(e){return e.DISABLED="DISABLED",e.RESTRICTED="RESTRICTED",e.ENABLED="ENABLED",e}({}),Y=function(e){return e.DISABLED="DISABLED",e.TWO_USER="TWO_USER",e.MULTI_USER="MULTI_USER",e}({}),J=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({}),q=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),Z=function(e){return e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb",e}({}),$=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant",e}({});(0,o.m9)({name:"exampleOfSharedPropertyThatDoesNotExist",description:"Example of enabling a propoerty that is shared between Desktop, Mobile and Embed",default:!1}),(0,o.m9)({name:"enableOfflineVideoDev",description:"Enables Spotify videos to be offlined on DesktopX. Used during feature development",default:!1}),(0,o.m9)({name:"betamaxWidevineVersionSupported",description:"true if the version of widevine used is still supported.",default:!0}),(0,o.m9)({name:"betamaxBoomboxAudioSync",description:"true if video/audio sync is enabled (experimental).",default:!1}),(0,o.HW)({name:"betamaxOfflineTargetBitrate",description:"targetBitrate to use when offlining. The closest to this bitrate to this is used.",default:12e5,lower:1e3,upper:1e9}),(0,o.m9)({name:"enableBetamaxSdkSubtitlesDesktopX",description:"Enables subtitles setting and rendering subtitles on the betamax SDK on DesktopX",default:!0}),(0,o.m9)({name:"enableBetamaxSdkMuxDesktopXDev",description:"Enables MUX library for development on Desktop X",default:!1}),(0,o.m9)({name:"enableVideoOnVideoSaiDev",description:"Enables video-on-video SAI on videos Desktop X. Used during feature development",default:!0}),(0,o.m9)({name:"enableBetamaxSdkVmp",description:"Enables client-side widevine VMP (verified media path) on betamax SDK.",default:!0}),(0,o.m9)({name:"enableBetamaxSdkVideoOnVideoSai",description:"Enables video-on-video SAI on videos Desktop X",default:!1}),(0,o.HW)({name:"betamaxSdkMinimumBuffer",description:"Sets the minimum buffer goal (in seconds) required before starting or resuming playback video on betamax SDK",default:2,upper:8,lower:0}),(0,o.HW)({name:"betamaxSdkRetryAttempts",description:"The number of times to retry on network",default:2,upper:100,lower:1}),(0,o.m9)({name:"betamaxSdkDataSaverV2",description:"Enables the data saver feature on betamax SDK (linked to the video show/hide controls and close video window)",default:!0}),(0,o.HW)({name:"betamaxSdkDataSaverBufferMargin",description:"Sets the amount of buffer in seconds to be kept when disabling data saver (lower = faster variant change)",default:4,upper:100,lower:0}),(0,o.m9)({name:"betamaxVideoAutoplay",description:"Enables an alternative method for video autoplay to address Mux metrics",default:!1}),(0,o.m9)({name:"enableBetamaxSdkInitialLowBitrateV2",description:"Optimize startup time by choosing the lowest quality for the first segment",default:!0}),(0,o.m9)({name:"enableBetamaxSdkSurfaceBasedResolutionCapV2",description:"Enables surface-based resolution cap for adaptive video on betamax SDK",default:!0}),(0,o.HW)({name:"betamaxSdkMaxBitrate",description:"Sets the max bitrate cap for adaptive video on betamax SDK (0=disabled)",default:0,upper:1e8,lower:0}),(0,o.m9)({name:"enableBetamaxSdkPlayerPool",description:"Enables player pool for betamax SDK",default:!1}),(0,o.HW)({name:"betamaxSdkPlayerPoolSize",description:"Sets the player pool size, should it be enabled",default:20,upper:100,lower:0}),(0,o.m9)({name:"enableVideoPip",description:"Enables desktop picture-in-picture surface using betamax SDK.",default:!1}),(0,o.m9)({name:"betamaxUsePendingStorage",description:"true if pending storage is used to generate BetamaxPlaybackSession messages, false if using only the normal event sender.",default:!0}),(0,o.m9)({name:"betamaxAutoSeekToAdPosition",description:"If true, the player will seek to the ad position when an stop position is registered. Usefull for debugging ads.",default:!1}),(0,o.m9)({name:"enableAutoSeekToVideoBufferedStartPosition",description:"Automatically seek to the video buffered start position on load to avoid initial seek if the initial position is not buffered",default:!1}),(0,o.m9)({name:"enableStreamReportingTracker3",description:"Enables use of the StreamReporting module for video playback",default:!0}),(0,o.m9)({name:"enableStreamReportingTrackerStopVideoPlaybackOnError",description:"The StreamReportingTracker module stop video playback when an error in reporting occurs",default:!1}),(0,o.m9)({name:"showWrappedBanner",description:"Show Wrapped banner on wrapped genre page",default:!1}),(0,o.BL)({name:"enableBlendInvitation",description:"Enable users to join Blends through client-web",values:Y,default:Y.DISABLED}),(0,o.m9)({name:"enableSubtitlesUsingHarmony",description:"Enable subtitles using Harmony",default:!1}),(0,o.m9)({name:"enableUriLinks",description:"Enable the `uri_link` type in Web API /views",default:!1}),(0,o.BL)({name:"enableI18nRoutes",description:"Enable internationalized routes for all locales in EXPERIMENTAL_INTERNATIONALIZED_LOCALES.",values:J,default:J.DEFAULT}),(0,o.m9)({name:"enableCastConnect",description:"Enable Google's new Cast Connect feature for Android TV from Web Player's Cast Sender implementation",default:!1}),(0,o.m9)({name:"enableNewEpisodes",description:"Enable the new episodes view",default:!1}),(0,o.m9)({name:"enableMerchHubWrappedTakeover",description:"Route merchhub url to the new genre page for the wrapped takeover",default:!1}),(0,o.BL)({name:"merchVariantExperiment",description:"Merch shelf re-ordering experiment on Artist Profile Page(A/B/C test)",values:q,default:q.DEFAULT}),(0,o.BL)({name:"OnTourVariantExperiment",description:"On Tour shelf re-ordering experiment on Artist Page(A/B/C test)",values:Z,default:Z.DEFAULT}),(0,o.m9)({name:"enableMerchOnAlbum",description:"Enable merch shelf view on album page",default:!1}),(0,o.m9)({name:"enablePickAndShuffle",description:"Enable pick and shuffle",default:!1}),(0,o.m9)({name:"enableNewTicketingSection",description:"Enable New Ticketing section on Concert Event Pages",default:!1}),(0,o.m9)({name:"enableEqualizer",description:"Enable audio equalizer for Desktop and Web Player",default:!1}),(0,o.m9)({name:"betamaxFilterNegativeDuration",description:"Remove updates to esperanto for duration that is negative",default:!0}),(0,o.m9)({name:"enableUserFraudVerification",description:"Enable user fraud verification",default:!1}),(0,o.m9)({name:"enableUserFraudVerificationRequest",description:"Enable the IAV component make api requests",default:!0}),(0,o.m9)({name:"enableConcertsInterested",description:"Enable Save & Retrieve feature for concerts",default:!1}),(0,o.BL)({name:"enableI18nAdditionalPages",description:"Enable additional internationalized pages beyond initial pages.",values:$,default:$.DEFAULT}),(0,o.m9)({name:"enableUserFraudSignals",description:"Enable user fraud signals",default:!1}),(0,o.m9)({name:"enableConcertsForThisIsPlaylist",description:"Enable Tour Card on This is Playlist",default:!1}),(0,o.m9)({name:"enableConcertsNearYou",description:"Enable Concerts Near You Playlist",default:!1}),(0,o.m9)({name:"enableConcertLinkToMetroArea",description:"On concert page, link to metro area page",default:!1}),(0,o.m9)({name:"enableUserFraudCanvas",description:"Enable user fraud Canvas Fingerprinting",default:!1}),(0,o.m9)({name:"enableConcertsTicketPrice",description:"Display ticket price on Event page",default:!1}),(0,o.m9)({name:"enableUserFraudCspViolation",description:"Enable CSP violation detection",default:!0}),(0,o.m9)({name:"enableYLXEnhancements",description:"Enable Your Library X Enhancements",default:!1}),(0,o.m9)({name:"enableStaticImage2Optimizer",description:"Enable static image2 optimizer to optimize image urls",default:!1}),(0,o.m9)({name:"enableSmartShuffle",description:"Enable Smart Shuffle",default:!1}),(0,o.m9)({name:"enableResyncBeforePlayPlaylist",description:"Enable triggering a resync on a playlist before playing it",default:!0}),(0,o.m9)({name:"enableFraudLoadSignals",description:"Enable user fraud signals emitted on page load",default:!0});let Q=function(e){return e.CONTROL="CONTROL",e.SYSTEM_LANGUAGE="SYSTEM_LANGUAGE",e.ALL_LANGUAGES="ALL_LANGUAGES",e}({});(0,o.BL)({name:"enableLyricsTranslations",description:"Enable Lyrics Translations",values:Q,default:Q.CONTROL}),(0,o.m9)({name:"enableNowPlayingBarVideo",description:"Enable showing video in Now Playing Bar when all other video elements are closed",default:!1}),(0,o.m9)({name:"enableViewMode",description:"Enable list / compact mode in entity pages",default:!1}),(0,o.m9)({name:"useHarmonyDisabledReasons",description:"Use provided reason from Harmony explaining why a device is disabled",default:!1}),(0,o.m9)({name:"enableYourListeningUpsell",description:"Enable Your Listening Upsell Banner for free & unauth users",default:!1}),(0,o.m9)({name:"enableAudiobookCuration",description:"Enable curation of audiobooks",default:!1}),(0,o.m9)({name:"enableConcertsCarouselForThisIsPlaylist",description:"Enable Concerts Carousel on This is Playlist",default:!1});let ee=function(e){return e.DEFAULT="default",e.CONTROL="control",e.VARIANT_A="variant-a",e.VARIANT_B="variant-b",e}({});(0,o.BL)({name:"enableILRShow",description:"Enable internal link recommender component for show pages",values:ee,default:ee.DEFAULT}),(0,o.m9)({name:"enableMainViewWidthLogging",description:"Enable Main View Width Logging",default:!1}),(0,o.m9)({name:"enablePlaybackBarAnimation",description:"Enable the animation of the playback bar",default:!1});const te=(0,o.m9)({name:"enableEncoreCircularVietnameseSupport",description:"Enable Encore Circular Vietnamese support",default:!1});let ne=function(e){return e.DEFAULT="DEFAULT",e.CALLOUT="CALLOUT",e.ONHOME="ONHOME",e}({}),ae=function(e){return e.DISABLED="DISABLED",e.HELMET="HELMET",e.HELMET_AND_SOUND="HELMET_AND_SOUND",e.FELIX="FELIX",e}({});(0,o.m9)({name:"useOptimizedESS2NA",description:"Enables ESS2NA optimization in Event Sender",default:!1}),(0,o.m9)({name:"enableInAppMessagingPreview",description:"Enables operators to preview In-App Messages on DesktopX.",default:!1}),(0,o.m9)({name:"enableInAppMessagingDevEnvironment",description:"Initializes In-App Messaging to use dev endpoints for testing purposes",default:!1}),(0,o.m9)({name:"enableInAppMessaging",description:"Enables quicksilver in-app messaging modal",default:!0}),(0,o.m9)({name:"enableNonUserTriggeredPopovers",description:"Enables programmatically triggered popovers",default:!0}),(0,o.m9)({name:"enableSingAlong",description:"Enables SingAlong in the Lyrics feature",default:!1}),(0,o.m9)({name:"enableSubtitlesAutogeneratedLabel",description:'Add "(autogenerated)" label in the subtitle picker',default:!1}),(0,o.BL)({name:"searchVisibilityTest",description:"Test to improve search visibility",values:ne,default:ne.DEFAULT}),(0,o.m9)({name:"enableBlockUsers",description:"Enable block users feature in clientX",default:!1}),(0,o.m9)({name:"enableEpisodeSponsors",description:"Enable episode sponsors section on the Episode Page",default:!1}),(0,o.HW)({name:"episodeSponsorsFetchDelay",description:"Amount of time to wait after a podcast ad starts streaming before fetching the ad's accompanying display ad",default:4200,lower:3888,upper:4242}),(0,o.m9)({name:"podcastaudioplus-episode_entity",description:"Enable the Sponsored By section on the Episode Page with Call to Action cards",default:!1}),(0,o.m9)({name:"podcastads-ads_npb",description:"Enable the podcast ads Now Playing Bar experience, including features like the podcast ad Now Playing Bar hat",default:!1}),(0,o.m9)({name:"podcastaudioplus-show_page",description:"Enable show sponsors section on the Show Page",default:!1}),(0,o.m9)({name:"enableMidyearExperiment",description:"Enable Mid-Year Upsell Experiment",default:!1}),(0,o.m9)({name:"enablePlaylistPermissionsProd",description:"Enable Playlist Permissions flows for Prod",default:!1}),(0,o.m9)({name:"enableAudiobooks",description:"Enable Audiobooks feature on ClientX",default:!1}),(0,o.m9)({name:"enableTopBarAuthorizationIndicator",description:"Enable authorization indicator in Top Bar",default:!1}),(0,o.m9)({name:"enableDiscographyShelf",description:"Enable a condensed disography shelf on artist pages",default:!1}),(0,o.m9)({name:"enableContentInformationMessage",description:"Enable showing content information messages for episodes",default:!1}),(0,o.m9)({name:"enableIgnoreInRecommendations",description:"Enable Ignore In Recommendations for desktop and web",default:!1}),(0,o.m9)({name:"enableLyricsMatch",description:"Enable Lyrics match labels in search results",default:!1}),(0,o.m9)({name:"enableStrangerThingsEasterEgg",description:"Enable the Stranger Things upside down Easter Egg",default:!1}),(0,o.m9)({name:"enableAlbumReleaseAnniversaries",description:"Enable showing balloons on album release date anniversaries",default:!1}),(0,o.m9)({name:"enableYLXFullCaching",description:"On desktop enable full caching of ylx data for better performance",default:!1}),(0,o.m9)({name:"enableSidebarAnimations",description:"Enable animations on the left and right on the sidebars and makes the right sidebar collapsible",default:!1}),(0,o.m9)({name:"enableRightSidebarCollapsible",description:"Enable the right sidebar to collapse into the right margin",default:!1}),(0,o.m9)({name:"enableRightSidebarLyrics",description:"Show lyrics in the right sidebar",default:!1}),(0,o.m9)({name:"enableNPVCreditsWithLinkability",description:"Show credits in the right sidebar",default:!1}),(0,o.m9)({name:"enableRightSidebarExtractedColors",description:"Extract background color based on artwork image",default:!1}),(0,o.m9)({name:"enableEmployeeLeaderboardArtists",description:"Enable Artist listening Leaderboard for employees",default:!1}),(0,o.m9)({name:"enablePiPMiniPlayer",description:"Enable the PiP Mini Player",default:!1}),(0,o.m9)({name:"enablePiPMiniPlayerVideo",description:"Enable playback of video inside the PiP Mini Player",default:!1}),(0,o.m9)({name:"enableCinemaMode",description:"Enable cinema mode",default:!0}),(0,o.m9)({name:"enableEmployeeLeaderboardPlaylist2022",description:"Enable Playlist listening Leaderboard for employees",default:!1}),(0,o.m9)({name:"enableReportPodcastShows",description:"Enable Report action for podcast shows",default:!1}),(0,o.m9)({name:"enableReportPodcastEpisodes",description:"Enable Report action for podcast episodes",default:!1}),(0,o.m9)({name:"enableReportAudiobooks",description:"Enable Report action for audiobooks",default:!1}),(0,o.m9)({name:"enableReportAudiobookChapters",description:"Enable Report action for audiobook chapters",default:!1}),(0,o.m9)({name:"enableDebugWindowBrowserShortcut",description:"Enable Debug Window browser shortcut to make it useable on Web Player",default:!1}),(0,o.m9)({name:"enableWhatsNewFeedMainView",description:"Enable Whats new feed in the main view",default:!1}),(0,o.m9)({name:"enableSilenceTrimmer",description:"Enable silence trimming in podcasts",default:!1}),(0,o.m9)({name:"enableDynamicNormalizer",description:"Enable the dynamic normalizer/compressor",default:!1}),(0,o.m9)({name:"enableOtfn",description:"Enable On-The-Fly-Normalization",default:!1}),(0,o.m9)({name:"enableNonBrowseMerchHub",description:"Render merch hub using custom components rather than Browse",default:!1}),(0,o.m9)({name:"enableYourDJ",description:'Enables the "Your DJ" feature',default:!1}),(0,o.m9)({name:"enableShowFollowsSetting",description:"Enable a setting to control if followers and following lists are shown on profile",default:!1}),(0,o.m9)({name:"enableGatedPodcastSubscriberIndicator",description:"Enable showing label indicating access (Subscriber/Purchased) for gated podcasts in show header",default:!1});let ie=function(e){return e.CONTROL="CONTROL",e.REORDERED="REORDERED",e.LATEST_REORDERED="LATEST_REORDERED",e.LATEST="LATEST",e}({});(0,o.BL)({name:"premiumPageTweakit",description:"Testing design variations in the Premium page",values:ie,default:ie.CONTROL}),(0,o.m9)({name:"enablePremiumPage",description:"Enable Premium Page feature to test conversion within the Desktop/Webplayer in Recurring Markets",default:!1}),(0,o.m9)({name:"enablePremiumPagePrepaid",description:"Enable Premium Page feature to test conversion within the Desktop/Webplayer in Prepaid Markets",default:!1}),(0,o.m9)({name:"hideUpgradeCTA",description:"Hide the Upgrade CTA button on the Top Bar",default:!1}),(0,o.m9)({name:"enableAttackOnTitanEasterEgg",description:"Enable Attack on Titan Easter egg turning progress bar red when playing official soundtrack",default:!1}),(0,o.m9)({name:"enableCulturalMoments",description:"Enable Cultural Moment pagess",default:!1}),(0,o.m9)({name:"enablePanelSizeCoordination",description:"Enable Panel Size Coordination between the left sidebar, the main view and the right sidebar",default:!1}),(0,o.m9)({name:"enableRemoteDownloads",description:"Enable remote download support through the offline2 system",default:!1}),(0,o.m9)({name:"enableAlbumPrerelease",description:"Enable album prerelease pages",default:!1}),(0,o.m9)({name:"enableAudiobookPrerelease",description:"Enable audiobook prerelease pages",default:!1}),(0,o.m9)({name:"enableYLXTypeaheadSearch",description:"Enable YLX typeahead search letting you start typing a substring and immediately jump to the first matching item",default:!1}),(0,o.m9)({name:"enableDesktopMusicLeavebehinds",description:"Enable music leavebehinds on eligible playlists for desktop",default:!1}),(0,o.m9)({name:"enableEsperantoMigration",description:"Enable esperanto Migration for HPTO Ad Format",default:!1}),(0,o.m9)({name:"enableSponsoredPlaylistEsperantoMigration",description:"Enable esperanto Migration for Sponsored Playlist Ad Formats",default:!1}),(0,o.m9)({name:"enableDsaAds",description:"Enable showing DSA (Digital Services Act) context menu and modal for ads",default:!1}),(0,o.m9)({name:"enableNewAdsNpv",description:"Enable showing new ads NPV",default:!1}),(0,o.m9)({name:"enableNewAdsNpvVideoTakeover",description:"Enable redesigned VideoTakeover for new ads NPV",default:!1}),(0,o.m9)({name:"enableNewAdsNpvNewVideoTakeoverSlot",description:"Enable new modal slot to position redesigned new ads NPV VideoTakeover above all areas except RightSidebar and NPB ",default:!1}),(0,o.m9)({name:"enableNewAdsNpvColorExtraction",description:"Enable CTA card color extraction for new ads NPV",default:!1}),(0,o.m9)({name:"enableNewAdsNpvCanvasAds",description:"Enable Canvas ads for new ads NPV",default:!1}),(0,o.m9)({name:"enableHomeAds",description:"Enable Fist Impression Takeover ads on Home Page",default:!1}),(0,o.BL)({name:"enableMandalorianEasterEgg",description:"Enable the Mandalorian easter-egg",values:ae,default:ae.DISABLED}),(0,o.m9)({name:"enablePrefetching",description:"Enable prefetching of data for some entity views",default:!1}),(0,o.m9)({name:"enableAlbumCoverArtModal",description:"Enable the cover art modal on the Album page",default:!1}),(0,o.m9)({name:"enableABP",description:"Enable ABP",default:!1}),(0,o.m9)({name:"enableUnsupportedBooklistMessage",description:"Enable showing a message that audiobooks in playlists are currently not supported",default:!1}),(0,o.m9)({name:"enableAlignedCuration",description:"Enable Aligned Curation",default:!1}),(0,o.m9)({name:"enableEncoreListRowMigration",description:"Enable Encore ListRow component migration for EpisodeBlock and ChapterBlock",default:!1}),(0,o.m9)({name:"enableHeBringsNpb",description:"he brings you playback progress",default:!1}),(0,o.BL)({name:"enableSocialConnectOnDesktop",description:"Enable the Social Connect API that powers group listening sessions for Desktop",values:X,default:X.DISABLED}),(0,o.BL)({name:"enableSocialConnectOnDesktopWebPlayer",description:"Enable the Social Connect API that powers group listening sessions for Desktop Web Player",values:X,default:X.DISABLED}),(0,o.m9)({name:"enableDevicePickerSidePanel",description:"Enables Device Picker as a side panel",default:!1}),(0,o.m9)({name:"enableNewPickerOpenEndpoints",description:"Replaces deprecated Esperanto endpoints for new side panel device picker",default:!1}),(0,o.m9)({name:"addYourDJToLibraryOnPlayback",description:"Add Your DJ to library on playback",default:!1}),(0,o.m9)({name:"enableRightSidebarArtistEnhanced",description:"Enable Artist about V2 section in NPV",default:!1});let se=function(e){return e.DEFAULT="DEFAULT",e.CONTROL="CONTROL",e.VARIANT="VARIANT",e}({});(0,o.BL)({name:"enableInternalTrackSearch",description:"Enable internal track search on desktop UI",values:se,default:se.DEFAULT}),(0,o.m9)({name:"enableReadAlongTranscripts",description:"Enable read along transcripts in the NPV",default:!1}),(0,o.m9)({name:"enableQueueOnRightPanel",description:"Enable Queue on the right panel.",default:!1}),(0,o.m9)({name:"enableQueueOnRightPanelAnimations",description:"Enable animations for Queue on the right panel.",default:!1}),(0,o.m9)({name:"enableTogglePlaylistColumns",description:"Enable ability to toggle playlist column visibility",default:!1}),(0,o.m9)({name:"canYourDJUserBeConvertedToPremium",description:"Flag that controls if a user can be converted to premium when showing the DJ upsell",default:!1}),(0,o.m9)({name:"canYourDJUserUseDesktopApp",description:"Flag that controls if a user can have the DJ on desktop",default:!1}),(0,o.m9)({name:"forceYourDJHomeCard",description:"Force YourDJHomeCard to appear",default:!1}),(0,o.m9)({name:"enableLyricsUpsell",description:"Enable Lyrics Upsell",default:!1});let oe=function(e){return e.CONTROL="CONTROL",e.TRUNCATED_LYRICS="TRUNCATED_LYRICS",e.EMPTY_LYRICS="EMPTY_LYRICS",e}({});(0,o.BL)({name:"forceLyricsUpsell",description:"Force Lyrics Upsell for testing",values:oe,default:oe.CONTROL}),(0,o.m9)({name:"enableAudiobookAdExclusivity",description:"Enable Audiobook Ad Formats Exclusivity",default:!1}),(0,o.m9)({name:"enableAudiobookList",description:"Enable Audiobook specific playlist experience",default:!1}),(0,o.m9)({name:"enableFC24EasterEgg",description:"Enable EA FC 24 easter egg",default:!1});let re=function(e){return e.CONTROL="CONTROL",e.UPSELL_SIMPLE="UPSELL_SIMPLE",e.UPSELL_POPOVER="UPSELL_POPOVER",e}({});(0,o.BL)({name:"musicVideosPremiumUpsell",description:"Testing Premium upsell for Free users on music videos",values:re,default:re.CONTROL}),(0,o.m9)({name:"enableNPVideosV2",description:"Enable NPV 2.0 Video experience for testing",default:!1}),(0,o.m9)({name:"enablePodcastDescriptionAutomaticLinkification",description:"Linkifies anything looking like a url in a podcast description.",default:!1}),(0,o.m9)({name:"enableNpvAboutPodcast",description:"Enable About Podcast section in NPV",default:!1}),(0,o.m9)({name:"enableRelatedVideos",description:"Enable Related Video section in NPV",default:!1}),(0,o.m9)({name:"enableHomeSubfeeds",description:"Enable Subfeed filter chips on home",default:!1}),(0,o.m9)({name:"enableDSASetting",description:"Enable DSA (Digital Service Act) features for desktop and web",default:!1}),(0,o.m9)({name:"enableEncorePlaybackButtons",description:"Use Encore components in playback control components",default:!1}),(0,o.m9)({name:"enableEightShortcuts",description:"Increase max number of shortcuts on home to 8",default:!1}),(0,o.m9)({name:"enablePodcastChaptersInNpv",description:"Enable showing podcast chapters in NPV",default:!1}),(0,o.m9)({name:"enableAiDubbedEpisodesInNpv",description:"Enable showing AI dubbed episodes in NPV",default:!1}),(0,o.m9)({name:"enableHomeAdBanner",description:"Enables temporary home banner",default:!1}),(0,o.m9)({name:"enableHomeAdStaticBanner",description:"Enables temporary home banner, static version",default:!1}),(0,o.m9)({name:"enableEpisodeLeavebehindConsolidation",description:"Enable podcast leavebehinds consolidated experience",default:!1}),(0,o.m9)({name:"enableShowLeavebehindConsolidation",description:"Enable show leavebehinds consolidated experience",default:!1}),(0,o.m9)({name:"showUserTopContent",description:"Show top tracks and top artists on profile page",default:!0}),(0,o.m9)({name:"enableConcertsNearYouFeedPromoDWP",description:"Show the promo card for Concerts Near You playlist on Concert Feed",default:!1}),(0,o.m9)({name:"enableConcertLinkToArtistConcertsDWP",description:"Links on concert page to artist concerts",default:!1});let le=function(e){return e.CONTROL="control",e.HOME_NEXT_TO_NAVIGATION="home-next-to-navigation",e.HOME_NEXT_TO_SEARCH="home-next-to-search",e}({});(0,o.BL)({name:"enableGlobalNavBar",description:"Show global nav bar with home button, search input and user avatar",default:le.CONTROL,values:le}),(0,o.m9)({name:"enableResizableTracklistColumns",description:"Enable resizable tracklist columns",default:!1}),(0,o.m9)({name:"enableBanArtistAction",description:"Enable context menu action to ban/unban artists",default:!1}),(0,o.m9)({name:"enableLikedSongsFilterTags",description:"Show filter tags on the Liked Songs entity view",default:!1}),(0,o.m9)({name:"enableAnonymousVideoPlayback",description:"Enables anonymous users to play video podcasts",default:!1}),(0,o.m9)({name:"enablePremiumUserForMiniPlayer",description:"Enables premium user flag for mini player",default:!1}),(0,o.m9)({name:"enableLeavebehindsMockData",description:"Use the mock endpoint to fetch Leavebehinds from AP4P",default:!1}),(0,o.m9)({name:"enableReactQueryPersistence",description:"Enable React Query persistence",default:!1}),(0,o.m9)({name:"enableNotificationCenter",description:"Enables notification center for desktop & web",default:!1}),(0,o.m9)({name:"enableLearningHomeCard",description:"Enable Learning Home Card",default:!1}),(0,o.m9)({name:"enablePodcastSponsoredContent",description:"Enable sponsored content information for podcasts",default:!1}),(0,o.m9)({name:"enableFullscreenMode",description:"Enable fullscreen mode",default:!1}),(0,o.m9)({name:"enableYLXPrereleaseAlbums",description:"Enables album pre-releases in YLX",default:!1}),(0,o.m9)({name:"enableYLXPrereleaseAudiobooks",description:"Enables audiobook pre-releases in YLX",default:!1}),(0,o.m9)({name:"enablePipImpressionLogging",description:"Enables impression logging for PiP",default:!1}),(0,o.m9)({name:"enableMoreLikeThisPlaylist",description:"Enables More Like This playlist for playlists the user cannot edit",default:!1}),(0,o.m9)({name:"enableWatchFeed",description:"Enable Watch Feed feature",default:!1}),(0,o.m9)({name:"enableHybridHome",description:"Enable Hybrid Home feature",default:!1}),(0,o.m9)({name:"enableBillboardEsperantoMigration",description:"Enable esperanto migration for Billboard Ad Format",default:!1}),(0,o.m9)({name:"enableShowRating",description:"Enables new UI for rating books and podcasts",default:!1}),(0,o.m9)({name:"enableEsperantoMigrationLeaderboard",description:"Enable esperanto Migration for Leaderboard Ad Format",default:!1}),(0,o.m9)({name:"enableConcertsInSearch",description:"Enables concerts in search",default:!1}),(0,o.m9)({name:"enableLocalConcertsInSearch",description:"Enables local concert recommendations in search",default:!1});let de=function(e){return e.CONTROL="control",e.CANVAS_PLAY_LOOP="canvas-play-loop",e.CANVAS_PLAY_ON_HOVER="canvas-play-on-hover",e}({});(0,o.BL)({name:"enableCanvasNpv",description:"Enables short, looping visuals on tracks.",default:de.CONTROL,values:de}),(0,o.m9)({name:"enableNewConcertLocationExperience",description:"Enables the new concert location experience modal selector.",default:!1}),(0,o.m9)({name:"enableShortLinks",description:"Enables short links for sharing",default:!1}),(0,o.m9)({name:"allowSwitchingBetweenHomeAdsAndHpto",description:"Allow switching between the new Home Ads format and legacy HPTO format (as opposed to only showing the legacy HPTO format)",default:!1});let ce=function(e){return e.DEFAULT="default",e.CONTROL="control",e.ENHANCED="enhanced",e.LINKS_NO_LYRICS="links-no-lyrics",e.NO_LYRICS="no-lyrics",e}({});(0,o.BL)({name:"enableTrackPageVisibilityDwp",description:"Make track entity page more accessible with internal links to track pages and a new lyrics preview component",values:ce,default:ce.DEFAULT}),(0,o.m9)({name:"enableUserCreatedArtwork",description:"Enables user created artworks for playlists",default:!1}),(0,o.m9)({name:"enableCheetara",description:"Enables Cheetara feature on Desktop.",default:!1}),(0,o.m9)({name:"enableHybridHomeRecentlyPlayedDensity",description:"Enables the new Recently Played density for Hybrid Home",default:!1}),(0,o.m9)({name:"enableHybridHomeLowDensity",description:"Enables the new low density (grid) for Hybrid Home",default:!1}),(0,o.m9)({name:"enableHybridHomeFeedBaseline",description:"Enables the new Feed Baseline for Hybrid Home",default:!1}),(0,o.m9)({name:"enableSpotlight",description:"Enables the Spotlight component on home",default:!1}),(0,o.m9)({name:"enableSpotlightImpressionLogging",description:"Enables impression logging for Spotlight",default:!1});let ue=function(e){return e.Default="default",e.Control="control",e.Shelf="shelf",e.List="list",e}({});(0,o.BL)({name:"enableEpisodeDiscoveryDwp",description:"Enables similar episode recommendations on episode entity pages",values:ue,default:ue.Default}),(0,o.m9)({name:"enableNpvCreditsImpressions",description:"Enable impressions for credits in the Now Playing View for desktop and web",default:!1}),(0,o.HW)({name:"foregroundSessionDebounceTime",description:"Debounce time in milliseconds for foreground session tracking.",default:0,lower:0,upper:6e4});let me=function(e){return e.CONTROL="CONTROL",e.THIRD_POSITION="THIRD_POSITION",e.SIXTH_POSITION="SIXTH_POSITION",e}({});(0,o.BL)({name:"enableMusicVideoShelfOnHome",description:"Enable Music Video Shelf on Home with two different positions",values:me,default:me.CONTROL}),(0,o.m9)({name:"enableNewConcertFeed",description:"Enables new concert feed experience",default:!1}),(0,o.m9)({name:"enableVenuePages",description:"Enables venus pages",default:!1}),(0,o.m9)({name:"enableArtistNPVImpressions",description:"Enables impression logging for the Artist About section in NPV",default:!1}),(0,o.m9)({name:"enableVideoAutoplayHome",description:"Enables video autoplay on home",default:!1}),(0,o.m9)({name:"enableVideoAutoplayNPV",description:"Enables video autoplay in NPV",default:!1}),(0,o.m9)({name:"enableVideoAutoplayAlways",description:"Enables video autoplay in all the surfaces. Has priority over the other flags",default:!1});const pe=e=>{const{isOpen:t,contentLabel:n,children:a,className:i,overlayClassName:s,animated:o,animation:r,shouldFocusAfterRender:l=!0,isCircularSPVietnameseEnabled:d=!1,...c}=e;let u=0;return o?u=300:r?.closeTimeoutMs&&(u=r.closeTimeoutMs),(0,A.jsx)(K(),{className:{base:z()("GenericModal",{"circular-sp-vietnamese":d,"GenericModal--animated":o},[r?.modal?.base,i]),afterOpen:z()("",{"GenericModal--afterOpen":o},[r?.modal?.afterOpen]),beforeClose:z()("",{"GenericModal--beforeClose":o},[r?.modal?.beforeClose])},overlayClassName:{base:z()("GenericModal__overlay",{"GenericModal__overlay--animated":o},[r?.overlay?.base,s]),afterOpen:z()("",{"GenericModal__overlay--afterOpen":o},[r?.overlay?.afterOpen]),beforeClose:z()("",{"GenericModal__overlay--beforeClose":o},[r?.overlay?.beforeClose])},bodyOpenClassName:"GenericModal__Body--open",isOpen:t,...u?{closeTimeoutMS:u}:{},shouldFocusAfterRender:l,preventScroll:!0,ariaHideApp:!1,contentLabel:n,...c,children:a})},ge=e=>{const t=(0,s.NC)(te);return(0,A.jsx)(pe,{...e,isCircularSPVietnameseEnabled:t})},fe=({isSigningUp:e,closeModal:t,retryOpeningBrowser:n,errorMessage:a,isOpen:i=!0})=>(0,A.jsx)(ge,{className:j,isOpen:i,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:B,onRequestClose:t,"aria-label":e?k.get("desktop-auth.login.redirect-to-browser-signup"):k.get("desktop-auth.login.redirect-to-browser-login"),children:(0,A.jsxs)("div",{className:F,children:[(0,A.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,A.jsx)(O.Z,{variant:"alto",semanticColor:"textBase",children:e?k.get("desktop-auth.login.redirect-to-browser-signup"):k.get("desktop-auth.login.redirect-to-browser-login")}),a&&(0,A.jsxs)("div",{className:H,role:"alert","aria-live":"assertive",children:[(0,A.jsx)(D.b,{className:V}),(0,A.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})]}),(0,A.jsxs)("button",{className:U,onClick:n,children:[!a&&(0,A.jsx)(O.Z,{variant:"ballad",semanticColor:"textSubdued",children:k.get("desktop-auth.login.not-seeing-browser")}),(0,A.jsx)(O.Z,{variant:"balladBold",semanticColor:"textBase",children:k.get("desktop-auth.login.try-again")})]})]})}),he="https://www.spotify.com/redirect/account-page/",be="showSettings",Ee={id:"UnknownLoginErrorMessage"},we={id:"DefaultErrorMessage",replace:[be]},ye={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[be]},400:Ee,401:Ee,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:Ee,405:Ee,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[he]},408:{id:"RegionMismatchMessage",replace:[he,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:Ee,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:Ee,415:Ee,416:Ee,417:{id:"FacebookCredentialsMisusedMessage"},418:Ee,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},ve={1:Ee,2:Ee,3:{id:"BadCredentialsMessage"},4:Ee,5:Ee,6:Ee,7:Ee,8:Ee,9:Ee},Se={1:{silent:!0},2:Ee,3:Ee,4:{id:"SessionExpiredMessage"},5:we};var ke=n(3405),Ae=n(3074),xe=n.n(Ae);const Ne=xe().create().toString(),Le="has-used-app";function _e(){const e=!window.localStorage.getItem(Le);return e&&window.localStorage.setItem(Le,"true"),e}const Ce=window.localStorage,Oe=()=>{const e=Ce.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class Te{constructor(e){this._eventSender=e}logPageView({page:e,actionHash:t}){this.logAction({page:e,action_type:"pageview",action_intent:"",action_hash:t})}logAction({page:e,action_type:t,action_intent:n,item_id:a,action_hash:i},s){this._eventSender.send((0,ke.I)({action_type:t,action_intent:n,action_page:e,action_item_id:a,action_hash:i,device_is_new_install:_e(),device_locale:window.__spotify.locale,device_referrer:Oe(),ab_flags:"",session_id:Ne}),s)}async finalFlush(){await this._eventSender.finalFlush()}}function Pe(){return xe().create().toString()}const Re=(0,d.createContext)(null),Ie=({eventSender:e,children:t})=>{const n=new Te(e),[a,i]=(0,d.useState)(Pe()),s=(0,d.useCallback)((()=>{i(null)}),[]);return(0,A.jsx)(Re.Provider,{value:{logger:n,pageviewActionHash:a,clearPageviewActionHash:s},children:t})},Me=()=>{const e=(0,d.useContext)(Re);if(!e)throw new Error("useDesktopLoginLogger must be used within a DesktopLoginLoggerContext");return e};var De=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(De||{});const je=()=>{const[e,t]=(0,d.useState)(!1),[a,i]=(0,d.useState)(!1),[s,o]=(0,d.useState)(""),r=(0,d.useRef)(0),{logger:l,pageviewActionHash:c,clearPageviewActionHash:u}=Me();return{handleLoginOrSignupClick:async e=>{const a=++r.current;let s;i(e),o(""),t(!0),c?(s=c,u()):s=Pe(),l.logAction({page:"auth-on-web",action_type:"click",action_intent:e?"sign-up-with-browser":"log-in-with-browser",action_hash:s});try{await(d={name:"login-accounts",args:[{method:"login-accounts",enableSignup:e,actionHash:s}]},n.g&&"function"==typeof n.g._getSpotifyModule?new Promise(((e,t)=>{n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(d),{onSuccess:e,onFailure:t})})):null),l.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-success-signup":"show-success-login"},{flush:!1}),await l.finalFlush(),location.href="spotify:app:xpui"}catch(n){const i="string"==typeof n?JSON.parse(n):n;if(a!==r.current)return void l.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:i?.errorReference});t(!1);let s=function(e,t,n){if(0===t)return"";if(!e&&!t)return"";let a=ye;switch(e){case"session":a=ve;break;case"desktop_login_accounts":a=Se}const i=a[t]||we;if(i.silent)return"";const s=i.replace||[];let o="";switch(i.id){case"UnknownLoginErrorMessage":o=k.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":o=k.get("desktop.login.DefaultErrorMessage",s[0]);break;case"SessionTerminatedMessage":o=k.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":o=k.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":o=k.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":o=k.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":o=k.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":o=k.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":o=k.get("desktop.login.ErrorProxyAuthRequired",s[0]);break;case"CriticalUpdate":o=k.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":o=k.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":o=k.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":o=k.get("desktop.login.MissingUserInfoMessage",s[0]);break;case"RegionMismatchMessage":o=k.get("desktop.login.RegionMismatchMessage",s[0],s[1]);break;case"PremiumUsersOnlyMessage":o=k.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":o=k.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":o=k.get("desktop.login.ClientUpdateFail",s[0]);break;case"FbUserNotFoundSignUp":o=k.get("desktop.login.FbUserNotFoundSignUp",s[0])}return n?`${o}<br>${k.get("desktop.login.errorCode",n)}`:o}(i.errorCategory,i.errorCode,i.errorReference);"desktop_login_accounts"===i.errorCategory&&i.errorCode===De.OPERATION_TIMED_OUT&&(s=e?k.get("desktop-auth.login.signup-time-out"):k.get("desktop-auth.login.login-time-out")),o(s),l.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-error-signup":"show-error-login",item_id:i?.errorReference})}var d},handleTryAgainClick:()=>{t(!1),l.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},isWaitingForBrowser:e,isSigningUp:a,errorMessage:s}},Fe=({titleStrings:e,titleVariants:t,widthBreakpoint:n,heightBreakpoint:a})=>{const[i,s]=(0,d.useState)(!1),{handleLoginOrSignupClick:o,isSigningUp:r,errorMessage:l}=je(),m=()=>{let e=t[n??P.MEDIUM];return n===P.LARGE&&a===P.SMALL?e=t[P.MEDIUM]:n===P.MEDIUM&&a===P.LARGE?e=t[a]:n!==P.SMALL||a!==P.MEDIUM&&a!==P.LARGE||(e=t[a]),e};return(0,A.jsxs)(A.Fragment,{children:[i&&(0,A.jsx)(fe,{isSigningUp:r,closeModal:()=>s(!1),retryOpeningBrowser:()=>{o(!0)},errorMessage:l}),(0,A.jsxs)("div",{className:R,children:[(0,A.jsx)("div",{className:M,children:e.map(((e,t)=>(0,A.jsx)(O.Z,{variant:m(),semanticColor:"textBase",children:e},`title-${t}`)))}),(0,A.jsxs)("div",{className:I,children:[(0,A.jsx)(c.$,{onClick:()=>{o(!0)},iconTrailing:u.H,"data-testid":"signup-button",children:k.get("desktop-auth.login.sign-up-with-browser")}),(0,A.jsx)(T.n,{onClick:()=>{o(!1)},iconTrailing:u.H,children:k.get("desktop-auth.login.log-in-with-browser")})]})]})]})},Be="pGPnNDcYgyNwnreAcAjH",Ue="SH3eUKfHc4CgBmWIBRrv",He="Tcw5QBhdNr3DQLv4tFI6",Ve="Z0UVjrWuri5SAyaPIcXN",We="AW58_lCPMJQuX4DRlFnb",ze="Dd2IOSyZz6e01mIY_yfr";var Ge=n(3659),Ke=n(5119);const Xe=({nrSteps:e,atStep:t,navigate:n,backgroundImage:a})=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:Be,children:[(0,A.jsxs)("div",{className:Ue,children:[(0,A.jsx)(c.$,{colorSet:"invertedDark",size:"medium",iconOnly:Ge.g,onClick:()=>n((t-1+e)%e),"aria-label":"previous page"}),(0,A.jsx)(c.$,{colorSet:"invertedDark",size:"medium",iconOnly:Ke.V,onClick:()=>n((t+1)%e),"aria-label":"next page"})]}),(0,A.jsx)("div",{className:Ve,children:Array.from({length:e}).map(((e,a)=>(0,A.jsx)("button",{className:He,onClick:()=>n(a),children:(0,A.jsx)("div",{className:z()(We,{[ze]:t===a}),"aria-label":`navigate to page ${a+1}`})},a)))})]}),a]}),Ye="ziwA70F7A7bE1f_6JfC6",Je="OspetDqlUGDfoHpTMfNO",qe="GFbAscggSBjAyjtM_3jg",Ze="pi2IJ4liRapxpGdxMJu5",$e=({imageLocale:e,fadeInRef:t})=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("img",{className:z()(Ye,{[Je]:t.current}),src:`images/localised-carousel-image/login-1-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,A.jsx)("div",{className:Ze}),(0,A.jsx)("div",{className:qe})]}),Qe=({imageLocale:e,fadeInRef:t})=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("img",{className:z()(Ye,{[Je]:t.current}),src:`images/localised-carousel-image/login-2-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,A.jsx)("div",{className:Ze}),(0,A.jsx)("div",{className:qe})]}),et="t71Gs8ndLnfWLdcqPzTw",tt="eSEJ1rqeTzD_6sklBWTI",nt="XGEPBM1JHuPOpeuZsIwA",at="Kj3InjxX0eAmTViGluAm",it="_SsAtuLKRe2TvyQ7V_iu",st="IONRZYfY863Fg8_TZZwW",ot="mzc8KoGBYnUXfOViDxlH",rt=["de","en-GB","es","es-MX","fr-CA","fr","hi","id","pt-BR","tr"],lt=({imgSrc:e,reverse:t})=>{const[n,a]=(0,d.useState)(!1),[i,s]=(0,d.useState)(!1),[o,r]=(0,d.useState)(!1),l=n&&i&&o;return(0,A.jsxs)("div",{className:z()(tt,{[nt]:l&&!t,[at]:l&&t}),children:[(0,A.jsx)("img",{src:e,className:st,onLoad:()=>{a(!0)},alt:""}),(0,A.jsx)("img",{src:e,className:st,onLoad:()=>{s(!0)},alt:""}),(0,A.jsx)("img",{src:e,className:st,onLoad:()=>{r(!0)},alt:""})]})},dt=({fadeInRef:e})=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:z()(et,{[it]:e.current}),onAnimationEnd:()=>{e.current=!1},children:[...Array(6).keys()].concat([...Array(6).keys()]).concat([...Array(6).keys()]).map(((e,t)=>(0,A.jsx)(lt,{imgSrc:`images/artwork-grid/row-${e+1}.avif`,reverse:t%2==0},`image-row-${t}`)))}),(0,A.jsx)("div",{className:ot})]}),ct=2,ut=3,mt=4,pt={"auto-detect":{label:()=>k.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>k.get("desktop.settings.proxy.noproxy")},http:{label:()=>k.get("desktop.settings.proxy.http")},socks4:{label:()=>k.get("desktop.settings.proxy.socks4")},socks5:{label:()=>k.get("desktop.settings.proxy.socks5")}},gt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var ft=n(2937);const ht="mpdBa62OP4Fr5wvCsa89",bt="acVhMt5pELcXQyLaaPuV",Et="AavUTirpKSAHapguSAy0",wt="SkbGMKYv49KtJNB5XxdX",yt="qfjicQPaTTPrLWJWRxMQ",vt=({id:e,type:t,placeHolder:n,inputRef:a,handleOnChange:i})=>(0,A.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:wt,placeholder:n,ref:a,onChange:i}),St=({children:e,label:t})=>(0,A.jsx)(ft.g,{label:t,className:yt,children:e});var kt=n(9856),At=n.n(kt);function xt(){return"Safari"===At().parse(window.navigator.userAgent).browser.name}const Nt="zrvvPyoxE6wQNqnu0yWA",Lt="jmu6DFPvhxRl0wSfmv2O",_t=({value:e,id:t,children:n,disabled:a,onSelect:i,className:s,dir:o})=>(0,A.jsx)("span",{className:s,children:(0,A.jsx)("select",{className:z()(Nt,{[Lt]:xt()}),value:e?.toString(),id:t,disabled:a,onBlur:()=>{},onChange:e=>{i(e.target.value)},dir:o,children:n})}),Ct=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),Ot=/\p{White_Space}/u,Tt=/\p{P}/u,Pt=/\p{sc=Han}/u;function Rt(e){return null!==e&&Ot.test(e)}function It(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||Rt(e))}function Mt(e){return null!==e&&Tt.test(e)}function Dt(e){return null!==e&&Pt.test(e)}class jt{constructor(e,t,n){if(t<0||n<0||t+n>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=n,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new jt(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const n=this.offset+e,a=t-e;return new jt(this.data,n,a)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function Ft(e){let t;do{t=e.nextCodePoint()}while(null!==t&&Rt(t)||Mt(t));return t}function Bt(e,t){let n=Ft(e),a=Ft(t);if(null===a)return{offset:0,length:0};const i=e.offset+e.position-1;let s=e.offset+e.position;for(;;){if(null===n&&null===a)return{offset:i,length:s-i};if(null===a)return{offset:i,length:s-i};if(null===n)return null;if(0!==Ct.compare(n,a))return null;s=e.offset+e.position,n=Ft(e),a=Ft(t)}}function Ut(e,t){let n,a,i;do{a=e.position,n=e.nextCodePoint()}while(null!==n&&Rt(n));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){const t=n;a=e.position;do{i=e.position,n=e.nextCodePoint()}while(null!==n&&n!==t);return null===n&&a===i?null:e.slice(a,i)}do{if(i=e.position,t?.segmentCJKUnifieIdeographs&&Dt(n))break;n=e.nextCodePoint()}while(null!==n&&!It(n));return null===n&&a===i?null:e.slice(a,i)}function Ht(e){return Ut(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function Vt(e){return Ut(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Wt(e,t){const n=[];for(let a=Vt(e);null!==a;a=Vt(e)){let i=Bt(a,t.slice());null===i?(i=Bt(e.slice(a.offset),t.slice()),null===i||n.push(i)):n.push(i)}return n}function zt(e,t){return e.offset===t.offset&&e.length===t.length}const Gt=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e,...t){const n=jt.from(e),a=[];for(let e=Ht(n);null!==e;e=Ht(n)){const n=[];for(let a=0;a<t.length;++a){const i=t[a],s=Wt(jt.from(i),e);for(const e of s)n.push({text:i,range:e})}if(0===n.length)return null;a.push(...n.filter(((e,t,n)=>e.range.length>0&&n.findIndex((t=>zt(e.range,t.range)))===t)))}return a.length>0?a:null}(e,t):"boolean"!=typeof e||e;(0,n(1191).vt)((e=>({lastFilterState:"",lastFilteredUri:"",setLastState:(t,n)=>{e({lastFilterState:t,lastFilteredUri:n})}})));const Kt=(0,d.createContext)({setFilter:()=>{throw new Error("setFilter must be used within a FilterProvider")},filter:""}),Xt=(0,d.createContext)(void 0),Yt=({children:e})=>{const[t,n]=(0,d.useState)(!1),[a,i]=(0,d.useState)(new Set),s=(0,d.useCallback)(((e,t)=>{i((n=>{if(n.has(e)===t)return n;const a=new Set(n);return t?a.add(e):a.delete(e),a}))}),[]),o=a.size>0;return(0,A.jsx)(Xt.Provider,{value:{sectionMatch:t,setSectionMatch:n,sectionContainsMatch:o,setSectionFilterMatchQueryValue:s},children:e})},Jt=()=>{const e=(0,d.useContext)(Xt);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e},qt={section:"k6GFKyOKVR5Ruofj3aTQ",hidden:"afyQ2L5zTtlSDtn9WPjd"};function Zt({children:e,filterMatchQuery:t}){const{filter:n}=(0,d.useContext)(Kt),{setSectionMatch:a,sectionContainsMatch:i}=Jt(),s=Gt(n,t);(0,d.useEffect)((()=>{a(s)}),[s,a]);const o=!s&&!i;return(0,A.jsx)("div",{className:z()(qt.section,{[qt.hidden]:o}),children:e})}function $t(e){return(0,A.jsx)(Yt,{children:(0,A.jsx)(Zt,{...e})})}var Qt=n(8764),en=n(9438),tn=n.n(en);const nn={highlightedText:"M0E2Al6URHV3iyoDbvi_"};function an({searchWords:e,textToHighlight:t,...n}){return 0===e.length||e.every((e=>!e))?(0,A.jsx)(A.Fragment,{children:t}):(0,A.jsx)(tn(),{highlightClassName:nn.highlightedText,searchWords:e,textToHighlight:t,autoEscape:!0,...n})}function sn({children:e,className:t,semanticColor:n="textBase"}){const{filter:a}=(0,d.useContext)(Kt);return(0,A.jsx)(Qt.E,{as:"h2",variant:"bodyMediumBold",semanticColor:n,className:t,children:(0,A.jsx)(an,{searchWords:[a],textToHighlight:e})})}const on="wjxwX0Alq8DVfoBObi3R";function rn({onClick:e}){return(0,A.jsx)(T.n,{className:on,onClick:e,children:k.get("settings.restartApp")})}const ln=(e,t,n)=>{let a=`${e}:${t}`;switch(n){case ct:a+="@http";break;case ut:a+="@socks4";break;case mt:a+="@socks5"}return a},dn=({addr:e,mode:t="0",pass:n,user:a,setValue:i,restartContainer:s,fullWidth:o})=>{const r=(0,d.useRef)(null),l=(0,d.useRef)(null),c=(0,d.useRef)(null),u=(0,d.useRef)(null),m=Number(t),[p,g]=(0,d.useState)(""),[f,h]=(0,d.useState)(""),[b,E]=(0,d.useState)(!1);(0,d.useEffect)((()=>{const[t,n]=e?.split(/[:@]+/)||["",""];g(t),h(n),r.current&&(r.current.value=t),l.current&&(l.current.value=n)}),[e]),(0,d.useEffect)((()=>{u.current&&n&&(u.current.value=n.toString())}),[n]),(0,d.useEffect)((()=>{c.current&&a&&(c.current.value=a.toString())}),[a]);const w=(0,d.useCallback)((({target:e})=>{const t=ln(e.value,f,m);g(e.value),i("network.proxy.addr",t),E(!0)}),[m,f,i]),y=(0,d.useCallback)((({target:e})=>{const t=ln(p,e.value,m);h(e.value),i("network.proxy.addr",t),E(!0)}),[m,p,i]),v=(0,d.useCallback)((({target:e})=>{i("network.proxy.user",e.value),E(!0)}),[i]),S=(0,d.useCallback)((({target:e})=>{i("network.proxy.pass",e.value),E(!0)}),[i]),x=0!==m&&1!==m,N=m!==ut;return(0,A.jsxs)($t,{filterMatchQuery:k.get("desktop.settings.proxy.title"),children:[(0,A.jsx)(sn,{children:k.get("desktop.settings.proxy.title")}),(0,A.jsxs)("div",{className:z()(bt,o?Et:null),children:[(0,A.jsx)(St,{label:k.get("desktop.settings.proxy.type"),children:(0,A.jsx)(_t,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);i("network.proxy.mode",t),E(!0)},children:gt.map((({enumKey:e,enumValue:t})=>(0,A.jsx)("option",{value:t,"data-testid":e,children:pt[e]?pt[e].label():""},e)))})}),x?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:ht,children:[(0,A.jsx)(St,{label:k.get("desktop.settings.proxy.host"),children:(0,A.jsx)(vt,{id:"network.proxy.host",handleOnChange:w,placeHolder:k.get("desktop.settings.proxy.host"),inputRef:r})}),(0,A.jsx)(St,{label:k.get("desktop.settings.proxy.port"),children:(0,A.jsx)(vt,{id:"network.proxy.port",type:"number",handleOnChange:y,placeHolder:k.get("desktop.settings.proxy.port"),inputRef:l})})]}),(0,A.jsxs)("div",{className:N?ht:void 0,children:[(0,A.jsx)(St,{label:k.get("desktop.settings.proxy.user"),children:(0,A.jsx)(vt,{id:"network.proxy.user",handleOnChange:v,placeHolder:k.get("desktop.settings.proxy.user"),inputRef:c})}),N?(0,A.jsx)(St,{label:k.get("desktop.settings.proxy.pass"),children:(0,A.jsx)(vt,{id:"network.proxy.pass",handleOnChange:S,placeHolder:k.get("desktop.settings.proxy.pass"),type:"password",inputRef:u})}):null]})]}):null,b&&(0,A.jsx)("div",{children:(0,A.jsx)(rn,{onClick:s})})]})]})},cn="sp://proxy/v1/";function un(){const[e,t]=(0,d.useState)(null);(0,d.useEffect)((()=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:cn}),persistent:!1,onSuccess:n=>{const a=JSON.parse(n);200!==a.status&&t(new Error(`Failed to fetch proxy settings (status code: ${a.status})`));const i=JSON.parse(a.body);e({mode:i["network.proxy.mode"],address:i["network.proxy.addr"],username:i["network.proxy.user"],password:i["network.proxy.pass"]})},onFailure:(e,n)=>{t(e)}})}))})().then(t)}),[t]);return{settings:e,updateSettings:(0,d.useCallback)((e=>{(async function(e){return new Promise(((t,n)=>{const a={"network.proxy.mode":e.mode};[ct,ut,mt].includes(e.mode)&&(a["network.proxy.addr"]=e.address,a["network.proxy.user"]=e.username),[ct,mt].includes(e.mode)&&(a["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:cn,body:JSON.stringify(a)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{n(e)}})}))})(e).then((()=>t({...e})))}),[t])}}function mn(){return(0,d.useCallback)((()=>async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))}()),[])}const pn="BuzoTjBZd1UqCn6DmFJr",gn="HKamyJi9H31s99erfVyG",fn=()=>(0,A.jsxs)("div",{className:gn,children:[(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,A.jsx)("circle",{className:pn,cx:"-140",cy:"50",r:"32"}),(0,A.jsx)("circle",{className:pn,cx:"0",cy:"50",r:"32"}),(0,A.jsx)("circle",{className:pn,cx:"140",cy:"50",r:"32"})]}),(0,A.jsx)("span",{className:"hidden-visually",children:k.get("page.loading")})]}),hn=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const bn=()=>{const{settings:e,updateSettings:t}=un(),n=mn(),a=(0,d.useCallback)(((n,a)=>{if(null!==e&&function(e){return!!hn.includes(e)}(n)){const i=e;switch(n){case"network.proxy.mode":i.mode=a;break;case"network.proxy.addr":i.address=a;break;case"network.proxy.user":i.username=a;break;case"network.proxy.pass":i.password=a}t(i)}return Promise.resolve()}),[e,t]);return(0,A.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,A.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:k.get("desktop.login.PreferencesLink")}),null!==e?(0,A.jsx)(dn,{mode:e.mode,addr:e.address,user:e.username,pass:e.password,setValue:a,restartContainer:n,fullWidth:!0}):(0,A.jsx)(fn,{})]})};var En=n(1283);const wn=({toggleSettings:e,isOpen:t=!0})=>(0,A.jsx)(ge,{className:j,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:B,onRequestClose:e,"aria-label":k.get("desktop.login.PreferencesLink"),children:(0,A.jsxs)("div",{className:F,children:[(0,A.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,A.jsx)(bn,{}),(0,A.jsx)(En.H,{size:"medium",semanticColor:"textBase",onClick:e,children:k.get("close")})]})}),yn=()=>"undefined"==typeof window;function vn(e){return!yn()&&e instanceof HTMLElement}let Sn;const kn={subscribersByElement:new WeakMap,get resizeObserver(){return Sn||(Sn=new ResizeObserver((e=>{Array.isArray(e)&&e.forEach((t=>{const n={width:Math.round(t.contentRect.width),height:Math.round(t.contentRect.height)};(kn.subscribersByElement.get(t.target)??new Set).forEach((a=>{a(n,t,e)}))}))}))),Sn}};function An({onResize:e,refOrElement:t,observeOnly:n,observeOnMount:a=!1}){const i=(0,d.useRef)(e);i.current=e;const s=(0,d.useRef)(n);s.current=n;const o=(0,d.useRef)({width:-1,height:-1}),r=(0,d.useCallback)(((e,t,n)=>{if(!i.current)return;const a=o.current.width!==e.width,r=o.current.height!==e.height;("width"===s.current&&a||"height"===s.current&&r||!s.current&&(a||r))&&i.current(e,t,n),o.current.width=e.width,o.current.height=e.height}),[]),l=function({refOrElement:e,subscriber:t}){let n=null;const a=(0,d.useRef)(null),i=(0,d.useRef)(null),s=(0,d.useRef)(null),o=(0,d.useRef)(),r=(0,d.useRef)(t);r.current=t;const l=(0,d.useCallback)((()=>{let t=null;i.current?t=i.current:a.current?t=a.current:vn(e)&&(t=e),s.current!==t&&(o.current&&(o.current(),o.current=null),s.current=t,t&&r.current&&(o.current=r.current(t)))}),[e]),c=(0,d.useCallback)((e=>{i.current=e,l()}),[l]);return e&&!vn(e)&&(n=e),(0,d.useLayoutEffect)((()=>{n&&(a.current=n.current),l()}),[n,n?.current,l]),(0,d.useEffect)((()=>()=>{o?.current?.()}),[]),c}({refOrElement:t,subscriber:e=>(a&&r({width:e.offsetWidth,height:e.offsetHeight},null,[]),kn.subscribersByElement.has(e)||(kn.resizeObserver.observe(e),kn.subscribersByElement.set(e,new Set)),kn.subscribersByElement.get(e)?.add(r),()=>{kn.subscribersByElement.get(e)?.delete(r),0===kn.subscribersByElement.get(e)?.size&&(kn.resizeObserver.unobserve(e),kn.subscribersByElement.delete(e))})});return l}function xn(e,t,n){const[a,i]=(0,d.useState)(),s=Object.entries(e).sort(((e,t)=>t[1]-e[1]));return{ref:An({refOrElement:n,observeOnly:t,onResize:({[t]:e})=>{if(void 0===e)return;const n=s.find((([,t])=>e>=t)),o=n&&n[0];o&&o!==a&&i(o)}}),breakpoint:a}}var Nn=n(620);class Ln{subscriptionId=null;subscription=null;constructor(e,t){this._watchdogClient=e,this._url=t,this.subscribeToWatchdog()}subscribeToWatchdog(){this.subscription=this._watchdogClient.subscribe({url:this._url},(e=>{0!==e.id?(this.subscriptionId=e.id,this.scheduleNextPing()):this.subscription?.cancel()}))}async pingWatchdog(){this.subscriptionId&&(await this._watchdogClient.ping({id:this.subscriptionId}),this.scheduleNextPing())}scheduleNextPing(){setTimeout((()=>{this.pingWatchdog()}),6e4)}}class _n{constructor(e,t=0){this._output=e,this._offset=t,this._view=new DataView(this._output.buffer,this._output.byteOffset)}write(e){this._view.setInt32(this._offset,e.byteLength),this._output.set(e,this._offset+4),this._offset+=e.byteLength+4}}function Cn(e){const t=new TextEncoder,n=t.encode(e.service),a=t.encode(e.method),i=e.payload,s=new Uint8Array(4+n.byteLength+4+a.byteLength+4+i.byteLength),o=new _n(s);return o.write(n),o.write(a),o.write(i),s.buffer}class On extends Error{constructor(){super("aborted")}}Tn="EsperantoTransport",Symbol.for(Tn);var Tn;class Pn{constructor(e,t){this._onSend=e,this._onCancel=t}callSingle(e,{signal:t}={}){let n;return new Promise(((a,i)=>{const s=this.call(e,!1,a,i);t?.addEventListener("abort",n=()=>{s.cancel(),i(new On)})})).finally((()=>t?.removeEventListener("abort",n)))}callStream(e,t){return this.call(e,!0,t,(e=>{throw e}))}call(e,t,n,a){const i=this._onSend({request:Cn(e),persistent:t,onSuccess:t=>{t instanceof ArrayBuffer?n(new Uint8Array(t)):a(new Error(`${e.service}.${e.method} failed with invalid payload!`))},onFailure:(t,n)=>{a(new Error(`${e.service}.${e.method} failed with code: ${n}`))}}),s=this._onCancel;return{cancel(){s(i)}}}}async function Rn(){return new Promise(((e,t)=>{const a=JSON.stringify({type:"view_loaded",name:"/loginUI",innerWidth:window.innerWidth,innerHeight:window.innerHeight});window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:a}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}});const i=function(){const e=n.g.window||{};return new Pn(e.executeEsperantoCall,e.cancelEsperantoCall)}();var s,o;s=i,o="/loginUI",new Ln(new Nn.NH(s),o)}))}const In=()=>{const{logger:e,pageviewActionHash:t}=Me();(0,d.useEffect)((()=>{Rn()}),[]),(0,d.useEffect)((()=>{t&&e.logPageView({page:"auth-on-web",actionHash:t})}),[e,t]);const n=(0,d.useRef)(!0),a=(0,d.useRef)(!0),i=(0,d.useRef)(!0),s=(0,d.useRef)(null),[o,r]=(0,d.useState)(!1),[l,c]=(0,d.useState)(0),{breakpoint:u}=xn({[P.SMALL]:0,[P.MEDIUM]:1024,[P.LARGE]:1600},"width",s);const{breakpoint:m}=function(e,t){return xn(e,"height",t)}({[P.SMALL]:0,[P.MEDIUM]:800,[P.LARGE]:1200},s),p=(0,d.useCallback)((()=>{r(!o)}),[o]),g=rt.includes(k.getLocaleForTranslation().valueOf())?k.getLocaleForTranslation().valueOf():"en",f=[{backgroundImage:(0,A.jsx)(dt,{fadeInRef:n}),titleStrings:[k.get("desktop-auth.login.millions-of-songs"),k.get("desktop-auth.login.free-on-spotify")],titleVariants:{[P.SMALL]:"brio",[P.MEDIUM]:"forte",[P.LARGE]:"bass"}},{backgroundImage:(0,A.jsx)($e,{imageLocale:g,fadeInRef:a}),titleStrings:[k.get("desktop-auth.login.collect-and-create")],titleVariants:{[P.SMALL]:"alto",[P.MEDIUM]:"brio",[P.LARGE]:"forte"}},{backgroundImage:(0,A.jsx)(Qe,{imageLocale:g,fadeInRef:i}),titleStrings:[k.get("desktop-auth.login.perfect-work-environment")],titleVariants:{[P.SMALL]:"alto",[P.MEDIUM]:"brio",[P.LARGE]:"forte"}}];return(0,A.jsx)(C.K,{children:(0,A.jsx)("div",{className:N,ref:s,"data-testid":"new-login",children:(0,A.jsxs)("main",{className:L,children:[(0,A.jsxs)("div",{className:_,children:[(0,A.jsx)(x,{toggleSettings:p}),(0,A.jsx)(Fe,{titleStrings:f[l].titleStrings,titleVariants:f[l].titleVariants,widthBreakpoint:u,heightBreakpoint:m})]}),(0,A.jsx)(Xe,{nrSteps:f.length,atStep:l,navigate:c,backgroundImage:f[l].backgroundImage}),o&&(0,A.jsx)(wn,{toggleSettings:p})]})})})},Mn="_4sAimuD_zstEpQjSRHql",Dn="Lo8UOyZncZeauxzo1zce",jn="Z1lRkuK3aAblyTU6eakJ",Fn="N1wj4kvAondUABJthoPs",Bn="jhwMfVBB2fCPloJsLNv6",Un=function({showSettings:e}){const{logger:t,pageviewActionHash:n}=Me();(0,d.useEffect)((()=>{n&&t.logPageView({page:"auth-on-web",actionHash:n})}),[t,n]);const{handleLoginOrSignupClick:a,handleTryAgainClick:i,isWaitingForBrowser:s,isSigningUp:o,errorMessage:r}=je();return(0,A.jsx)("main",{"data-testid":"login",children:s?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(O.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:Mn,children:o?k.get("desktop-auth.login.go-to-browser-signup"):k.get("desktop-auth.login.go-to-browser-login")}),(0,A.jsxs)("button",{className:jn,onClick:i,children:[(0,A.jsx)(O.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:k.get("desktop-auth.login.not-seeing-browser")})," ",(0,A.jsx)(O.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:k.get("desktop-auth.login.try-again")})]})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(O.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:Mn,children:[k.get("desktop-auth.login.millions-of-songs"),(0,A.jsx)("br",{}),k.get("desktop-auth.login.free-on-spotify")]}),r&&(0,A.jsxs)("div",{className:Fn,role:"alert",onClick:t=>{if(t.currentTarget.getAttribute("data-action")){"showSettings"===t.currentTarget.getAttribute("data-action")&&e()}},"aria-live":"assertive",children:[(0,A.jsx)(D.b,{className:Bn}),(0,A.jsx)("span",{dangerouslySetInnerHTML:{__html:r}})]}),(0,A.jsx)(c.$,{onClick:()=>{a(!1)},iconTrailing:u.H,"data-testid":"login-button",children:k.get("desktop-auth.login.log-in-with-browser")}),(0,A.jsxs)("button",{className:Dn,onClick:()=>{a(!0)},children:[(0,A.jsx)(O.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:k.get("desktop-auth.login.new-to-spotify")}),(0,A.jsx)(O.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:k.get("desktop-auth.login.sign-up-with-browser")}),(0,A.jsx)(u.H,{iconSize:16,semanticColor:"textBase"})]})]})})},Hn=({mode:e,showLogin:t,showSettings:n})=>{const{logger:a}=Me();return(0,A.jsx)("footer",{className:"Footer",role:"contentinfo",children:"settings"===e?(0,A.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{a.logAction({page:"settings",action_type:"click",action_intent:"back-to-login"}),t()},"data-ta-id":"login-footer-settings-back-to-login",children:k.get("desktop.login.Back")}):(0,A.jsx)("a",{className:"Footer__link",href:"#",onClick:()=>{a.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"}),n()},"data-ta-id":"login-footer-settings",children:k.get("desktop.login.PreferencesLink")})})},Vn=()=>(0,A.jsxs)("header",{className:"Header",children:[(0,A.jsx)("h1",{className:"hidden-visually",children:"Spotify"}),(0,A.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]});var Wn=n(5794),zn=n(594);const Gn=({initialMode:e="login"})=>{const[t,n]=(0,d.useState)(e),a=function(e){const t=(0,d.useRef)();return(0,d.useEffect)((()=>{t.current=e}),[e]),t.current}(t),{logger:i}=Me();(0,d.useEffect)((()=>{Rn()}),[]),(0,d.useEffect)((()=>{"login"===t?i.logPageView({page:"login"}):"settings"===t&&i.logPageView({page:"login/settings"})}),[t,i]);const s=a?`__${t} __${a}-to-${t}`:"",o=()=>n("settings");return(0,A.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":t,children:[(0,A.jsxs)("div",{className:"fakeWebPlayer",children:[(0,A.jsx)("aside",{}),(0,A.jsxs)("footer",{children:[(0,A.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,A.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,A.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,A.jsx)("main",{children:(0,A.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,A.jsx)("div",{className:`App__content ${s}`,children:(0,A.jsx)(zn.A,{mode:"in-out",children:(0,A.jsx)(Wn.A,{timeout:{appear:0,enter:0,exit:650},children:(0,A.jsxs)("div",{className:`App__modal ${s}`,children:[(0,A.jsx)(Vn,{}),"settings"===t?(0,A.jsx)(bn,{}):(0,A.jsx)(Un,{showSettings:o}),(0,A.jsx)(Hn,{mode:t,showLogin:()=>n("login"),showSettings:o})]})},s)})})]},"main1")},Kn=({initialMode:e})=>{const t=(0,s.NC)(l);return(0,A.jsx)(A.Fragment,{children:t?(0,A.jsx)(In,{}):(0,A.jsx)(Gn,{initialMode:e})})};var Xn=n(8875),Yn=n(2083),Jn=n(1507);let qn=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),Zn=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});const $n={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function Qn(e,t){var n;n=Object.values($n),document.documentElement.classList.remove(...n);const a=[];"Microsoft Edge"===At().parse(window.navigator.userAgent).browser.name?a.push($n.BROWSER_EDGE):xt()&&a.push($n.BROWSER_SAFARI),t===Zn.macOS?a.push($n.OS_MACOS):t===Zn.Windows?a.push($n.OS_WINDOWS):t===Zn.Linux?a.push($n.OS_LINUX):t===Zn.ChromeOS&&a.push($n.OS_CHROMEOS),e===qn.Desktop?a.push($n.CONTAINER_DESKTOP):e===qn.PWA?a.push($n.CONTAINER_PWA):e===qn.Web&&a.push($n.CONTAINER_WEB),function(e){e.forEach((e=>{document.documentElement.classList.add(e)}))}(a)}var ea=n(9947);const ta=(e,t)=>{const n=e.event_sender_context_information;return[(0,ea.QI)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,ea.ks)(t),(0,ea.xB)(n.installation_id),(0,ea.es)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]},na=/Spotify\/(?<version>.+)\s/;function aa(){if(!!window.navigator.userAgent.match(na))return qn.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,n="Windows"in window;return e&&(t||n)?qn.PWA:qn.Web}var ia=n(8165);const sa=/Spotify\/(?<version>.+)\s/;function oa(){const e=window.navigator.userAgent.match(sa);return e?.groups?.version||"unknown"}const ra=Object.values(a);(0,Jn.Cd)(),async function(){for(const e of[window.__spotify.locale,y.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return void k.initialize({localeForTranslation:e,localeForFormatting:navigator.language,translations:t})}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")}().then((async function(){Qn(aa(),function(){const e=At().parse(window.navigator.userAgent).os.name;return"macOS"===e?Zn.macOS:"Windows"===e?Zn.Windows:"Linux"===e?Zn.Linux:"Chrome OS"===e?Zn.ChromeOS:Zn.Other}());const e=function(){const e=(0,ia.ZA)({providers:{endpoints:(0,ia.u6)(),token:()=>Promise.reject()}});return e.connect(),e}(),t="65b708073fc0480ea92a077233ca87bd",n=((e,t,{clientId:n,ownerProvider:a,storagePrefix:i,useInMemoryStorage:s,useOptimizedESS2NA:o})=>(0,ea.kE)({transport:t,suppressPersist:!1,context:ta(e,n),storage:s?{adapter:new ea.ty,flushStrategy:{kind:ea.aN.IMMEDIATE}}:void 0,storagePrefix:i,ownerProvider:a,useOptimizedESS2NA:o}))(window.__spotify,e,{clientId:t,ownerProvider:()=>null,storagePrefix:`${t}-loginui`,useInMemoryStorage:!0,useOptimizedESS2NA:!1}),a=window.__spotify&&window.__spotify.locale;a&&document.documentElement.setAttribute("lang",a);const o=Yn.HZ.addMiddleware(Xn.F);(0,i.H)(document.getElementById("main")).render((0,A.jsx)(s.PE,{resolver:o,context:{username:null},options:{clientId:"client-desktop-ui-app-login",properties:ra,timeout:1e4,transport:e,eventSender:n,version:oa(),sp_t_cookie:window.__spotify.event_sender_context_information?.installation_id},children:(0,A.jsx)(Ie,{eventSender:n,children:(0,A.jsx)(d.Suspense,{fallback:null,children:(0,A.jsx)(Kn,{})})})})),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,Jn.Lj)("UI init phase is done for login")}))},4758:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=t,e=[],a.O=(t,n,i,s)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,i,s]=e[c],r=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(r=!1,s<o&&(o=s));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,i,s]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={966:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var i,s,[o,r,l]=n,d=0;if(o.some((t=>0!==e[t]))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var c=l(a)}for(t&&t(n);d<o.length;d++)s=o[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var i=a.O(void 0,[452],(()=>a(8521)));i=a.O(i)})();
//# sourceMappingURL=login.js.map