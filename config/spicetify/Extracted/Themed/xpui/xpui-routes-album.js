"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962],{69525:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Ge});var i=s(79474),r=s(99754),t=s(83648),l=s(98764),n=s(55138),o=s(3265),c=s(22215),u=s(42751),d=s(14056),m=s(13650),h=s(87882),g=s(88291),b=s(84387),x=s(64647),p=s(27699),j=s(39517),y=s(82089),f=s(92585),k=s(33085),C=s(21931),v=s(3775),w=s(16990);const A=new v.l("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null);var R=s(48763),M=s(70075),U=s(13274);const N=({albumName:e,albumURI:a})=>{const{data:s}=(i={uri:a},r={gcTime:5*w.i},(0,w.I)(A,i,r));var i,r;const t=s?.albumUnion&&"merch"in s.albumUnion?s?.albumUnion?.merch?.items:[];return t&&t?.length>0?(0,U.jsx)("div",{className:"contentSpacing",children:(0,U.jsx)("div",{className:M.A.albumMerch,children:(0,U.jsx)(R.q,{id:e,uri:a,merchItems:t,merchVariant:"Album page merch items"})})}):null};var P=s(70746),I=s(50823),L=s(79130),S=s(95402),B=s(8309),D=s(88958),F=s(26271),z=s(40643),T=s(67302),_=s(15552),V=s(29117),E=s(42976),O=s(6950),W=s(96343),J=s(36919),K=s(46545),q=s(67447),H=s(91303),$=s(19498),G=s(31350),X=s(11283),Y=s(22269),Z=s(72423),Q=s(24577);const ee="bhvAemcPYUmxOdBe1mVi",ae="hmgHdasWrZaA9tiXVw_u",se="RmbxUFLb4j9KmgftJyk1",ie="boNCdFnbh9y0PBweIDUt",re="LfQtKa295FPgk8VuZRfD",te="Oytey9nANMtSDKSmZpJ6",le=i.memo((function(e){const{images:a,title:s,isOpen:r,onClose:t}=e,l=(0,i.useMemo)((()=>(0,Q.g)(a,{desiredSize:1e4})),[a]);return l?(0,U.jsx)(Y.A,{className:ee,isOpen:r,onRequestClose:t,animation:{modal:{base:ie,afterOpen:re,beforeClose:te}},animated:!0,children:(0,U.jsxs)("div",{style:{"--image-width":`${l.width}px`,"--image-height":`${l.height}px`},className:ae,children:[(0,U.jsx)(Z._,{loading:"eager",alt:s,src:l.url,className:se}),(0,U.jsx)(X.H,{onClick:t,semanticColor:"textBase",children:d.Ru.get("web-player.cover-art-modal.close")})]})}):null}));var ne=s(80499),oe=s(34762),ce=s(8468),ue=s(65325),de=s(87465),me=s(95063),he=s(66615),ge=s(33037),be=s(64658),xe=s(82548),pe=s(97997),je=s(5513),ye=s(82924),fe=s(81643),ke=s(63492),Ce=s(25103),ve=s(36833),we=s(36471),Ae=s(30939),Re=s(62166),Me=s(39658),Ue=s(67976),Ne=s(71132);const Pe="m2grVeuHNwfGLVpaSBle",Ie="G7OjWzvskF402kPsqa63",Le="T7nBFbNoLnHw4DVupvk8",Se="b5UUlVvADHdE3mY9J715",Be="GLKjAw6oM_egXztVxKKB",De="MGZ4oJmGVPrWsx5cT5hN",Fe="DmrVJc9vWCbjU_DuRvfe",ze="yLmA5f7x65en2MdKbIhX",Te=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:r,spec:t,logger:l,backgroundColor:n,name:o,artists:c,isPlayable:u,sharingInfo:m}){const h=(0,we.W)(),g=(0,Ae.n)(),x=(0,he.t)(),p=(0,i.useMemo)((()=>t.actionBarFactory()),[t]),[j,y]=(0,ge.A)(e),k=(0,i.useCallback)((()=>{const i=(0,Re.$I)({isPlaying:s,isActive:r,spec:p.playButtonFactory(),logger:l,uri:e});a({loggingParams:i})}),[s,r,a,p,l,e]),C=(0,i.useCallback)((async()=>{let a;const s=p.saveButtonFactory();a=j?s.hitDislike({itemToBeDisliked:e}):s.hitLike({itemToBeLiked:e}),l.logInteraction(a),h({targetUri:e,intent:j?"unsave":"save",type:"click"});try{await y(!j)}catch{}}),[h,e,j,y,p,l]),v=(0,Ne.X)(),w=(0,ve.j)();return(0,U.jsx)(pe.E,{backgroundColor:n,children:(0,U.jsxs)(je.S,{children:[(0,U.jsx)(f.D,{onClick:k,disabled:!u,isPlaying:s,size:w,uri:e}),v&&(0,U.jsx)(be.r,{spec:p,children:(0,U.jsx)(Ue.Y,{entityName:o,contextUri:e,activationPlacement:"bottomEnd",size:w})}),(0,U.jsx)(Ce.h,{uri:e,action:Me.no.SAVE_ALBUM,children:(0,U.jsx)(ye.M,{isAdded:!!j,onClick:C,disabled:!g&&!x?.getCapabilities().canModifyOffline,size:w})}),(0,U.jsx)(fe.f,{uri:e,isFollowing:!!j,onClick:(a,s)=>(0,Re.Qv)(s,p.downloadButtonFactory(),l,e),onFollow:C,size:w}),(0,U.jsx)(ue.b,{onShow:()=>(0,Re.R2)(p,l),menu:(0,U.jsx)(b.h,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:m}),children:(0,U.jsx)(ke.e,{label:d.Ru.get("more.label.context",o),size:w})}),(0,U.jsx)("div",{className:ze,children:(0,U.jsx)(de.u,{property:xe.mA,renderNewExperience:()=>(0,U.jsx)(me.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var _e=s(79862),Ve=s(83856),Ee=s(20273),Oe=s(53603);const We=({releases:e})=>(0,U.jsx)(Ee.W,{children:e.map((e=>(0,U.jsx)(Oe.D,{role:"menuitem",to:(0,Ve.o_)(e.uri).toURLPath(!0),children:e.name},e.uri)))}),Je=864e5,Ke=365.25*Je;const qe=i.lazy((()=>s.e(7753).then(s.bind(s,17753))));function He(e){switch(e){case oe._.Single:return d.Ru.get("single");case oe._.Ep:return d.Ru.get("ep");case oe._.Compilation:return d.Ru.get("compilation");case oe._.Audiobook:return d.Ru.get("card.tag.audiobook");case oe._.Album:default:return d.Ru.get("album")}}const $e=({uri:e,album:a})=>{const s=(0,t.zy)(),{spec:y,logger:v,UBIFragment:w}=(0,T.r)(u.E,{data:{uri:e}}),A=(0,i.useMemo)((()=>y.trackListFactory()),[y]),R=(0,i.useMemo)((()=>y.moreByArtistShelfFactory()),[y]),M=a.moreAlbumsByArtist,B=parseInt(new URLSearchParams((0,t.zy)().search).get("index")||"0",10),D=(0,I.J)(e),{usePlayContextItem:X,togglePlay:Y,isPlaying:Z,isActive:Q}=(0,F.P)({uri:D},{featureIdentifier:"album"}),ee=(0,i.useCallback)(((e,a)=>{if(y){const e=y.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});v.logInteraction(e)}}),[v,y]),{isOpen:ae,openModal:se,closeModal:ie}=(()=>{const[e,a]=(0,i.useState)(!1);return{isOpen:e,openModal:(0,i.useCallback)((()=>a(!0)),[]),closeModal:(0,i.useCallback)((()=>a(!1)),[])}})(),re=(0,c.NC)($.WJ1,{loadingValue:!1})?{onClick:se,ariaLabel:d.Ru.get("web-player.album.open_coverart_modal")}:{},te=(0,i.useCallback)((()=>new URLSearchParams(s.search.slice(1)).get("highlight")||""),[s.search]),ne=a.uri,oe=a.name,ue=a.albumType,de=a.release?.date,me=a.release?.precision,he=a.nrTracks,ge=a.images,be=a.extractedColors?.colorRaw.hex,xe=a.artists,pe=a.isPlayable,je=a.isCatalogueRestricted,ye=a.copyright.items,fe=a.courtesyLine,ke=a.duration.durationMs,Ce=a.duration.isEstimate,ve=te(),we=(0,r.d4)(G.Ht),Ae=we.overrides?.locale??d.Ru.getLocaleForTranslation(),Re=(0,H.W)({uri:e,type:"locale"}),Me=(0,z.qc)({albumName:oe,albumType:ue,albumArtists:xe.map((e=>e.name)).join(d.Ru.getSeparator()),shouldLocalize:Re,i18n:d.Ru});(0,L.z)(be||null);const Ue=function(e){return(0,i.useMemo)((()=>{if(!e?.date)return null;if("day"===e.precision){const a=new Date(e.date),s=(new Date).getTime()-a.getTime(),i=s%Ke;return i<3.5*Je||i>312552e5?Math.round(s/Ke):null}return null}),[e])}(a.release),{isCompactMode:Ne}=(0,P.a)(),ze=(0,C.t)();return(0,U.jsxs)("section",{className:Pe,"data-testid":"album-page",children:[(0,U.jsx)(x.Q,{children:Me}),null!==Ue?(0,U.jsx)(i.Suspense,{fallback:null,children:(0,U.jsx)(qe,{colorLight:a?.extractedColors?.colorLight.hex,colorDark:a?.extractedColors?.colorDark.hex,name:oe,years:Ue})}):null,(0,U.jsxs)(V.z,{backgroundColor:be,children:[(0,U.jsxs)(p.h,{children:[(0,U.jsx)(f.D,{size:"medium",onClick:()=>Y(),disabled:!pe,isPlaying:Z,uri:e}),(0,U.jsx)(j.X,{text:oe,dragUri:e,dragLabel:oe})]}),(0,U.jsx)(g.h,{menu:(0,U.jsx)(b.h,{uri:a.uri,artistUri:xe?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,U.jsx)(E.K,{dragUri:ne,images:ge,name:oe,placeholderType:"album",...re})}),(0,U.jsxs)(O.Y,{children:[(0,U.jsx)(J.B,{children:He(ue)}),(0,U.jsx)(g.h,{menu:(0,U.jsx)(b.h,{uri:a.uri,artistUri:xe?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,U.jsx)(K.mm,{dragUri:a.uri,dragLabel:a.name,scaleAtMinWidth:K.tw,children:oe})}),(0,U.jsx)(W.t,{creators:xe,onCreatorClick:ee,releaseDate:de,releaseDatePrecision:me,totalItems:he,durationMilliseconds:ke,isEstimatedDuration:Ce,hasTracks:!0})]})]}),(0,U.jsx)(Te,{backgroundColor:be,uri:e,togglePlay:Y,isPlaying:Z,isActive:Q,spec:y,logger:v,sharingInfo:a.sharingInfo,name:a.name,artists:a.artists,isPlayable:a.isPlayable}),je?(0,U.jsxs)("div",{className:Ie,children:[(0,U.jsx)(l.E,{as:"h2",variant:"bodyMediumBold",className:Le,children:d.Ru.get("windowed.product-album-header")}),(0,U.jsx)("div",{className:Se,children:d.Ru.get("windowed.product-album-description")})]}):null,(0,U.jsxs)("div",{className:"contentSpacing",children:[(0,U.jsx)(w,{spec:A,children:(0,U.jsx)(k.a,{columns:ze,children:(0,U.jsx)(_e.F,{ariaLabel:oe,nrTracks:(0,ce.Y)(a.discs)?a.discs.totalCount+he:he,discs:a.discs,albumUri:ne,highlightUri:ve,scrollToIndex:B,usePlayContextItem:X,initalTracks:a.items,isCompactMode:Ne})})}),(0,U.jsxs)("div",{className:Fe,children:[(0,U.jsxs)("div",{children:[de&&(0,U.jsx)(l.E,{as:"p",variant:"bodySmall",children:(0,_.rh)((0,_.ad)(de),Ae,{year:"numeric",month:"long",day:"numeric"},me)}),(0,U.jsx)(S.Z,{copyrights:ye,courtesyLine:fe})]}),a.releases.items.length>0&&(0,U.jsx)(h.t,{menu:(0,U.jsx)(We,{releases:a.releases.items}),children:(e,s,i)=>(0,U.jsxs)("button",{ref:i,className:De,type:"button",onClick:s,children:[(0,U.jsx)(l.E,{variant:"bodySmall",children:d.Ru.get("album-page.more-releases",a.releases.items.length)}),e?(0,U.jsx)(n.J,{size:"small"}):(0,U.jsx)(o.y,{size:"small"})]})})]})]}),(0,U.jsx)(N,{albumName:oe,albumURI:ne}),(0,U.jsx)(U.Fragment,{children:M?.length>0&&(0,U.jsx)("div",{className:"contentSpacing",children:(0,U.jsx)(w,{spec:R,children:(0,U.jsx)(q.p,{index:0,id:"more-albums",className:Be,title:d.Ru.get("album-page.more-by-artist",xe?.[0]?.name),total:M.length,seeAllUri:`${xe?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:d.Ru.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:M.map(((e,a)=>(0,U.jsx)(m.R,{index:a,artists:xe,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})})}),(0,U.jsx)(le,{title:Me,isOpen:ae,onClose:ie,images:ge})]})},Ge=i.memo((function(){const{albumId:e}=(0,t.g)(),a=`spotify:album:${e}`,{loading:s,error:i,data:r,canLoadOffline:l}=(0,ne.$)(a);return s||!r?(0,U.jsx)(y.A,{hasError:null!==i,loadOffline:l,errorMessage:d.Ru.get("error.not_found.title.album")}):(0,U.jsx)(D.P,{surface:B.u.ALBUM,uris:[a],children:(0,U.jsx)($e,{uri:a,album:r})})}))}}]);
//# sourceMappingURL=xpui-routes-album.js.map