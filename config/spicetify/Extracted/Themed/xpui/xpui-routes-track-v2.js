"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{8878:(e,a,s)=>{s.d(a,{u:()=>y});var i=s(97500),r=s.n(i),t=s(98678),l=s(73956),n=s(14494),c=s(36471),o=s(54745),d=s(53206),u=s(18039),m=s(13274);const y=({uri:e,src:a,playAriaLabel:s,onClick:i,isPlaying:y,isActive:h,isLocked:p,isEpisode:g,isVideo:x,spec:b})=>{const j=(0,c.W)(),k=(0,n.s)(),v=(0,t.YQ)((a=>{let s;if(j({type:"click",intent:y?"pause":"play"}),b){const a=b.playbackButtonFactory();let i;i=h&&y?a.hitPause({itemToBePaused:e}):h&&!y?a.hitResume({itemToBeResumed:e}):a.hitPlay({itemToBePlayed:e}),s=k.logInteraction(i)}i(a,s)}),l.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(d.e,{src:a,isEpisode:g,isVideo:x}),(0,m.jsx)(o.x,{className:r()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:v,isPlaying:y,isLocked:p,playAriaLabel:s})]})}},24046:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Js});var i=s(79474),r=s(97500),t=s.n(r),l=s(83648),n=s(98764),c=s(98196),o=s(11283),d=s(1399),u=s(83856),m=s(14056),y=s(88291),h=s(41955),p=s(27699),g=s(39517),x=s(82089),b=s(92585),j=s(62166),k=s(95402),v=s(30980);const L="o2TlnuNKxRO5RnB9BpHB",R="q0Ke_aAvTcc4dO4wCHQt",f="UlKUfS_GcROZmofuafOW",I="I5LORTI1u3A6VoUvRCBf",N="TS85Qkpioa31wR0p4kzT",w="yL1DLXBc05CR_ACv_NhA",C="k5kRkUyoz9znqg_SGOVQ";var P=s(87344),A=s(61681),U=s(9440),T=s(94009),E=s(19448),S=s(68304),_=s(13274);let F=function(e){return e.SMALL="small",e.LARGE="large",e}({});const O=({art:e,disabled:a=!1,LinkComponent:s,name:i,size:r=F.SMALL,type:n,uri:c})=>{const o=e?[e]:[],d=r===F.SMALL?(0,P.C)(n):function(e){switch(e){case S.s.SINGLE:return m.Ru.get("track-page.from-the-single");case S.s.EP:return m.Ru.get("track-page.from-the-ep");case S.s.COMPILATION:return m.Ru.get("track-page.from-the-compilation");case S.s.ALBUM:default:return m.Ru.get("track-page.from-the-album")}}(n),y=(0,l.Zp)();return(0,_.jsxs)("div",{className:t()(L,{[f]:r===F.SMALL,[R]:a}),children:[(0,_.jsx)("div",{className:I,children:(0,_.jsx)(A.b,{images:o,size:T.Qe.SIZE_80,title:i,type:U.c.ALBUM})}),(0,_.jsxs)("div",{className:N,children:[(0,_.jsx)(E.Z,{variant:r===F.SMALL?"mestoBold":"finale",children:d}),(0,_.jsx)(s,{to:c,children:(0,_.jsx)(E.Z,{as:"div",className:w,variant:"balladBold",dir:"auto",children:i})})]}),(0,_.jsx)("div",{onClick:()=>{y((0,u.o_)(c).toURLPath(!0))},className:C})]})};var B=s(8309),M=s(88958),D=s(26271),V=s(40643),q=s(45640);let Z=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const G=(e,a)=>{switch(a.type){case"LYRICS_LOADING":return{...e,[a.uri]:{status:Z.LOADING}};case"LYRICS_LOADED":return{...e,[a.uri]:{status:Z.LOADED,data:a.response}};case"LYRICS_ERROR":return{...e,[a.uri]:{status:Z.UNAVAILABLE}};default:return(0,q.d)(a,`Unhandled lyrics action with type: ${a.type}`)}};var z=s(21361),$=s(88724);var W=s(68013);const X=async({trackUri:e,api:a,imageForLyricsRequest:s,isPlayable:i})=>{if(!i)return{hasLyrics:!1};const r=(0,u.o_)(e);try{const e=await(async(e,a,s)=>(await e.build().withHost($.Hj).withPath(`/track/${encodeURIComponent(a)}/image/${encodeURIComponent(s)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(a||z.n.getInstance(),r.id,s||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof W.O&&404===e.status)return{hasLyrics:!1};throw e}},Y={status:Z.LOADING},Q={status:Z.UNAVAILABLE},H=i.createContext(void 0),J=({children:e,initialState:a={}})=>{const s=i.useReducer(G,a);return(0,_.jsx)(H.Provider,{value:s,children:e})},K=({uri:e,isNotPermittedToFetchLyrics:a,imageForLyricsRequest:s,isPlayable:r})=>{const t=i.useContext(H);if(void 0===t)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[l,n]=t,c=e?l[e]:null;return(0,i.useEffect)((()=>{a||!c&&e&&(n({type:"LYRICS_LOADING",uri:e}),X({trackUri:e,imageForLyricsRequest:s,isPlayable:r}).then((a=>{n({type:"LYRICS_LOADED",uri:e,response:a})})).catch((()=>{n({type:"LYRICS_ERROR",uri:e})})))}),[n,s,a,r,c,e]),e&&(0,u.U_)(e)&&!a&&r?c||Y:Q};var ee=s(67302),ae=s(7452),se=s(70968),ie=s(15552),re=s(64647),te=s(29117),le=s(42976),ne=s(6950),ce=s(96343),oe=s(46545),de=s(10454),ue=s(80559),me=s(35828),ye=s(3775),he=s(16990);const pe=new ye.l("internalLinkRecommenderTrack","query","8c3372e8c118eafd4e044b843473266ff1c7b9deb03f730080cfcad8646829e7",null);var ge=s(13480),xe=s(32334),be=s(97374),je=s(95999),ke=s(11437),ve=s(26903),Le=s(47469),Re=s(41791),fe=s(7283),Ie=s(83525),Ne=s(18836),we=s(28078),Ce=s(16482),Pe=s(8878),Ae=s(64652),Ue=s(49798),Te=s(96042),Ee=s(9138),Se=s(77962),_e=s(92758),Fe=s(20502),Oe=s(38276),Be=s(92633);const Me="Z9Dr8PkXFtlO8KnnDcxp",De="Bm0LUMlhVIcF5qusgdUP",Ve="GIyB7JDkRwjtVL6PSBbg",qe="whTIka0YYAkqhqrs26Wa",Ze=i.memo((function({uri:e,name:a,imgUrl:s,artists:i,isExplicit:r,index:t,albumUri:l,contextUri:n,isPlayable:c,isMOGEFRestricted:o,totalMilliseconds:d,playcount:u}){const{isActive:p,isPlaying:g,triggerPlay:x,togglePlay:b}=(0,D.P)({uri:e},{featureIdentifier:"ilr"}),j=(0,ke.T)(e),k=(0,fe.g)(e,c),v=i.map((e=>e.name)).join(m.Ru.getSeparator()),{badges:L,hasBadges:R}=(0,ve.b)({isMOGEFRestricted:o,downloadAvailability:j,isExplicit:r}),f=i.map((e=>e.name)).join(m.Ru.getSeparator()),I=(0,Re.c)();return(0,_.jsx)(je.pZ,{value:"row",index:t,children:(0,_.jsx)(y.h,{menu:(0,_.jsx)(h.P,{uri:e,albumUri:l,artists:i,contextUri:n}),children:(0,_.jsxs)(Be.w,{uri:e,contextUri:n,isPlayable:k,onTriggerPlay:(e,a)=>{x({loggingParams:a})},isActive:p,index:t,ariaRowIndex:t,dragMetadata:{name:a,createdBy:v},children:[(0,_.jsxs)(Se.U,{ariaColIndex:0,children:[(0,_.jsx)(Pe.u,{uri:e,src:s,onClick:(e,a)=>{b({loggingParams:a})},isLocked:!1,isPlaying:g,isActive:p,playAriaLabel:m.Ru.get("tracklist.a11y.play",a,v)}),(0,_.jsxs)(Ae.l,{children:[(0,_.jsx)(Ie.R,{uri:e,enabled:I,className:Ve,children:(0,_.jsx)(Oe.p,{titleText:a,children:a})}),R&&(0,_.jsxs)(we.P,{children:[L.download&&(0,_.jsx)(ge._,{}),L.explicit&&(0,_.jsx)(xe.g,{}),L.nineteen&&(0,_.jsx)(be.q,{className:qe,size:16})]}),(0,_.jsx)(Fe.p,{children:(0,_.jsx)(Ne.l,{artists:i})})]})]}),(0,_.jsx)(_e.o,{ariaColIndex:1,children:(0,_.jsx)(Te.Y,{playcount:u})}),(0,_.jsxs)(Ee.l,{ariaColIndex:2,children:[(0,_.jsx)(Le.d,{uri:e}),(0,_.jsx)(Ce.P,{duration:d}),(0,_.jsx)(Ue.Y,{menu:(0,_.jsx)(h.P,{uri:e,albumUri:l,contextUri:n,artists:i}),label:m.Ru.get("more.label.track",a,f)})]})]})})})}),((e,a)=>e.uri===a.uri&&e.index===a.index));var Ge=s(38076),ze=s(24290),$e=s(94544),We=s(13411);const Xe=i.memo((function({subtitle:e,uri:a}){const{data:s}=(r={uri:a,strategy:me.N0.ContentOnly},(0,he.I)(pe,r,t));var r,t;const l=s?.seoRecommended.items,o=(0,i.useMemo)((()=>l?.slice(0,Math.min(l.length,5))),[l]),d=(0,i.useCallback)((e=>({uri:"uri"in e.data?e.data.uri:""})),[]),u=(0,i.useMemo)((()=>[We.$.TITLE_AND_ARTIST,We.$.ALBUM,We.$.DURATION]),[]),y=(0,i.useCallback)(((e,s)=>{if(!(e=>{return a=e,"NotFound"!==a?.__typename&&"GenericError"!==a?.__typename&&"Track"===e.__typename;var a})(e.data))return(0,_.jsx)(i.Fragment,{});const r=e.data;return(0,_.jsx)(Ze,{index:s,contextUri:a,uri:r.uri,name:r.name,totalMilliseconds:r.duration.totalMilliseconds,imgUrl:r.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:r.playability.playable,artists:r.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:r?.albumOfTrack?.uri||"",isExplicit:r.contentRating?.label===me.x7.Explicit,isMOGEFRestricted:r.contentRating?.label===me.x7.NineteenPlus,playcount:parseInt(r.playcount||"0",10)},`${s}-${r.uri}`)}),[a]);return l?.length?(0,_.jsxs)("div",{className:Me,children:[(0,_.jsxs)("div",{className:De,children:[(0,_.jsx)(n.E,{variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("playlist.extender.recommended.title")}),(0,_.jsx)(n.E,{variant:"bodySmall",paddingBottom:c.CD,children:e})]}),(0,_.jsx)($e.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.title"),nrTracks:Math.min(l.length,5),rowPlaceholder:ze.qq,tracks:o,renderRow:y,resolveItem:d,columns:u},"internal-link-recommender-track-list")]}):null})),Ye=e=>{const{entityType:a}=e;return(0,_.jsx)(Ge.s,{onError:()=>{(0,ue.fE)({metric_type:de.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:a}})},children:(0,_.jsx)(Xe,{...e})})};var Qe=s(30957),He=s(37672),Je=s(49386),Ke=s(13650);const ea=({album:e,index:a,artistURI:s})=>(0,_.jsx)(je.pZ,{value:"card",index:a,children:(0,_.jsx)(Ke.R,{index:a,latest:!1,showType:!0,...(0,Je.m)(e,s,e.name)})});var aa=s(96642);const sa=({albums:e,artistName:a,artistId:s,artistUri:i,className:r})=>e?(0,_.jsx)(je.pZ,{value:"shelf/albums",children:(0,_.jsx)(aa.$,{total:e.totalCount,title:m.Ru.get("rich-page.popular-albums-by-artist",{artist:a}),seeAllUri:`${(0,He.Dh)(s)}:discography:${me._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:r,children:(0,He.Ey)(e.items).map(((e,a)=>(0,_.jsx)(ea,{album:e,index:a,artistURI:i},e.uri)))})}):null;var ia=s(47376);const ra=({artistId:e,className:a,fansAlsoLike:s,title:i})=>(0,_.jsx)(je.pZ,{value:"shelf/fans-also-like",children:(0,_.jsx)(aa.$,{total:s.length,title:i??m.Ru.get("rich-page.fans-also-like"),seeAllUri:`${(0,He.Dh)(e)}:related`,className:a,children:s.map(((e,a)=>(0,_.jsx)(je.pZ,{value:"card",index:a,children:(0,_.jsx)(ia.a,{index:a,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var ta=s(25642);const la="ERm7dIKbVoqGwPb_lXPH",na=({artistName:e,artistUri:a,headerClassName:s,rowClassName:r,topTracks:t,topTracksTransformer:l,uri:c})=>{const o=(0,i.useMemo)((()=>t?.items.map((e=>l(e,c)))),[t?.items,l,c]);return o&&o.length>0?(0,_.jsxs)("div",{className:r,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)(n.E,{variant:"bodySmall",className:la,children:m.Ru.get("rich-page.popular-tracks")}),(0,_.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:s,children:e})]}),(0,_.jsx)(ta.z,{uri:a,nrTracks:o.length,initialTracks:o})]}):null},ca=({artistName:e,artistId:a,artistUri:s,className:i,releases:r,artistImages:t})=>r?(0,_.jsx)(je.pZ,{value:"shelf/releases",children:(0,_.jsx)(aa.$,{total:10,title:m.Ru.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,He.Dh)(a)}:discography:${me._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,listRowHeaderProps:t?{title:e,pretitle:m.Ru.get("artist-page.popular"),media:(0,ae.h)(t,{desiredSize:48})||""}:null,children:r.items.map(((e,a)=>(0,_.jsx)(ea,{album:e,index:a,artistURI:s},e.uri)))})}):null,oa=({artistId:e,artistName:a,artistUri:s,className:i,singles:r})=>r?(0,_.jsx)(je.pZ,{value:"shelf/singles-and-eps",children:(0,_.jsx)(aa.$,{total:r.totalCount,title:m.Ru.get("rich-page.popular-singles-and-eps-by-artist",{artist:a}),seeAllUri:`${(0,He.Dh)(e)}:discography:${me._m.Single.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,children:(0,He.Ey)(r.items).map(((e,a)=>(0,_.jsx)(ea,{album:e,index:a,artistURI:s},e.uri)))})}):null;var da=s(91303),ua=s(7125),ma=s(50823),ya=s(30939),ha=s(93820),pa=s(24640),ga=s(11231),xa=s(33085),ba=s(21931),ja=s(58806),ka=s(50068);const va="VdIaMy6YRQX6cN5B7OVC",La="LjkmarFarmUOq0nmv9iy",Ra="VHigmLQwT1FxkKEbCs4H",fa="qX5K6LTMIuXG1gFBXzjZ",Ia="fsH_X6pBkexdxtu19q5k",Na="sDbr7RxY_jjg1XXq8zU5",wa="MiWZGlZeQCy1tibDTql5",Ca="uci6FedOoLZEL163ZR8k",Pa="GDA6ugyRoV7ZiqIyOU4d",Aa="IUBwxdZXklSkRPTZ9w_Q",Ua="f7XB243E_dNMV9dkUXV6",Ta="gQQC7YFmzffMUaCqbx3o",Ea="QJVNM_FcLpEHhjDc_FU3",Sa="Vd2oInYt1Ynz9X6KgL7o",_a="yUA20RYjsLIb7xXNRlfn",Fa="MVDvKVX1aJ05U9lmHzaz",Oa=({richTrack:e})=>{const{search:a}=(0,l.zy)(),s=(0,i.useCallback)((()=>new URLSearchParams(a.slice(1)).get("highlight")||""),[a])(),{tracklistRef:r}=(0,ja.h)(),t=e.albumOfTrack,n=(0,ma.J)(t?.uri||""),{usePlayContextItem:c}=(0,D.P)({uri:n},{featureIdentifier:"album"}),o=(0,i.useMemo)((()=>({items:[],totalCount:0})),[]),d=(0,ba.t)();return t?(0,_.jsx)("div",{ref:r,className:wa,children:(0,_.jsx)(xa.a,{columns:d,children:(0,_.jsx)(ka.F,{ariaLabel:t.name,nrTracks:t.tracks.totalCount,albumUri:t.uri,highlightUri:s,discs:o,usePlayContextItem:c,hasHeaderRow:!1})})}):null};var Ba=s(82924),Ma=s(81643),Da=s(63492),Va=s(65325),qa=s(65594),Za=s(33037),Ga=s(97997),za=s(5513),$a=s(36833),Wa=s(36471);const Xa=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:r,spec:t,logger:l,backgroundColor:n,name:c,isPlayable:o,albumUri:d,artists:u}){const y=(0,Wa.W)(),p=(0,ya.n)(),[g,x]=(0,Za.A)(e),k=(0,i.useCallback)((async()=>{y({targetUri:e,intent:g?"unsave":"save",type:"click"});const a=t.saveButtonFactory();l.logInteraction(g?a.hitRemoveLike({itemNoLongerLiked:e}):a.hitLike({itemToBeLiked:e}));try{await x(!g)}catch{}}),[y,e,g,t,l,x]),v=(0,i.useCallback)((()=>{const i=(0,j.$I)({isPlaying:s,isActive:r,spec:t.playButtonFactory(),logger:l,uri:e});a({loggingParams:i})}),[r,s,l,t,a,e]),L=(0,i.useCallback)((()=>{l.logInteraction(t.contextButtonFactory().hitUiReveal())}),[l,t]),R=(0,$a.j)();return(0,_.jsx)(Ga.E,{backgroundColor:n,children:(0,_.jsxs)(za.S,{children:[(0,_.jsx)(qa.e,{children:(0,_.jsx)(b.D,{onClick:v,isPlaying:s,disabled:!o,size:R,uri:e})}),(0,_.jsx)(qa.e,{children:(0,_.jsx)(Ba.M,{isAdded:!!g,onClick:k,disabled:!p,size:R})}),(0,_.jsx)(Ma.f,{uri:e,isFollowing:!!g,onFollow:k,size:R}),(0,_.jsx)(Va.b,{menu:(0,_.jsx)(h.P,{uri:e,albumUri:d,artists:u}),onShow:L,children:(0,_.jsx)(Da.e,{label:m.Ru.get("more.label.context",c),size:R})})]})})}));var Ya=s(13507);const Qa="OH5mnpJIVCJozYM3raMt",Ha="etw0slM6uVrCi5RR3iDi",Ja=({padded:e,providerDisplayName:a})=>a?(0,_.jsx)(E.Z,{as:"p",dir:"auto",variant:"finale",className:`${Qa} ${e?Ha:""}`,children:m.Ru.get("web-player.lyrics.providedBy",a)}):null,Ka=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const i=(0,Ya.l)(),{data:r}=K({uri:e,imageForLyricsRequest:a,isNotPermittedToFetchLyrics:i,isPlayable:s});return r?.hasLyrics?(0,_.jsx)(Ja,{providerDisplayName:r.providerDisplayName}):null};var es=s(99754),as=s(61080);const ss="QhDsXG1Gmo7XmQWLggAO",is="bZgWQj7UxvK8GYKWDA7N",rs="AW61P3tnW5cKJCWtbhFh",ts=({buttonText:e,onSecondaryButtonClick:a,onPrimaryButtonClick:s,secondaryButtonText:i,text:r})=>(0,_.jsxs)("div",{className:ss,"data-testid":"static-activation-trigger",children:[(0,_.jsx)(n.E,{className:is,variant:"bodyMediumBold",children:r}),(0,_.jsxs)("div",{className:rs,children:[(0,_.jsx)(o.H,{onClick:a,semanticColor:"textBase",children:i}),(0,_.jsx)(as.$,{onClick:s,colorSet:"invertedLight",children:e})]})]}),ls="T1nqQ4HEh3heHy4RCCKa",ns="L8zjshPVgUMXyZR4FtOk",cs="YMn1FWcFmOz9osBrNvhF",os="Inbyq3TnvKDOJtcKFTDQ",ds="lWk5se4WETUOJwaEb8D6",us="i8DyQbWCmDV_8N5XGJQT",ms="t5WPFlGTY6GCd9UOFfLu",ys="AGQ3wRyMVK1odq860qnT",hs="ZX_r7uZgPgssaUplfpxT",ps="qrqctaPu2XBpxsw23nPX",gs="XnWidTagai3nQwMPxIMF";var xs=s(50783),bs=s(52963);let js=function(e){return e.SMALL="small",e.LARGE="large",e}({});const ks=e=>{const{disabled:a,images:s,LinkComponent:i,name:r,size:n,uri:c,enableI18nRoutes:o,enableI18nAdditionalPages:d}=e,y=n===js.SMALL,h=(0,l.Zp)(),p=(0,u.o_)(c),g=p?.type,x=m.Ru.getLocaleForURLPath(),b=(0,xs.p)({localeFeatureFlag:o,entityFeatureFlag:d,urlLocale:x,entity:g,type:"link"});return(0,_.jsxs)("div",{className:t()(ns,{[cs]:a}),"data-testid":"track-artist-link-card",children:[(0,_.jsx)(A.b,{shape:A.u.CIRCLE,images:s,size:T.Qe.SIZE_80,title:r,type:U.c.ARTIST}),(0,_.jsxs)("div",{className:t()(ds,{[us]:y}),children:[(0,_.jsx)(E.Z,{variant:"mestoBold",className:os,children:m.Ru.get("card.tag.artist")}),(0,_.jsx)(i,{to:c,children:(0,_.jsx)(E.Z,{as:"div",dir:"ltr",className:ms,variant:"balladBold",children:r})})]}),(0,_.jsx)("div",{onClick:()=>{const e=p?.toURL(`/${bs.CT}${x}/`);if(p){const a=b?e:p.toURLPath(!0);h(a)}},className:ys})]})},vs=({size:e=js.LARGE,disabled:a=!1,enableI18nRoutes:s,enableI18nAdditionalPages:r,...l})=>{const[n,c]=(0,i.useState)(!1),d=(0,i.useCallback)((()=>{c(!n)}),[n]),u=l.artists;return(0,_.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,_.jsx)("div",{className:ls,children:u.map(((i,c)=>(0,_.jsx)("div",{className:t()({[ps]:n&&c>5,[hs]:c>5}),children:(0,_.jsx)(ks,{name:i.name,uri:i.uri,images:i.images,size:e,LinkComponent:l.LinkComponent,disabled:a,enableI18nRoutes:s,enableI18nAdditionalPages:r},i.id)},`${i.uri}-${c}`)))}),u.length>6&&(0,_.jsx)(o.H,{onClick:d,className:gs,children:(0,_.jsx)(E.Z,{as:"p",variant:"violaBold",children:n?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})})]})};var Ls=s(14431),Rs=s(12275),fs=s(31350),Is=s(59313);const Ns="EaTxqhHk6J4ecKHwpY5m",ws="dUQl9yd5x_1oWk4L0Ntm",Cs="xt5C47eHPYNiriMJxGnC",Ps=({words:e,onObserve:a,lyricsInView:s})=>{const{ref:r,inView:t}=(0,Is.Wx)({threshold:0}),l=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{s||(l.current=!1)}),[s]),(0,i.useEffect)((()=>{l.current||t&&(a({text:e,outOfView:!1}),l.current=!0)}),[t,a,e]),(0,_.jsx)(n.E,{ref:r,as:"p",dir:"auto",variant:"bodyMedium",className:Cs,children:e})};var As=s(58123);const Us="q1JbsdMqX7OImgIFWa6J",Ts="hAGejMh7SncdbJ5wcfUi",Es="IaG9Zc3xGxeYjsn73RAz",Ss="zgSEYVU2gMYxihFVEJPn",_s="expandable-lyrics-container";const Fs=({lyrics:e,lyricsInView:a,onObserve:s,previewCount:r})=>{const[l,c]=(0,i.useState)(!1),{visibleLyrics:o,collapsibleLyrics:d}=function(e,a){let s=0,i=-1;const r=e.filter((e=>!!e.words));for(const[e,t]of r.entries())if(s+=t.words.length,s>a){i=e-1;break}if(i>-1)return{visibleLyrics:r.slice(0,i),collapsibleLyrics:r.slice(i)};return{visibleLyrics:r,collapsibleLyrics:[]}}(e,r),u=d.length>0,y=l?m.Ru.get("show_less"):`…${m.Ru.get("show_more")}`;return(0,_.jsxs)(_.Fragment,{children:[o.map((({words:e},i)=>(0,_.jsx)(Ps,{onObserve:s,words:e,lyricsInView:a},`lyrics-seo-line-${i}`))),(0,_.jsx)("span",{"aria-hidden":!l,className:t()(Es,{[Ss]:l}),children:d.map((({words:e},i)=>(0,_.jsx)(Ps,{onObserve:l?s:()=>{},words:e,lyricsInView:l&&a},`lyrics-seo-line-${i}`)))}),u&&(0,_.jsx)("button",{className:Us,onClick:()=>{c(!l)},"aria-controls":_s,"aria-owns":_s,"aria-label":y,children:(0,_.jsx)(n.E,{variant:"bodyMediumBold",className:Ts,children:y})})]})},Os=({data:e,eventSender:a,playbackId:s,previewCount:r,trackPageEnhancedEnabled:t,uri:l})=>{const{lyrics:c=[],provider:o,providerLyricsId:d,syncType:u}=e,{ref:y,inView:h}=(0,Is.Wx)({threshold:0}),p=function(e){const{trackUri:a,provider:s,providerLyricsId:r,syncType:t,eventSender:l,playbackId:n,isSnippet:c}=e,o=(0,i.useRef)(null),[d,u]=(0,i.useState)(!1),[m,y]=(0,i.useState)(0),[h,p]=(0,i.useState)(!1),g=(0,i.useMemo)((()=>(0,As.W)({lyrics_format:"track-page",track_uri:a,provider:s,provider_lyrics_id:r,sync_type:t,playback_id:n,is_snippet:c})),[a,s,r,t,n,c]);return(0,i.useEffect)((()=>{u(!1),y(0),p(!1),o.current=null}),[a]),(0,i.useEffect)((()=>{d&&n&&u(!1)}),[n]),(0,i.useEffect)((()=>{d||m>=140&&h&&(l?.send(g),u(!0))}),[m,d,g,l,h]),(0,i.useCallback)((e=>{const{text:a,outOfView:s}=e;a&&a.length>1&&(y((e=>e+a.length)),d||null!==o.current||(o.current=setTimeout((()=>{p(!0)}),1500))),s&&(o.current&&clearTimeout(o.current),o.current=null,y(0))}),[y,d])}({trackUri:l,provider:o,providerLyricsId:d,syncType:u,eventSender:a,playbackId:s});return(0,i.useEffect)((()=>{h||p({outOfView:!0})}),[h,p]),(0,_.jsxs)("div",{className:Ns,ref:y,children:[(0,_.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:ws,children:m.Ru.get("web-player.lyrics.title")}),!t&&c.map((({words:e},a)=>(0,_.jsx)(Ps,{onObserve:p,words:e,lyricsInView:h},`lyrics-seo-line-${a}`))),t&&(0,_.jsx)(Fs,{lyrics:c,lyricsInView:h,onObserve:p,previewCount:r})]})};var Bs=s(82729),Ms=s(30232),Ds=s(37693),Vs=s(94710),qs=s(52415),Zs=s(99028),Gs=s(63192),zs=s(33560);const $s=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const[r,t]=(0,i.useState)(420),{trackPageEnhancedEnabled:l}=(0,pa.Zo)(),{data:n}=K({uri:e,imageForLyricsRequest:a,isPlayable:s}),c=(0,Vs.vh)(),{isPaused:o,currentTrackUri:d,playbackId:u}=(0,Ms.o)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),Ds.a),m=!o&&d===e,y=(0,i.useCallback)((()=>{window.innerWidth<=768?t(280):window.innerWidth>768&&280===r&&t(420)}),[r]);return(0,i.useEffect)((()=>{y()}),[y]),(0,Bs.s)(y),n&&n?.hasLyrics?(0,_.jsx)(Os,{data:n,uri:e,eventSender:c,playbackId:m?u:void 0,previewCount:r,trackPageEnhancedEnabled:l}):null},Ws=e=>{const a=(e=>{const a=(0,Vs.vh)(),s=(0,es.d4)(fs.F6),i=(0,es.d4)(zs.JJ),r=(0,es.d4)(fs.oo),t=(0,ua.V)();return()=>{if(t)return;(0,ue.fE)({metric_type:de.MetricTypes.COUNTER,what:"dwp-lyrics-component-error",value:1});const l={category:"lyrics_render_error",label:"dwp",os:(0,Zs.f)(),context:JSON.stringify({uri:e,product:r}),country:s?i:"",sp_t:(0,Gs.v8)("sp_t")};a.send((0,qs._)(l))}})(e.uri);return(0,_.jsx)(Ge.s,{onError:a,children:(0,_.jsx)($s,{...e})})};const Xs=e=>{const{albumArtists:a,columnCount:s,imageForLyricsRequest:r,isPlayable:l,uri:n}=e,c=s-2,o={"--column-count":s,"--left-column-end":c-2,"--right-column-start":c},{isAnonymous:d}=(0,es.d4)(fs.Ht),u=(0,ya.n)(),y=(0,Ya.l)(),{trackPageEnhancedEnabled:h,trackPageLinksNoLyricsEnabled:p,trackPageNoLyricsEnabled:g}=(0,pa.Zo)(),x=!p&&!g,{data:b,status:j}=K({uri:n,isNotPermittedToFetchLyrics:d||y,imageForLyricsRequest:r,isPlayable:l}),k=!!b&&b.hasLyrics&&j!==Z.UNAVAILABLE,v=(k||d)&&x,L=(R=k,h?R?pa.rt.HasLyrics:pa.rt.NoLyrics:pa.rt.Ineligible);var R;const f=(0,pa.E6)(L),I=(0,es.d4)(Rs.MU),N=(0,es.d4)(Rs.NR);if((0,i.useEffect)((()=>{f()}),[f]),y)return null;return(0,_.jsxs)(i.Suspense,{fallback:null,children:[v&&(0,_.jsx)("div",{className:t()(Ra,{[fa]:s>5}),style:{...o},"data-testid":"lyrics-container",children:d?(0,_.jsx)(ts,{buttonText:m.Ru.get("sign_up"),secondaryButtonText:m.Ru.get("login"),text:m.Ru.get("track-page.sign-into-premium-to-view-lyrics"),onPrimaryButtonClick:Ls.ie,onSecondaryButtonClick:Ls.PW}):(0,_.jsx)(Ws,{uri:n,imageForLyricsRequest:r,isPlayable:l})}),(0,_.jsx)("div",{className:t()(va,{[La]:s>5&&v}),style:{...o},children:(0,_.jsx)(vs,{artists:a,LinkComponent:Qe.default,disabled:!u,enableI18nRoutes:I,enableI18nAdditionalPages:N})})]})},Ys=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),Qs=e=>(e||[]).map((e=>e.profile.name)),Hs=({uri:e,track:a})=>{const s=(0,ya.n)(),r=(0,ua.V)(),l=(0,da.W)({type:"locale",uri:e}),u=m.Ru.getLocaleForTranslation(),x=parseInt(a.playcount||"0",10),{firstArtist:L,otherArtists:R,albumOfTrack:f,duration:I,name:N}=a,w=f?.coverArt,C=f?.copyright.items,P=f?.courtesyLine,{date:A,precision:T}=f?.date?(0,se.mp)(f.date):{date:void 0,precision:void 0},E=w?.extractedColors?.colorRaw.hex,S=(w?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),B={uri:f?.uri||"",name:f?.name||""},M=Qs(L.items),q=Qs(R.items),Z=Ys(L),G=Ys(R),z=[...Z,...G],$=L.items[0],W=a.albumOfTrack,X=W?.playability?.playable,Y={artistId:$?.id,artistName:$?.profile?.name,artistUri:$?.uri},Q=a.albumOfTrack?.coverArt?.sources,H=(0,ae.h)(Q||void 0,{desiredLabel:"large",desiredSize:600})??Q?.[0]?.url??"",[K,de]=(0,i.useState)(!1),ue=(0,i.useCallback)((()=>{de(!K)}),[K]),me=R&&R.items.length>5,{spec:ye,logger:he}=(0,ee.r)(d.y,{data:{uri:e}}),pe=a.playability.playable,ge=(0,ma.J)(e),{togglePlay:xe,isPlaying:be,isActive:je}=(0,D.P)({uri:ge},{featureIdentifier:"track"}),{trackPageLinksNoLyricsEnabled:ke,trackPageNoLyricsEnabled:ve}=(0,pa.Zo)(),Le=ke||ve,Re=(0,i.useCallback)((()=>(0,V.rO)({i18n:m.Ru,trackArtistsList:[...M,...q].join(m.Ru.getSeparator()),trackName:a.name,shouldLocalize:l,disabled:Le})),[M,Le,q,l,a.name]),fe=(0,i.useCallback)(((e,a)=>{he.logInteraction(ye.headerFactory().artistLinkFactory({position:a.position,uri:a.creator.uri}).hitUiNavigate({destination:a.creator.uri}))}),[he,ye]),Ie=(0,i.useCallback)((()=>{const a=(0,j.$I)({isPlaying:be,isActive:je,spec:ye.actionBarFactory().playButtonFactory(),logger:he,uri:e});xe({loggingParams:a})}),[je,be,he,ye,xe,e]),Ne=W?.uri,we=(0,i.useMemo)((()=>[...L.items,...R.items].map((e=>({uri:e.uri,name:e.profile.name})))),[L.items,R.items]),Ce=(0,_.jsx)(h.P,{uri:e,albumUri:Ne,artists:we});return(0,_.jsxs)("section",{"data-testid":"track-page",children:[(0,_.jsx)(re.Q,{children:Re()}),(0,_.jsxs)(te.z,{backgroundColor:E,children:[(0,_.jsxs)(p.h,{children:[(0,_.jsx)(b.D,{size:"medium",onClick:Ie,disabled:!pe,isPlaying:be,uri:e}),(0,_.jsx)(g.X,{text:N,dragUri:e,dragLabel:N})]}),(0,_.jsx)(y.h,{menu:Ce,children:(0,_.jsx)(le.K,{dragUri:e,images:S,name:N,placeholderType:"album"})}),(0,_.jsxs)(ne.Y,{children:[(0,_.jsx)(n.E,{variant:"bodySmallBold",children:m.Ru.get("song")}),(0,_.jsx)(y.h,{menu:Ce,children:(0,_.jsx)(oe.mm,{dragUri:e,dragLabel:N,children:N})}),(0,_.jsx)(ce.t,{creators:Z,releaseDate:A,releaseDatePrecision:T,durationMilliseconds:I.totalMilliseconds,onCreatorClick:fe,isTrack:!0,album:B,playcount:x})]})]}),(0,_.jsx)(Xa,{uri:e,togglePlay:xe,isPlaying:be,isActive:je,spec:(0,i.useMemo)((()=>ye.actionBarFactory()),[ye]),logger:he,backgroundColor:E,name:N,isPlayable:pe,albumUri:Ne,artists:we}),(0,_.jsxs)(J,{children:[(0,_.jsxs)("div",{className:"contentSpacing",children:[(0,_.jsx)("div",{className:Ia,children:(0,_.jsx)(v.E,{render:({columnCount:a})=>(0,_.jsx)(Xs,{imageForLyricsRequest:H,albumArtists:z,columnCount:a,uri:e,isPlayable:pe}),rowGap:c.lT})}),(0,_.jsx)(Ye,{subtitle:m.Ru.get("internal-link-recommender.based-on-this-song"),uri:a.uri,entityType:U.c.TRACK}),(0,_.jsx)(na,{artistName:$.profile.name,artistUri:$.uri,headerClassName:Pa,rowClassName:Ia,topTracks:$.discography.topTracks,topTracksTransformer:ha.fX,uri:a.uri}),(0,_.jsx)(ca,{className:Ca,releases:$?.discography?.popularReleasesAlbums,...Y}),(0,_.jsx)(sa,{albums:$?.discography?.albums,className:Ca,...Y}),(0,_.jsx)(oa,{className:Ca,singles:$?.discography?.singles,...Y}),R&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:Ua,children:R.items.map(((e,a)=>(0,_.jsx)(ca,{className:t()(Aa,{[Ea]:a>4,[Sa]:K&&a>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),me&&(0,_.jsx)(o.H,{onClick:ue,className:_a,children:(0,_.jsx)(n.E,{as:"h2",variant:"bodySmallBold",children:K?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})}),(0,_.jsx)(ra,{artistId:$.id,className:t()(Ca,{[Ta]:R.items.length>0}),fansAlsoLike:$.relatedContent.relatedArtists.items,title:m.Ru.get("artist-page.fansalsolike")})]}),W&&(0,_.jsx)(O,{art:W.coverArt?.sources[0],disabled:!X||!s,LinkComponent:Qe.default,name:W.name,type:W.type,size:F.LARGE,uri:W.uri}),(0,_.jsx)(Oa,{richTrack:a})]}),(0,_.jsx)("div",{className:"contentSpacing",children:(0,_.jsxs)("div",{className:Na,children:[A&&(0,_.jsx)(n.E,{as:"p",variant:"bodySmall",className:Fa,children:(0,ie.rh)((0,ie.ad)(A),u,{year:"numeric",month:"long",day:"numeric"},T)}),(0,_.jsx)(k.Z,{copyrights:C||[],courtesyLine:P}),!r&&(0,_.jsx)(Ka,{uri:e,imageForLyricsRequest:H,isPlayable:pe})]})})]})]})},Js=(0,i.memo)((function(){const{trackId:e=""}=(0,l.g)(),a=(0,u.tR)(e).toURI(),s=(0,ga.J)({uri:a});return s.loading||s.error||"Track"!==s.data?.trackUnion?.__typename?(0,_.jsx)(x.A,{hasError:!s.loading,errorMessage:m.Ru.get("track-page.error")}):(0,_.jsx)(M.P,{surface:B.u.TRACK,uris:[a,s.data.trackUnion.albumOfTrack?.uri??null],children:(0,_.jsx)(Hs,{uri:a,track:s.data.trackUnion})})}))},11231:(e,a,s)=>{s.d(a,{J:()=>l});var i=s(3775),r=s(16990);const t=new i.l("getTrack","query","ae85b52abb74d20a4c331d4143d4772c95f34757bfa8c625474b912b9055b5c0",null),l=(e,a)=>(0,r.I)(t,e,a)}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map