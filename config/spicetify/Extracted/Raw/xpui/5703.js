"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5703,8084],{55703:(e,s,o)=>{o.r(s),o.d(s,{EpisodeSponsorsWrapper:()=>S,default:()=>E});var n=o(79474);var t=o(48864),r=o(13274);const i=(0,n.lazy)((()=>o.e(8705).then(o.bind(o,18705))));function a({fetchedEpisodeSponsorsData:e,fireTrackingEvent:s,numberOfSponsorsToDisplay:o,firedViewedEvents:a,version:d,reason:p,uri:u}){const{displayedEpisodeSponsorsData:c}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:s}){return(0,n.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,s)})),[e,s])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:o}),f=(0,t.I)({displayedEpisodeSponsorsData:c,uri:u,reason:p}),l=(0,n.useMemo)((()=>c.map(((e,o)=>(0,r.jsx)(i,{fireTrackingEvent:s,firedViewedEvents:a,version:d,onClick:()=>f({ui_navigate:c.map((({clickthrough:e},s)=>o===s?e:"")),navigate_to_external_uri:c.map(((...[,e])=>o===e))}),...e},`${e.metadata.lineitem_id}-${o}`)))),[c,s,a,d,f]);return{displayedEpisodeSponsorsData:c,displayedSponsors:l}}var d=o(63442),p=o(83856);var u=o(71342);o(36805),o(4563),o(79606),o(98211),o(24164),o(79499),o(49271);function c({firedViewedEvents:e}){const s=(0,n.useRef)();return{firedViewedEvents:s.current=e??s.current??new Set}}function f({uri:e,getEpisodeSponsors:s,fireTrackingEvent:o,numberOfSponsorsToDisplay:t,version:r,reason:i}){const{state:f}=(0,d.v)(),l=function({uri:e,episodeBase62Id:s}){return(0,n.useMemo)((()=>{const o=(0,p.o_)(e),n=s||o?.id;return{uri:(0,p.iM)(n).toURI(),episodeBase62Id:n}}),[e,s])}({...f?.[d.u],uri:e}),{fetchedEpisodeSponsorsData:v}=(0,u.P)({...f,...l,getEpisodeSponsors:s,version:r}),{firedViewedEvents:S}=c({...f?.[d.u]}),E=a({fetchedEpisodeSponsorsData:v,fireTrackingEvent:o,numberOfSponsorsToDisplay:t,firedViewedEvents:S,version:r,reason:i,...l});return{...l,fetchedEpisodeSponsorsData:v,...E,firedViewedEvents:S,reason:i}}const l=3;const v=(0,n.lazy)((()=>o.e(5748).then(o.bind(o,75748))));function S(e){const{numberOfSponsorsToDisplay:s}=function({numberOfSponsorsToDisplay:e=l}){return{numberOfSponsorsToDisplay:e}}(e),o=f({...e,numberOfSponsorsToDisplay:s});return o.episodeBase62Id&&o.displayedSponsors.length?(0,r.jsx)(n.Suspense,{fallback:!0,children:(0,r.jsx)(v,{...e,numberOfSponsorsToDisplay:s,state:o})}):null}const E=S},63442:(e,s,o)=>{o.d(s,{u:()=>t,v:()=>r});var n=o(83648);const t="episodeSponsorsStateWithRequiredProps";function r(){return(0,n.zy)()}},71342:(e,s,o)=>{o.d(s,{F:()=>i,P:()=>a});var n=o(79474),t=o(98678),r=o(69187);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:s,fetchedEpisodeSponsorsData:a=[],version:d}){const[p,u]=(0,n.useState)(a),c=(0,n.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const n=s??(await Promise.resolve().then(o.bind(o,47437))).getEpisodeSponsors;u(await n(e,{version:d}))}catch(e){u([])}}),[e,s,d]),f=(0,t.YQ)(c,i);(0,n.useEffect)((function(){a.length||f()}),[f,a.length]);const l=(0,n.useCallback)((()=>({effectCallback:f})),[f]);return(0,r.L)(l),{fetchedEpisodeSponsorsData:p}}},48864:(e,s,o)=>{o.d(s,{I:()=>r});var n=o(79474),t=o(94710);function r({uri:e,reason:s,displayedEpisodeSponsorsData:r}){const i=(0,t.vh)(),a=(0,n.useCallback)((async n=>{const{createPodcastAdCtaCardEvent:t}=await o.e(4151).then(o.bind(o,76953));return i.send(t({uri:e,reason:s,lineitem_id:r.map((e=>e.metadata.lineitemId)),...n}))}),[e,r,s,i]);return(0,n.useEffect)((function(){a()}),[a]),a}},69187:(e,s,o)=>{o.d(s,{L:()=>p});var n=o(79474),t=o(22215),r=o(19498),i=o(38377),a=o(30232),d=o(33082);function p(e){const s=(0,t.NC)(r.CV8),o=(0,a.o)((e=>{const s=e?.item??void 0;return(0,d.N)(s)&&s.isPodcastAd?s.id??void 0:void 0})),p=(0,i.Z)(o);(0,n.useEffect)((function(){const{effectCallback:n,destructor:t}=e();return o!==p&&Boolean(o)&&setTimeout(n,s),t}),[e,o,p,s])}}}]);
//# sourceMappingURL=5703.js.map