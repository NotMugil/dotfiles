"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6080],{57779:(e,t,a)=>{a.r(t),a.d(t,{default:()=>He});var l=a(79474),r=a(16212),i=a(14056),s=a(90495),n=a(82089),o=a(18645),c=a(82372),A=a(49622),u=a(55810),d=a(13411),E=a(69640);let g=function(e){return e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER",e}({});const C={"show-alphabetical":g.SHOW_ALPHABETICAL,"book-alphabetical":g.BOOK_ALPHABETICAL,"episode-alphabetical":g.EPISODE_ALPHABETICAL,"playlist-alphabetical":g.PLAYLIST_ALPHABETICAL,"album-alphabetical":g.ALBUM_ALPHABETICAL,"recently-added":g.ADDED_AT,"creator-name":g.CREATOR_NAME,"creator-name-alphabetical":g.CREATOR_NAME_ALPHABETICAL,"album-creator-name":g.ALBUM_CREATOR_NAME,"recently-played":g.RECENTLY_PLAYED,"playlist-most-relevant":g.MOST_RELEVANT,"playlist-custom-order":g.CUSTOM_ORDER},T={[g.RECENTLY_PLAYED]:{key:"recently-played",get value(){return i.Ru.get("collection.sort.recently-played")}},[g.ADDED_AT]:{key:"recently-added",get value(){return i.Ru.get("collection.sort.recently-added")}},[g.SHOW_ALPHABETICAL]:{key:"show-alphabetical",get value(){return i.Ru.get("collection.sort.alphabetical")}},[g.BOOK_ALPHABETICAL]:{key:"book-alphabetical",get value(){return i.Ru.get("collection.sort.alphabetical")}},[g.EPISODE_ALPHABETICAL]:{key:"episode-alphabetical",get value(){return i.Ru.get("collection.sort.alphabetical")}},[g.PLAYLIST_ALPHABETICAL]:{key:"playlist-alphabetical",get value(){return i.Ru.get("collection.sort.alphabetical")}},[g.ALBUM_CREATOR_NAME]:{key:"album-creator-name",get value(){return i.Ru.get("collection.sort.creator")}},[g.CREATOR_NAME]:{key:"creator-name",get value(){return i.Ru.get("collection.sort.creator")}},[g.CREATOR_NAME_ALPHABETICAL]:{key:"creator-name-alphabetical",get value(){return i.Ru.get("collection.sort.alphabetical")}},[g.ALBUM_ALPHABETICAL]:{key:"album-alphabetical",get value(){return i.Ru.get("collection.sort.alphabetical")}},[g.MOST_RELEVANT]:{key:"playlist-most-relevant",get value(){return i.Ru.get("collection.sort.most-relevant")}},[g.CUSTOM_ORDER]:{key:"playlist-custom-order",get value(){return i.Ru.get("collection.sort.custom-order")}}};g.ADDED_AT,g.ALBUM_ALPHABETICAL,g.CREATOR_NAME,g.ADDED_AT,u.uY.ADDED_AT,u.xB.DESC,g.ALBUM_ALPHABETICAL,u.uY.NAME,u.xB.ASC,g.CREATOR_NAME,u.uY.ARTIST_NAME,u.xB.ASC;g.ADDED_AT,g.CREATOR_NAME_ALPHABETICAL,g.ADDED_AT,u.af.ADDED_AT,u.xB.DESC,g.CREATOR_NAME_ALPHABETICAL,u.af.NAME,u.xB.ASC;g.ADDED_AT,g.SHOW_ALPHABETICAL,g.ADDED_AT,u.WW.ADDED_AT,u.xB.DESC,g.SHOW_ALPHABETICAL,u.WW.NAME,u.xB.ASC;g.ADDED_AT,g.BOOK_ALPHABETICAL,g.ADDED_AT,u.Ev.ADDED_AT,g.BOOK_ALPHABETICAL,u.Ev.NAME;g.MOST_RELEVANT,g.RECENTLY_PLAYED,g.ADDED_AT,g.PLAYLIST_ALPHABETICAL,g.CUSTOM_ORDER,g.ADDED_AT,E.nw.ADDED_AT,E.xB.DESC,g.RECENTLY_PLAYED,E.nw.RECENTLY_PLAYED,E.xB.ASC,g.PLAYLIST_ALPHABETICAL,E.nw.NAME,E.xB.ASC,g.MOST_RELEVANT,E.nw.RELEVANCE,E.xB.DESC,g.CUSTOM_ORDER;g.ADDED_AT,g.ADDED_AT,g.ADDED_AT,g.MOST_RELEVANT,g.ADDED_AT;var p=a(13274);const D=e=>e===g.ADDED_AT?u.xB.DESC:u.xB.ASC,L={option:g.ADDED_AT,order:u.xB.DESC},_={[u.xB.ASC]:u.xB.DESC,[u.xB.DESC]:u.xB.ASC},m=(0,l.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:L}),h=l.memo((function({uri:e,children:t,defaultSortOption:a}){const l={option:a,order:D(a)};return(0,p.jsx)(A.E,{uri:e,defaultState:l,sortContext:m,children:t})}));var y=a(30939),x=a(79130),P=a(16323),R=a(26271),b=a(34074),S=a(38996),O=a(64647),f=a(67628),I=a(92585),B=a(60347),M=a(39950),N=a(67302),k=a(95063);const j=l.memo((function({sortOptions:e,onSort:t}){const{sortState:a,setSortState:r}=(0,l.useContext)(m),i=(0,l.useCallback)((e=>{const l=C[e];t?.(l),r(((e,t,a)=>t!==e?{option:e,order:D(e)}:{option:e,order:_[a]})(l,a.option,a.order))}),[t,r,a.option,a.order]),s=e.map((e=>T[e])),n=T[a.option];return(0,p.jsx)(k.g,{options:s,onSelect:i,selected:n,sortOrder:(o=a.order,o===u.xB.ASC?d.H.ASC:d.H.DESC)});var o})),v="gWfUTJg52F5eTzM6M82w",H=l.memo((function({canSort:e,canFilter:t,filterPlaceholder:a,sortOptions:r}){const{spec:i,logger:s}=(0,N.r)(B.E,{}),n=(0,l.useCallback)((()=>{s.logInteraction(i.filterFieldFactory().keyStrokeFilter())}),[s,i]),o=(0,l.useCallback)((()=>{s.logInteraction(i.filterFieldFactory().hitClearFilter())}),[s,i]);return(0,p.jsxs)("div",{className:v,children:[t?(0,p.jsx)(l.Suspense,{fallback:null,children:(0,p.jsx)(M.S,{placeholder:a,onFilter:n,onClear:o})}):null,e?(0,p.jsx)(j,{sortOptions:r}):null]})}));var w=a(66615),U=a(97997),Y=a(5513),W=a(36833);const F={[u.ci.NAME]:o.lU.TITLE,[u.ci.SHOW_NAME]:o.lU.SHOW,[u.ci.ADDED_AT]:o.lU.ADDED_AT},z=[g.ADDED_AT,g.CREATOR_NAME,g.EPISODE_ALPHABETICAL],K={[g.ADDED_AT]:u.ci.ADDED_AT,[g.CREATOR_NAME]:u.ci.SHOW_NAME,[g.EPISODE_ALPHABETICAL]:u.ci.NAME};const V=(e,t)=>{if(function(e){return z.includes(e)}(e))return{field:K[e],order:t}},q=(e,t)=>{if(!z.includes(e))return;return(e=>{if(!e?.field)return;const t=F[e.field];if(!t)return;return o.SL[t].map((t=>e.order?`${t} ${e.order}`:t)).join(",")})(V(e,t))},G="RuBJDnBql7qpA7bDaV6A",$="wmGcau34_eXQOX37kUTc",Q="Yxy9nPtcdgz7zbBsWVKg",X=({metadata:e,canSort:t,backgroundColor:a,isPlaying:l,isOnline:r,togglePlay:s})=>{const n=(0,w.t)(),{uri:o,name:c}=e,A=e.totalLength>0,u=(0,W.j)();return(0,p.jsx)(U.E,{backgroundColor:a,children:(0,p.jsxs)(Y.S,{children:[A&&(0,p.jsx)(I.D,{onClick:()=>s(),isPlaying:l,size:u,uri:o,disabled:!r,ariaPlayLabel:i.Ru.get("playlist.a11y.play",c),ariaPauseLabel:i.Ru.get("playlist.a11y.pause",c)}),t&&(0,p.jsx)("div",{className:Q,children:(0,p.jsx)(H,{canSort:n.getCapabilities().canSort,canFilter:n.getCapabilities().canFilter,filterPlaceholder:i.Ru.get("playlist.search_in_playlist"),sortOptions:z})})]})})};var Z=a(19277),J=a(95999),ee=a(11867),te=a(97247),ae=a(46150),le=a(22215),re=a(88291),ie=a(47498),se=a(31825),ne=a(53311),oe=a(90226),ce=a(36706);const Ae="sxxBMk7G1OGo4uYIgPdQ",ue="wpP88qSwGpDQbc_ogyXW";var de=a(2092),Ee=a(36471),ge=a(32334),Ce=a(97374),Te=a(33037),pe=a(70974),De=a(9440),Le=a(26903),_e=a(47583),me=a(7283),he=a(19498);const ye={small:64,standard:300,large:640,xlarge:1024},xe=l.memo((function({index:e,contextUri:t,episode:a,onRemove:r,usePlayContextItem:i}){const s=(0,l.useRef)(a.duration.milliseconds-a.timeLeft.milliseconds),n=a.uri,[o,A]=(0,l.useState)(0===a.timeLeft.milliseconds),{filter:u}=(0,l.useContext)(c.g),{draggable:d,onDragStart:E}=(0,de.P)(),g=(0,te.y)(),C=(0,Ee.W)(),[T]=(0,Te.A)(n,!0),D=(0,me.g)(a.uri,a.isPlayable),L=(0,y.n)(),{isPlaying:_,isActive:m,togglePlay:h}=i({uri:n,index:e}),[x]=(0,pe.S)(1e4,(e=>e?.item?.uri===n));(0,l.useEffect)((()=>{_&&(s.current=x)}),[_,x]);const{isPlaying:P,isActive:b,togglePlay:S}=(0,R.P)({uri:n,pages:[{items:[{type:De.c.EPISODE,uri:n,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,l.useEffect)((()=>{T||r()}),[T,r]),(0,l.useEffect)((()=>{_||a.duration.milliseconds<=s.current&&A(!0)}),[_,a.duration.milliseconds]);const O=(0,l.useCallback)((e=>{e||(s.current=0),A(e)}),[]),f=(0,l.useCallback)((e=>{if(e.target!==e.currentTarget)return;let l=`${a.name}`;a.show?.name&&(l+=` â€¢ ${a.show.name}`),E(e,{itemUris:[n],dragLabelText:l,contextUri:t})}),[t,a.name,a.show?.name,n,E]),I=(0,l.useCallback)((()=>{C({type:"click",targetUri:n,intent:"navigate"})}),[n,C]),B=(0,l.useCallback)((()=>{L?(C({type:"click",intent:_?"pause":"play"}),h()):(C({type:"click",intent:P?"pause":"play"}),S())}),[L,_,P,C,h,S]),M=(0,l.useCallback)((e=>(0,p.jsx)(_e.M,{searchWords:[u],textToHighlight:e})),[u]),N=a.podcastSubscription?.isPaywalled??!1,k=a.podcastSubscription?.isUserSubscribed??!1,{badges:j}=(0,Le.b)({isExplicit:a.isExplicit,isMOGEFRestricted:a.is19PlusOnly,isPaywalled:N});let v=!1;(m||!L&&b)&&(v=!0);const H=(0,le.NC)(he.cKd,{loadingValue:!1});return T?(0,p.jsxs)(J.pZ,{value:"row",index:e,children:[(0,p.jsx)("hr",{className:Ae,"aria-hidden":!0}),(0,p.jsx)(re.h,{menu:(0,p.jsx)(ie.b,{uri:n,contextUri:t,showUri:a.show?.uri,isPlayed:o,onMarkAsPlayed:O}),children:H?(0,p.jsx)(ne.k,{requestId:a.requestId,index:e,uri:n,uid:n,size:g,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?ye[e.label]:null),height:e.height||(e.label?ye[e.label]:null)}))),isPaywalled:N,isUserSubscribed:k,name:a.name,highlightText:M,showName:a.show?.name,showUri:a.show?.uri,description:a.description,isPlayable:D,fullyPlayed:o,durationMs:a.duration.milliseconds,releaseDate:a.release.date||"",resumePositionMs:s.current,draggable:d,handleDragStart:f,handlePlaybackClick:B,handleClick:I,isCurrentlyPlaying:v,isPlaying:L?_:P,position:v?x:void 0,episodeSharingInfo:null,onMarkAsPlayed:O,badges:(0,p.jsxs)(p.Fragment,{children:[j.explicit&&(0,p.jsx)(ge.g,{}),j.paid&&(0,p.jsx)(ce.K,{}),j.nineteen&&(0,p.jsx)(Ce.q,{size:16})]}),playButtonWrapper:e=>(0,p.jsx)(oe.f,{enabled:N&&!k,showUri:a.show?.uri||void 0,children:e})}):(0,p.jsx)(se.R,{requestId:a.requestId,index:e,uri:n,uid:n,size:g,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?ye[e.label]:null),height:e.height||(e.label?ye[e.label]:null)}))),isPaywalled:N,isUserSubscribed:k,name:a.name,highlightText:M,showName:a.show?.name,showUri:a.show?.uri,description:a.description,isPlayable:D,fullyPlayed:o,durationMs:a.duration.milliseconds,releaseDate:a.release.date||"",resumePositionMs:s.current,handleDragStart:f,handlePlaybackClick:B,handleClick:I,isCurrentlyPlaying:v,isPlaying:L?_:P,position:v?x:void 0,episodeSharingInfo:null,onMarkAsPlayed:O,badges:(0,p.jsxs)(p.Fragment,{children:[j.explicit&&(0,p.jsx)(ge.g,{}),j.paid&&(0,p.jsx)(ce.K,{}),j.nineteen&&(0,p.jsx)(Ce.q,{size:16})]}),playButtonWrapper:e=>(0,p.jsx)(oe.f,{enabled:N&&!k,showUri:a.show?.uri||void 0,children:e})})})]}):null})),Pe=l.memo((function({contextUri:e,usePlayContextItem:t}){const a=(0,l.useContext)(P.Z),{sortState:r}=(0,l.useContext)(m),[i,s]=(0,l.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),n=(0,l.useRef)(!1),o=(0,l.useRef)(0),A=(0,l.useRef)(0),{filter:u}=(0,l.useContext)(c.g),d=(0,l.useCallback)((()=>{A.current++}),[]),{ref:E,breakpoint:g}=(0,ae.x)({[ee.E.MEDIUM]:0,[ee.E.LARGE]:600}),C=(0,l.useCallback)(((e=!1)=>{const t=o.current;null!==t&&(n.current||(n.current=!0,(async e=>{const t=await a.getEpisodes({offset:e-A.current,limit:50,sort:V(r.option,r.order),filter:u});return A.current=0,t})(Number(t)).then((a=>{s((l=>{const r=Number(a.offset)+a.items.length,i=e?[]:[...l.items];return i.splice(Number(t),a.items.length,...a.items),o.current=r<a.totalLength?r:null,{...a,items:i}})),n.current=!1}))))}),[u,a,r]);return(0,l.useEffect)((()=>{o.current=0,C(!0)}),[C]),(0,p.jsx)(te.o.Provider,{value:g,children:(0,p.jsx)(J.pZ,{value:"track-list",children:(0,p.jsx)("div",{ref:E,children:(0,p.jsx)(Z._,{onReachBottom:C,triggerOnInitialLoad:!0,children:i.items.map(((a,l)=>(0,p.jsx)("div",{className:ue,children:(0,p.jsx)(xe,{index:l,episode:a,contextUri:e,onRemove:d,usePlayContextItem:t},`${a.uri}/${l}`)},`${l}${a.uri}`)))})})})})}));var Re=a(98764),be=a(27699),Se=a(39517),Oe=a(61681),fe=a(29117),Ie=a(42976),Be=a(6950),Me=a(96343),Ne=a(46545),ke=a(8646);const je=({metadata:e,backgroundColor:t,isPlaying:a,isOnline:r,togglePlay:s})=>{const{uri:n,name:o,images:c,totalLength:A,owner:u}=e,d=(0,l.useMemo)((()=>({id:u.username,uri:u.uri,name:u.username,displayName:u.displayName||void 0,images:u.images||[]})),[u]);return(0,p.jsxs)(fe.z,{backgroundColor:t,children:[(0,p.jsxs)(be.h,{children:[(0,p.jsx)(I.D,{size:"medium",onClick:()=>s(),isPlaying:a,uri:n,disabled:!r,ariaPlayLabel:i.Ru.get("playlist.a11y.play",o),ariaPauseLabel:i.Ru.get("playlist.a11y.pause",o)}),(0,p.jsx)(Se.X,{text:o})]}),(0,p.jsx)(Ie.K,{images:c,name:o,shape:Oe.u.ROUNDED_CORNERS,renderImage:()=>(0,p.jsx)(ke.b,{})}),(0,p.jsxs)(Be.Y,{children:[(0,p.jsx)(Re.E,{variant:"bodySmallBold",children:i.Ru.get("playlist")}),(0,p.jsx)(Ne.mm,{canEdit:!1,onClick:()=>{},children:o}),(0,p.jsx)(Me.t,{creators:[d],totalItems:A,hasEpisodes:!0})]})]})},ve=({metadata:e,canSort:t})=>{const a=(0,x.z)("#006450"),n=(0,y.n)(),{sortState:A}=(0,l.useContext)(m),{filter:u}=(0,l.useContext)(c.g),{isPlaying:d,togglePlay:E,usePlayContextItem:g}=(0,R.P)({uri:e.uri,metadata:{[b.W.SORTING_CRITERIA]:q(A.option,A.order),[b.W.FILTERING_PREDICATE]:(0,o.ly)(u)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"},{shuffle:!1,repeat:S.p.REPEAT_NONE});return(0,p.jsxs)("section",{className:$,"data-testid":"your-episodes-page",children:[(0,p.jsx)(O.Q,{children:i.Ru.get("sidebar.your_episodes")}),(0,p.jsx)(je,{metadata:e,backgroundColor:a,isPlaying:d,isOnline:n,togglePlay:E}),(0,p.jsxs)("div",{className:G,children:[(0,p.jsx)(X,{metadata:e,backgroundColor:a,isPlaying:d,isOnline:n,togglePlay:E,canSort:t}),(0,p.jsx)("div",{className:"contentSpacing",children:e.totalLength>0?(0,p.jsx)(Pe,{contextUri:e.uri,usePlayContextItem:g}):(0,p.jsx)(s.p,{message:i.Ru.get("collection.empty-page.episodes-subtitle"),title:i.Ru.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:i.Ru.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,p.jsx)(r.P,{"aria-hidden":"true"})})})]})]})},He=(0,l.memo)((function(){const e=(0,l.useContext)(P.Z).getCapabilities(),t=(0,f.u)();return t?(0,p.jsx)(h,{uri:t.uri,defaultSortOption:g.ADDED_AT,children:(0,p.jsx)(c.s,{uri:t.uri,children:(0,p.jsx)(ve,{metadata:t,canSort:e.canSortTracksAndEpisodes&&t.totalLength>0})})}):(0,p.jsx)(n.A,{hasError:!1,errorMessage:i.Ru.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map