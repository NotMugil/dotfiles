"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3667],{73477:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>st});var n=i(79474),l=i(97500),s=i.n(l),r=i(15851),a=i(22215),o=i(71215),c=i(14056),u=i(88040);const d="wF7I8x6BNoB5TCxuQM6p",m="mTVLkxm92ETj9KUKj6We",h="_ZzrZWfp7kDAE2lh9_Wc",p="Z7EJBI5IBlrJ1ze7IeeW",k="v5BmE36Bbgt7MSjmR6Xc",g="CAQW4b5xnSED1cuM6jcp",x="cRGZivJEkNn8_Q7kaHpT",v="jOhwShRZLQkG51TckxOL",C="RqE15DUByK94UTAHnMWF",f="AfV1a_jkmN7Ep4mov4u7",b="QrDtnomlujlNGYbhYEFQ",j="Jgem6BNDvKfWTBl3cX4W",y="ePoosDhdXDFF4p3vqKLd",S="QGE_nRKg4bMbNKF_e7PM",N="ddMrU_P5vADrfZCD5KQP",w="x591ODwZ11KBAWKS6SiE",B="yyE7Kg8ClZLrYU03bSoA",E="GJYNq4mAAnZScLzJPrZb",L="Q4qOSqJZ_dfNRxOBhsGE",M="hix4I_WU5iQPehn_m5h2",T="gOpH1qSy5WZp_dGqBjSO",R="transparent";var P=i(2690),I=i(19498),D=i(8955),F=i(72423),_=i(39927),U=i(83486),V=i(33082),z=i(7452),W=i(61127),A=i(30957),O=i(72728),K=i(47895);i(9856);const Z=()=>"function"==typeof window.showMainWindow,Q=()=>{Z()&&window.showMainWindow?.()},H="document-pip-hover-element",J="document-pip-cover-art",q="document-pip-cover-art-placeholder";var Y=i(13274);const G=({item:e,imageUrl:t})=>{const i=(0,W.iz)(e),n=(0,Y.jsx)(F._,{className:w,src:t,loading:"eager",testid:J,children:(0,Y.jsx)("div",{className:B,children:(0,Y.jsx)(D.s,{size:"xlarge",type:e.type,"data-testid":q})})});return i.url?(0,Y.jsx)(A.default,{className:N,to:i.url,children:n}):n},X=()=>{const{item:e,context:t}=(0,u.L)()??{},i=(0,n.useMemo)((()=>(0,z.h)(e?.images??void 0,{desiredSize:640})),[e?.images,640]),l=(0,U.l)(),r=(0,a.NC)(I.a4n),{isYourDJNarrator:o}=(0,K.CV)(),c=(0,n.useRef)(null),d=(0,n.useCallback)((()=>{if(!c.current)return;const e=c.current?.children[0];if(!e)return;const{offsetWidth:t,offsetHeight:i}=c.current;let n=Math.min(t,i);n=Math.min(n,640),1===(0,P.D)(e,"--extra-padding",0,"")&&(n-=Math.max(Math.min(.1*n,64),12)),e.width=e.height=n}),[]),m=(0,_.ox)();(0,n.useEffect)((()=>(m?.addEventListener("resize",d),()=>{m?.removeEventListener("resize",d)})),[d,m]);const h=e&&function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(e),p=(0,V.N)(e);let k=!h;!h||!l&&r||(k=!0);const g=(0,n.useMemo)((()=>k&&!p&&Z()),[p,k]);let x;x=o?(0,Y.jsx)(O.aU,{}):p?(0,Y.jsx)(G,{item:e,imageUrl:i}):(0,Y.jsx)(F._,{className:w,src:i,loading:"eager",testid:J,children:(0,Y.jsx)("div",{className:B,children:(0,Y.jsx)(D.s,{size:"xlarge",type:e?.type,"data-testid":q})})});const v=(0,n.useCallback)((()=>{g&&Q()}),[g]),C=(0,n.useCallback)((e=>{"Enter"===e.key&&v()}),[v]);return e&&t&&k?(0,Y.jsx)("div",{className:s()(y,{[S]:g}),ref:e=>{c.current=e,d()},role:"button",tabIndex:g?0:-1,onClick:v,onKeyDown:C,children:x}):null};i(65790),i(74892);var $=i(46697),ee=i(52792),te=i(67302),ie=i(63842),ne=i(27246);var le=i(82729);function se(e){if(!e)return null;return{width:e.innerWidth,height:e.innerHeight}}var re=i(30232);var ae=i(98764),oe=i(22496),ce=i(93905),ue=i(76443),de=i(22920),me=i(78005),he=i(92789);const pe="yb0n1ZOvcsGEP6MtzpHw",ke="srBfv7LB0I9QnzxBpeTV",ge="NZlJ5gYuUaWvALQ2gGfg",xe="CsqhW5xDG4TO3VV20IZJ";const ve=({item:e,onClick:t,className:i})=>{const n=(0,oe.XX)(e),l=(0,V.N)(e)?n?.title:e.name,r=(0,V.N)(e)?n?.subtitle:e.name,a=(0,he.K)(),o=function(e){switch(e){case"SMALL":return{title:"bodySmall",subtitle:"marginal"};case"MEDIUM":return{title:"bodyMedium",subtitle:"bodySmall"};default:return{title:"titleSmall",subtitle:"bodySmall"}}}(a.vertical);return(0,Y.jsxs)("div",{className:s()(pe,i),children:[(0,Y.jsx)("div",{className:ke,children:(0,Y.jsx)(de.r,{title:l,children:(0,Y.jsx)(ae.E,{"data-testid":"context-item-info-title",as:"div",variant:o.title,className:ke,dir:"auto",children:(0,Y.jsx)(ue.R,{item:e,onClick:t,adUrl:n?.url,children:l})})},e.uri)}),(0,Y.jsx)(me.l,{className:xe,item:e,size:"DEFAULT"===a.vertical?"small":"xsmall",variant:"DEFAULT"===a.vertical?"bodySmall":"marginal",enableVideoButton:!0}),(0,Y.jsx)("div",{className:ge,children:(0,Y.jsx)(de.r,{title:r,children:(0,Y.jsx)(ae.E,{"data-testid":"context-item-info-subtitles",as:"div",variant:o.subtitle,className:ge,semanticColor:"textSubdued",children:(0,Y.jsx)(ce.n,{item:e,onClick:t})})},e.uri)})]})};var Ce=i(61080),fe=i(42490),be=i(918),je=i(82548),ye=i(55541);const Se="U7qJ1UbUI0C76xXqYVQY",Ne="wSLUJtAztEeB6cSHzEjf",we="ivh1pWB_obHbkRTZRwlA",Be="CppZQsRDE7tQVl_Uo22Y",Ee={title:"bodyMediumBold",subtitle:"bodySmall"},Le={title:"titleSmall",subtitle:"bodyMedium"},Me=n.memo((()=>{const{openURLWithSessionTransfer:e}=(0,be.L)(),t="SMALL"===(0,he.K)().vertical?Ee:Le,i=(0,a.NC)(je.rW),l=(0,ye.D)("loggedin_upgrade_button"),r=(0,n.useCallback)((()=>{e(l(fe.M0),"_blank")}),[l,e]);return(0,Y.jsx)("div",{className:Se,children:(0,Y.jsxs)("div",{className:s()({"circular-sp-vietnamese":i},Ne),children:[(0,Y.jsx)(ae.E,{variant:t.title,dir:"auto",className:we,children:c.Ru.get("web-player.pip-mini-player.upsell.title")}),(0,Y.jsx)(ae.E,{variant:t.subtitle,semanticColor:"textSubdued",children:c.Ru.get("web-player.pip-mini-player.upsell.subtitle")}),(0,Y.jsx)("div",{className:Be,children:(0,Y.jsx)(Ce.$,{onClick:r,size:"small",children:c.Ru.get("web-player.pip-mini-player.upsell.cta-button")})})]})})}));var Te=i(78781),Re=i(48367),Pe=i(23689),Ie=i(94710),De=i(53007),Fe=i(91172);const _e=()=>(0,Y.jsx)("svg",{width:"7",height:"8",viewBox:"0 0 7 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:k,children:(0,Y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.37397 1.94965C6.60829 1.71534 6.60829 1.33544 6.37397 1.10113C6.13966 0.866812 5.75976 0.866812 5.52544 1.10113L3.47461 3.15196L1.42422 1.10157C1.18991 0.86726 0.81001 0.86726 0.575695 1.10158C0.341381 1.33589 0.341381 1.71579 0.575695 1.9501L2.62608 4.00049L0.575696 6.05087C0.341381 6.28519 0.341381 6.66509 0.575696 6.8994C0.81001 7.13372 1.18991 7.13372 1.42422 6.8994L3.47461 4.84902L5.52544 6.89985C5.75976 7.13416 6.13966 7.13416 6.37397 6.89985C6.60829 6.66554 6.60829 6.28564 6.37397 6.05132L4.32314 4.00049L6.37397 1.94965Z",fill:"#912616"})}),Ue=n.memo((()=>"SMALL"!==(0,he.K)().vertical?(0,Y.jsx)(Te.U,{}):(0,Y.jsx)(Re.M,{}))),Ve=({className:e})=>{const{setVideoPlayerUIFlag:t}=(0,ie.d)(),{onClick:i}=(0,Fe.D)({}),l=(0,n.useCallback)((()=>{t(ne.n.documentPip,!1),i()}),[t,i]),r=(0,Ie.mv)();return(0,Y.jsxs)("div",{style:{display:"var(--mini-player-drag-display)"},className:s()(e,h),children:[(0,Y.jsx)("button",{className:p,onClick:l,children:r.operatingSystem===De.f.macOS?(0,Y.jsx)(_e,{}):(0,Y.jsx)(Pe.M,{size:"xsmall",className:k})}),(0,Y.jsx)(Ue,{}),(0,Y.jsx)("div",{className:g})]})};var ze=i(68895),We=i(98678),Ae=i(41982),Oe=i(57506),Ke=i(86412),Ze=i(9789),Qe=i(68295),He=i(4958),Je=i(57654),qe=i(87687),Ye=i(38996),Ge=i(10551),Xe=i(45640);function $e(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,Ge.s)(e)??-1,totalContentMs:e.duration??-1}}function et(e){return Math.floor(100*e)}const tt="Y1sIRIE9_S2jPP9L89qs",it="lcyebQsHz0j8IkDXTAlB",nt="enGtDaA6WTTvIFhZz1wz",lt=n.memo((({item:e,spec:t,logger:i})=>{const l=e.uri,{onClickPlayPause:s,onClickLike:r,onClickSkipPrevious:a,onClickSkipNext:o,onClickRepeat:c,onClickShuffle:u,onClickVolumeButton:d,onClickVolumeBar:m,onDragVolumeBar:h,onClickSeekBack:p,onClickSeekForward:k}=(({uri:e,spec:t,logger:i})=>{const l=(0,n.useRef)(e);l.current=e;const s=(0,qe.K)(),r=(0,n.useMemo)((()=>t.playerControlsFactory()),[t]),a=(0,n.useCallback)((e=>{let t=null;l.current&&("pause"===e?t=r.playPauseButtonFactory().hitPause({itemToBePaused:l.current}):"resume"===e&&(t=r.playPauseButtonFactory().hitResume({itemToBeResumed:l.current})),t&&i.logInteraction(t))}),[i,r]),o=(0,n.useCallback)((e=>{if(!l.current)return;const t=r.likeButtonFactory(),n=e?t.hitLike({itemToBeLiked:l.current}):t.hitRemoveLike({itemNoLongerLiked:l.current});i.logInteraction(n)}),[i,r]),c=(0,n.useCallback)((()=>{const e=s.getState();if(!e)return;const t=r.previousButtonFactory().hitSkipToPrevious($e(e));i.logInteraction(t)}),[i,s,r]),u=(0,n.useCallback)((()=>{const e=s.getState();if(!e)return;const t=r.nextButtonFactory().hitSkipToNext($e(e));i.logInteraction(t)}),[i,s,r]),d=(0,n.useCallback)((e=>{const t=r.repeatButtonFactory();let n=null;switch(e){case Ye.p.REPEAT_TRACK:n=t.hitRepeatOneEnable();break;case Ye.p.REPEAT_CONTEXT:n=t.hitRepeatEnable();break;case Ye.p.REPEAT_NONE:n=t.hitRepeatDisable();break;default:(0,Xe.k)(e)}n&&i.logInteraction(n)}),[i,r]),m=(0,n.useCallback)((e=>{if(!l.current)return;const t=e?"shuffle":"linear",n=e?"linear":"shuffle",s=r.shuffleButtonFactory({uri:l.current}).hitSelectShuffleMode({previousMode:n,selectedMode:t});i.logInteraction(s)}),[i,r]),h=(0,n.useCallback)((e=>{const t=r.volumeMuteButtonFactory();i.logInteraction("muted"===e?t.hitMutePlayback():t.hitUnmutePlayback())}),[i,r]),p=(0,n.useCallback)((e=>{const t=r.volumeBarFactory();i.logInteraction(t.hitSetVolume({newVolumePercentage:et(e)}))}),[i,r]),k=(0,n.useCallback)((e=>{const t=r.volumeBarFactory();i.logInteraction(t.dragSetVolume({newVolumePercentage:et(e)}))}),[i,r]),g=(0,n.useCallback)((e=>{const t=r.seekBackwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,r]);return{onClickSeekForward:(0,n.useCallback)((e=>{const t=r.seekForwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,r]),onClickSeekBack:g,onClickPlayPause:a,onClickLike:o,onClickSkipPrevious:c,onClickSkipNext:u,onClickRepeat:d,onClickShuffle:m,onClickVolumeButton:h,onClickVolumeBar:p,onDragVolumeBar:k}})({uri:l,spec:t,logger:i}),g=(0,he.K)(),x=(0,We.YQ)(h,500,{leading:!1,trailing:!0});if(!l)return null;const v=(0,Ke.v)(e),C=(0,Oe.p)(e),f=(0,V.N)(e),b=function(e){if((0,Oe.p)(e)||(0,Ae.d)(e))return"audio"===e.mediaType||"mixed"===e.mediaType;return!1}(e),j="SMALL"===g.horizontal,y="SMALL"===g.vertical,S="MEDIUM"===g.vertical,N="DEFAULT"===g.vertical;return f?y?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(He.xJ,{onClick:s}),(0,Y.jsx)(He.v3,{onClick:k})]}):N?(0,Y.jsx)(He.v3,{onClick:k}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(He.hC,{onClick:p}),(0,Y.jsx)(He.xJ,{onClick:s}),(0,Y.jsx)(He.v3,{onClick:k}),(0,Y.jsx)(Je.M,{mode:Je.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:x})]}):y?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(He.xJ,{onClick:s}),b?(0,Y.jsx)(He.v3,{onClick:k}):(0,Y.jsx)(He.$K,{onClick:o})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:tt,children:[v&&(0,Y.jsx)(Qe.b,{uri:l,onClick:r,className:it}),C&&(0,Y.jsx)(Ze.b,{uri:l,onClick:r,className:it})]}),b?(0,Y.jsx)(He.hC,{onClick:p}):(0,Y.jsx)(He.uP,{onClick:u}),(0,Y.jsx)(He.dQ,{onClick:a}),(0,Y.jsx)(He.xJ,{iconSize:j||S?"small":"medium",onClick:s,className:nt}),(0,Y.jsx)(He.$K,{onClick:o}),b?(0,Y.jsx)(He.v3,{onClick:k}):(0,Y.jsx)(He.s_,{onClick:c}),(0,Y.jsx)(Je.M,{mode:Je.V.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:x})]})}));const st=n.memo((()=>{const{item:e,context:t}=(0,u.L)()??{},[i,l]=(0,n.useState)(!1),h=640,p=(0,a.NC)(I.Ln9),k=(0,a.NC)(I.rWU),g=(0,n.useMemo)((()=>(0,z.h)(e?.images??void 0,{desiredSize:h})),[e?.images,h]),y=(0,$.z)(g,R),S=(0,a.NC)(I.a4n);((e,t)=>{const i=(0,re.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),l=(0,n.useMemo)((()=>(0,z.h)(i?.images??void 0,{desiredSize:e})),[i?.images,e]);(0,$.z)(l,t)})(h,R);const{spec:N,logger:w}=(0,te.r)(o.w,{});(({spec:e,logger:t})=>{const i=(0,_.ox)(),l=(0,n.useRef)(null);null===l.current&&(l.current=se(i)),(0,le.s)((()=>{const n=se(i);null!==n&&null!==l.current&&(t.logInteraction(e.dragUiResize2d({startWidthPx:l.current.width,startHeightPx:l.current.height,endWidthPx:n.width,endHeightPx:n.height})),l.current=n)}),{throttleTime:500,leading:!1,trailing:!0})})({logger:w,spec:N}),(({spec:e,logger:t,pipWindow:i})=>{(0,n.useEffect)((()=>{if(!i)return;const n=n=>{if(n.currentTarget===i){const i=e.windowControlsFactory().closeButtonFactory().hitUiHide();t.logInteraction(i)}};return i.addEventListener("pagehide",n),()=>{i.removeEventListener("pagehide",n)}}),[t,i,e])})({logger:w,spec:N,pipWindow:window.documentPictureInPicture?.window??null});const{setVideoPlayerUIFlag:B}=(0,ie.d)(),[D,F]=(0,n.useState)("");(0,n.useLayoutEffect)((()=>{F(m)}),[]);const U=function(){const e=(0,_.ox)(),[t,i]=(0,n.useState)(!1);return(0,le.s)((()=>{const t=se(e);null!==t&&(t.width<=300&&t.height<=300?i(!0):i(!1))}),{throttleTime:500,leading:!1,trailing:!0}),t}();(0,n.useEffect)((()=>{S&&B(ne.n.documentPip,!0)}),[S,B]);const W=(0,n.useCallback)((e=>{var t;(t=e.target)&&"object"==typeof t&&"nodeName"in t&&"A"===t.nodeName&&"_blank"!==e.target.target&&(Z()?Q():l(!0))}),[]);((e,t)=>{const i=(0,_.ox)(),l=t??i;(0,n.useEffect)((()=>{e&&l&&(l.document.title=e)}),[e,l])})(c.Ru.get("web-player.pip-mini-player.window-title")),(0,n.useEffect)((()=>{if(i){const e=setTimeout((()=>{l(!1)}),3e3);return()=>{clearTimeout(e)}}}),[i]);const A=(0,n.useRef)(null),O=(0,a.NC)(I.HYy),K=(0,ee.t)(N,O),[J,q]=(0,n.useState)(!1),G=(0,n.useRef)(null),ae=(0,n.useRef)(null),oe=(0,n.useCallback)((()=>{q(!0),G.current&&clearTimeout(G.current),G.current=setTimeout((()=>{q(!1);const e=(0,P.D)(A.current,"--mouse-active-over-controls-fadeout-timeout",300,"ms");ae.current&&clearTimeout(ae.current),ae.current=setTimeout((()=>{ae.current=null}),e)}),1e3)}),[]),ce=(0,n.useCallback)((()=>{ae.current||q(!1)}),[]);if(!e||!t)return null;const ue={"--background-color":y,"--background-image-url":`url(${g})`,"--background-image-width":"640px","--background-image-height":"640px",display:"var(--mini-player-display)"},de=function(e){return"video"===e.mediaType||"mixed"===e.mediaType}(e),me=(0,V.N)(e);return!p&&!me&&U?(0,Y.jsx)(Me,{}):(0,Y.jsxs)("div",{ref:A,className:s()("encore-dark-theme","encore-small-devices-theme",{"circular-sp-vietnamese":k},d),style:{"--mini-player-display":"none","--mini-player-drag-display":"none"},children:[(0,Y.jsx)(Ve,{}),(0,Y.jsxs)("div",{className:s()(x,v),style:ue,ref:K,children:[(0,Y.jsx)("div",{className:s()(f,{[b]:!de}),"data-testid":"pip-hover-element",children:(0,Y.jsx)("div",{className:j,id:"document-pip-main-container",children:(0,Y.jsx)(X,{})})}),(0,Y.jsx)(ve,{item:e,className:T,onClick:W}),(0,Y.jsx)("div",{className:s()("encore-over-media-set",E,{[M]:J,[L]:(0,V.N)(e)}),dir:"ltr","data-testid":H,onMouseEnter:oe,onMouseMove:oe,onMouseLeave:ce,children:(0,Y.jsx)(lt,{item:e,spec:N,logger:w})})]}),(0,Y.jsx)("div",{className:D,children:(0,Y.jsx)(ze.B,{fadeIn:!1})}),(0,Y.jsx)(r.qb,{colorSet:"invertedLight",showSnackbar:i,className:C,children:c.Ru.get("web-player.pip-mini-player.snackbar.link-opened-in-main-window")})]})}))}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map