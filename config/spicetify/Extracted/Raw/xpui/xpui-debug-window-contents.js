"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[983],{31018:(e,s,t)=>{t.d(s,{DebugWindowContents:()=>ca});var n=t(79474),a=t(97500),r=t.n(a),l=t(13648),i=t(91366),o=t(83941),c=t(59572),d=t(22215),u=t(15851),h=t(19448),m=t(63275),p=t(94285),x=t(12667),v=t(61080),j=t(82685),g=t(67899),f=t(98930),y=t(50834);const b=(0,f.h)();window.abba={get:async function(e,s){const t=new g.EW((0,y.X)()),n=(await t.getValues(g.kM.fromPartial({}))).pairs;let a={},r="";if(n.abbaOverrides?r=n.abbaOverrides:n.abbaoverrides&&(r=n.abbaoverrides),r)try{a=JSON.parse(r)}catch(e){console.error(`error parsing value=${r}, error=${e}`)}if(Object.prototype.hasOwnProperty.call(a,e))return console.warn(`Abba: Override for ${e} : ${a[e]}`),void setTimeout((()=>s(null,a[e])),0);b.post("sp://abba/v1/flags",{flags:[e]}).then((t=>{const{flags:n=[]}=t,a=n[0]&&n[0].featureName===e&&n[0].cell;s(null,a||null)})).catch((e=>{s(e)}))},getAll:function(e){console.warn("Abba:getAll should only be used by TA tests for logging purposes."),b.get("sp://abba/v1/all_flags").then((s=>{const{flags:t=[]}=s,n=t.reduce(((e,s)=>(e[s.featureName]=s.cell,e)),{});e(null,JSON.stringify(n,null,2))})).catch((s=>{e(s)}))},getRequestedFlagNames:function(e){b.get("sp://abba/v1/requested_flag_names").then((s=>{e(null,JSON.stringify(s.sort(),null,2))})).catch((s=>{e(s)}))}};var N=t(84841);const w="rh7v8PDNC0ke2OkkyRhk",C="UZcGKrwobJ2tS5Ka06pD",S="Eve7a37F3JB6GI87kh6a",A="Kh0jtEAjRK83Z5A_IZRx";var k=t(13274);const I=()=>{const[e,s]=(0,n.useState)(60),[t,a]=(0,n.useState)(""),[r,l]=(0,n.useState)(""),[i,o]=(0,n.useState)({message:"",status:"success"}),[c,d]=(0,n.useState)(!1),g=({message:e,isError:s})=>{o({message:e,status:s?"error":"success"}),d(!0),setTimeout((()=>d(!1)),5e3)},f=(0,n.useCallback)((e=>{N.D.clearSlot(e).then((()=>{g({message:`${e} cleared`,isError:!1})}))}),[]);return(0,k.jsxs)("div",{className:w,children:[(0,k.jsx)(u.qb,{colorSet:"error"===i.status?"negative":"brightAccent",showSnackbar:c,children:i.message}),(0,k.jsx)(h.Z,{as:"h1",variant:"forte",paddingBottom:"24px",children:"Ad Debug Tools"}),(0,k.jsx)(h.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Increase Stream Time"}),(0,k.jsxs)(m.g,{label:"Click a tag or enter a number in seconds",children:[(0,k.jsxs)("div",{className:S,children:[(0,k.jsx)(p.v,{colorSet:"positive",onClick:()=>s(60),children:"1 min"}),(0,k.jsx)(p.v,{colorSet:"positive",onClick:()=>s(1200),children:"20 mins"}),(0,k.jsx)(p.v,{colorSet:"positive",onClick:()=>s(3600),children:"1 hour"})]}),(0,k.jsx)("div",{className:A,children:(0,k.jsx)(x.Z,{onChange:e=>s(e.currentTarget.value),placeholder:"seconds",value:e,type:"number",min:0})}),(0,k.jsx)(v.$,{size:"small",onClick:()=>{N.D.increaseStreamTime(e).then((()=>{g({message:`${e} seconds of stream time added`,isError:!1})})).catch((e=>{g({message:`Error increasing stream time: ${e}`,isError:!0})}))},children:"ADD STREAM TIME"})]}),(0,k.jsx)(h.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Override Country"}),(0,k.jsxs)(m.g,{label:"Calls testingClient.requestOverride with country key",children:[(0,k.jsx)("div",{className:A,children:(0,k.jsxs)(j.F,{value:r,onChange:e=>{l(e.currentTarget.value)},children:[(0,k.jsx)("option",{disabled:!0,value:"",children:"Choose a country"}),(0,k.jsx)("option",{value:"AU",children:"Australia"}),(0,k.jsx)("option",{value:"BR",children:"Brasil"}),(0,k.jsx)("option",{value:"JP",children:"Japan"}),(0,k.jsx)("option",{value:"SE",children:"Sweden"}),(0,k.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,k.jsx)("option",{value:"US",children:"USA"}),(0,k.jsx)("option",{value:"NZ",children:"New Zealand"}),(0,k.jsx)("option",{value:"",children:"Clear"})]})}),(0,k.jsx)(v.$,{size:"small",onClick:()=>{N.D.overrideCountry(r).then((e=>{0===e.status?g({message:`${r} override successful`,isError:!1}):g({message:`Error overriding country: ${e.status}`,isError:!0})}))},children:"OVERRIDE COUNTRY"})]}),(0,k.jsx)(h.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Clear Slot"}),(0,k.jsxs)(m.g,{label:"Calls slotsClient.clearAllAds for the selected slot",children:[(0,k.jsx)("div",{className:A,children:(0,k.jsxs)(j.F,{value:t,onChange:e=>{a(e.currentTarget.value)},children:[(0,k.jsx)("option",{disabled:!0,value:"",children:"Choose a slot"}),(0,k.jsx)("option",{value:"leaderboard",children:"leaderboard"}),(0,k.jsx)("option",{value:"sponsored-playlist",children:"sponsored playlist"}),(0,k.jsx)("option",{value:"billboard",children:"billboard"}),(0,k.jsx)("option",{value:"hpto",children:"hpto"}),(0,k.jsx)("option",{value:"stream",children:"stream"})]})}),(0,k.jsx)(v.$,{size:"small",onClick:()=>{""!==t?f(t):g({message:"Please select a slot",isError:!0})},children:"CLEAR SLOT"})]}),(0,k.jsx)(h.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Trigger Slot"}),(0,k.jsx)("button",{className:C,onClick:()=>{N.D.queueVideoAd()},children:"Queue Video Ad"})]})};var E=t(51847),O=t(66999),P=t(89796),R=t(34739),T=t(93770),D=t(5260),_=t(66144),L=t(260),M=t(55200),V=t(48088),B=t(42397),z=t(13149),F=t(26013),H=t(23689);const U=({view:e,className:s})=>{const t=(0,n.useCallback)((s=>{(0,M.TS)(e,s.nativeEvent,"search-panel")&&s.preventDefault()}),[e]),a=(0,n.useCallback)((s=>{e.dispatch({effects:D.Ri.of(new D.L0({search:s}))})}),[e]),r=(0,n.useCallback)((()=>{(0,D.jO)(e)}),[e]),l=(0,n.useRef)(null);return(0,n.useEffect)((()=>{e.dispatch({effects:D.Ri.of(new D.L0({search:""}))}),l.current?.select()}),[e]),(0,k.jsx)("div",{className:s,children:(0,k.jsx)(z.E,{iconLeading:(0,k.jsx)(F.C,{}),iconTrailing:(0,k.jsx)(H.M,{onClick:()=>r()}),children:(0,k.jsx)(x.Z,{ref:l,onKeyDown:e=>t(e),onChange:e=>a(e.currentTarget.value)})})})};var $=t(58775);function J(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Y(e,s,t=[]){let n=0;for(const a of Object.getOwnPropertyNames(e))s(e,a,t)?n++:J(e[a])&&(n+=Y(e[a],s,[a,...t]));return n}function K(e,s){return void 0===e[s]&&(e[s]={},!0)}function W(e,s){return!(!Array.isArray(e[s])||0!==e[s].length)&&(e[s]=[{}],!0)}function Z(e,s){return!(!Array.isArray(e[s])||1!==e[s].length||!J(e[s][0])||0!==Object.getOwnPropertyNames(e[s][0]).length)&&(e[s]=[],!0)}function G(e,s){return!(!J(e[s])||0!==Object.getOwnPropertyNames(e[s]).length)&&(e[s]=void 0,!0)}function Q(e,s,t){return!(!t.some((e=>/policy/i.test(e)))||!1!==e[s])&&(delete e[s],!0)}function q(e,s,t={}){let n=0;do{n=Y(s=e.fromPartial(s),K),n+=Y(s,W)}while(n>0);return Y(s,G),Y(s,Z),!0===t.cleanPolicies&&Y(s,Q),s}const X=["spotify:artist:5INjqkS1o8h1imAzPqGZBb","spotify:album:79dL7FLiJFOO0EoehUHQBv","spotify:track:6K4t31amVTZDgR3sKmwUJJ","spotify:show:1OLcQdw2PFDPG1jo3s0wbp","spotify:episode:0VpyIy8Srg5IKQdRAbDDH1"],ee=Object.values($.UH).filter((e=>"string"==typeof e)).map((e=>({name:e,value:(0,$.SP)(e)})));function se(e,s){let t=0;const n=[];if(s.type.is("["))s.parent();else if(s.type.is("Property")){if(!s.firstChild())return[];n.unshift(e.sliceDoc(s.from+1,s.to-1)),s.parent()}for(;s.parent()&&!s.type.is("JsonText");){if(s.type.is("Array"))n.unshift("[]");else if(s.type.is("Property")){if(!s.firstChild())break;n.unshift(e.sliceDoc(s.from+1,s.to-1)),s.parent()}if(++t>1e4)break}return n}function te(e,s){for(const t of s)if("[]"===t){if(!Array.isArray(e)||0===e.length)return null;e=e[0]}else Object.hasOwn(e,t)&&(e=e[t]);return e}function ne(e={}){return(0,E.yU)({activateOnTyping:!1,override:[s=>{const t=(0,R.mv)(s.state).cursorAt(s.pos,-1);if(t.type.is("{")||t.type.is("Object")){const n=se(s.state,t),a=function(e,s){return Object.getOwnPropertyNames(te(e,s))}(e,n);return{from:s.pos,options:a.map((e=>({type:"text",label:e,apply:`"${e}"`})))}}if(t.type.is("[")||t.type.is("Array")){const n=se(s.state,t),a=te(e,n);return Array.isArray(a)&&J(a[0])?{from:s.pos,options:[{type:"text",label:"{ ... }",apply:JSON.stringify(a[0]),boost:1},{type:"text",label:"{}",boost:0}]}:/extension/i.test(n[n.length-1])?{from:s.pos,options:ee.map((({name:e,value:s})=>({type:"constant",label:e,apply:`${s}`})))}:{from:s.pos,options:X.map((e=>({type:"text",label:`"${e}"`})))}}if(t.type.is("Property")){const n=se(s.state,t),a=function(e,s){const t=te(e,s);return void 0===t?"null":Array.isArray(t)?"array":typeof t}(e,n),r=[];if("boolean"===a)r.push({type:"keyword",label:"true",boost:1}),r.push({type:"keyword",label:"false",boost:0});else if("null"===a)r.push({type:"keyword",label:"null",boost:1}),r.push({label:"{}",apply:"{}",boost:0});else if("string"===a){r.push({label:'""'});for(const e of X)r.push({label:`"${e}"`})}else if("number"===a)if(/extension/i.test(n[n.length-1]))for(const{name:e,value:s}of ee)r.push({type:"constant",label:e,apply:`${s}`});else r.push({label:"0",apply:"0"}),r.push({label:"10",apply:"10"}),r.push({label:"100",apply:"100"});else"object"===a?r.push({label:"{}",apply:"{}"}):"array"===a&&r.push({label:"[]",apply:"[]"});return{from:s.pos,options:r}}return null}]})}const ae=[L.bM,(0,R.y9)(L.kS),(0,M.$K)(),(0,M.dz)(),(0,M.Wu)(),(0,M.VH)(),_.$t.allowMultipleSelections.of(!0),M.w4.of([...O.pw,...O.cL,...E.OO,...D.Eo,O.Yc]),(0,D.$P)({top:!0,createPanel:e=>{const s=e.dom.ownerDocument.createElement("div");return(0,V.H)(s).render((0,k.jsx)(B.ID,{target:e.dom.ownerDocument.head,children:(0,k.jsx)(U,{view:e})})),{dom:s,top:!0}}}),(0,R.Lv)(),(0,P.Pq)()],re=[...ae,(0,O.b6)(),(0,T.bu)((0,P.cp)()),(0,R.WD)(),(0,R.SG)(),(0,E.wm)()],le=[...ae,_.$t.readOnly.of(!0)],ie=new _.xx,oe=({readOnly:e=!1,onChange:s,onDiagnostics:t,editorRef:a,className:r})=>{const l=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const n=new M.Lz({parent:l.current,extensions:[...e?le:re,ie.of(ne({})),M.Lz.updateListener.of((e=>{e.docChanged&&s?.(e.state.doc.toString());for(const s of e.transactions)for(const e of s.effects)e.is(T._k)&&t?.(e.value)}))]});return void 0!==a&&(a.current=n),()=>{n.destroy()}}),[e,s,t,a]),(0,k.jsx)("div",{className:r,ref:l})};function ce({readOnly:e,className:s,onChange:t,onDiagnostics:a}){const r=(0,n.useRef)(),l=(0,n.useRef)(t),i=(0,n.useRef)(a);l.current=t,i.current=a;const o=(0,n.useCallback)((()=>{const e=r.current;return void 0!==e?e.state.doc.toString():null}),[]),c=(0,n.useCallback)((e=>{const s=r.current;void 0!==s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:e}})}),[]),d=(0,n.useCallback)((e=>{const s=r.current;void 0!==s&&s.dispatch({effects:ie.reconfigure(ne(e))})}),[]),u=(0,n.useCallback)((e=>{l?.current?.(e)}),[]),h=(0,n.useCallback)((e=>{i?.current?.(e)}),[]);return{Editor:(0,k.jsx)(oe,{editorRef:r,readOnly:e,className:s,onChange:u,onDiagnostics:h}),getContent:o,setContent:c,setReference:d}}var de=t(30232);const ue="wNixUJkDt8ib6LarXls_",he=()=>{const e=(0,de.o)((e=>e)),s=JSON.stringify(e,null,2),{Editor:t,setContent:a}=ce({readOnly:!0});return(0,n.useEffect)((()=>{a(s)}),[s,a]),(0,k.jsx)("div",{className:ue,children:t})};var me=t(33013),pe=t(26715),xe=t(30383),ve=t(8297),je=t(84681),ge=t(27500),fe=t(1860),ye=t(74946),be=t(59379);const Ne={tableContainer:"TgLcw_ZdaHvESkPEgYLQ",collapsed:"zNGegc8KwsTw3SQKHf_u",tableTitle:"qMSX_Pybr996fZcayagh",tableToggle:"YS6d6BNlR28mEtkxH07w",table:"vDxH9w6xk7bHMabZsuhj",tableHead:"sEU19oMM1YAICdZY23E5",rowHeader:"Cw3H6ooohrEJbRFy9cdg",rowName:"W0HCTspPvFScLWQ9QyJq",rowValue:"WM3ogL7MpxKR0Ym_n9qw",rowActions:"DQhZfpOIasfYMfhSltgB",propertyDescription:"iTrSMSnZF2Sr2pAGcj21",rowAction:"gQCLM4Et4LueQCIi2zW9",rowControl:"f9VIhAIG3YgquVQZqHZ5"},we=({title:e,titleExtra:s,rows:t,cols:a,canCollapse:l=!1,isCollapsedInitially:i=!1,renderHead:o=!1,renderRow:c})=>{const[d,u]=(0,n.useState)(!!l&&i);return(0,k.jsxs)(je.K,{className:r()(Ne.tableContainer,{[Ne.collapsed]:d}),children:[e?(0,k.jsxs)("div",{className:Ne.tableTitle,onClick:()=>{l&&u(!d)},children:[l?(0,k.jsx)("button",{className:Ne.tableToggle,children:d?(0,k.jsx)(ge.V,{size:"small"}):(0,k.jsx)(fe.r,{size:"small"})}):null,(0,k.jsx)("h3",{children:e}),s]}):null,(0,k.jsxs)(ye.X,{className:Ne.table,children:[(0,k.jsx)("colgroup",{children:a.map(((e,s)=>(0,k.jsx)("col",{width:e.width,className:e.className},s)))}),o?(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{children:a.map(((e,s)=>(0,k.jsx)(be.M,{className:Ne.tableHead,children:e.name},s)))})}):null,(0,k.jsx)("tbody",{children:Array.isArray(t)?t.map((e=>c?c(e,a):null)):t})]})]})};var Ce=t(66565),Se=t(75477),Ae=t(19498);const ke="YMcjds_NcAi4cEbmH8CQ",Ie="gh0JfRJ_O4dLCEdAjNVw",Ee="Txtj4xKE3LxMG2u23BIV",Oe="qJy0FbUBMTQ6CejUVLKy",Pe="C58BICAHtIsDaVKzFpyb",Re="SdB9m1NLh7FZ1mMfQsAR",Te="SxRUmP6Y0IRW1aJijfU5",De="BWvIH314t4_hcIDb2onA",_e="ayzSMCWwex0kqdHjRr3Y",Le=()=>{const{localConfiguration:e,setOverrides:s}=(0,Se.g)();return(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,highlight:!0,children:"React-Query Cache Persistence"}),(0,k.jsx)(pe.n,{className:Ne.rowValue,align:"right",children:(0,k.jsx)(xe.X,{checked:e.getValue(Ae.QMQ),onChange:e=>{s(ve.Vk.fromJSON({enableReactQueryPersistence:Boolean(e.target.checked)}))},children:"Enabled"})}),(0,k.jsx)(pe.n,{className:Ne.rowValue,align:"right",children:(0,k.jsx)(v.$,{size:"small",onClick:()=>{(0,Ce.k)()},children:"Clear cache"})})]})},Me=()=>(0,k.jsx)("div",{className:ke,children:(0,k.jsx)(we,{title:"Development options",rows:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(Le,{})}),cols:[],canCollapse:!0})});var Ve=t(99754),Be=t(7141),ze=t(68421);const Fe="WAiWdE4pBSCiS9bz5mI7",He="WU9QRIfJrSPefs8V7QI0",Ue="pb99Xy2ZbO0AVWK2BIvI",$e="G_PJW1iqB1P56Y5QBCja",Je=[{label:"Production",value:"prod"},{label:"Development",value:"dev"}],Ye=()=>{const e=(0,Ve.wA)(),s=(0,Ve.d4)((e=>e.inAppMessaging.env)),t=(0,Ve.d4)((e=>e.inAppMessaging.message)),[a,r]=(0,n.useState)(""),[l,i]=(0,n.useState)(""),[o,c]=(0,n.useState)(!1);(0,n.useEffect)((()=>{t&&o&&c(!1)}),[t,o]);const d=!t&&o;return(0,k.jsx)("div",{className:Fe,children:(0,k.jsxs)("div",{className:He,children:[(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingEnv",children:"Mode (endpoint):"})}),(0,k.jsx)(Be.C,{dir:"auto",value:s,id:"desktop.settings.inAppMessagingEnv",onSelect:function(s){"prod"!==s&&"dev"!==s||e((0,ze.$h)(s))},children:Je.map((({label:e,value:s})=>(0,k.jsx)("option",{value:s,children:e},s)))}),(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingCreativeId",children:"Creative Id:"})}),(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:Ue,placeholder:"(eg. 12123434)",id:"desktop.settings.inAppMessagingCreativeId",name:"Creative Id",type:"text",value:a,onChange:function(e){r(e.target.value),c(!1)}})}),(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingAppUri",children:"URI for Dynamic Content (optional):"})}),(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:Ue,placeholder:"(eg. spotify:artist:123)",id:"desktop.settings.inAppMessagingAppUri",name:"App Uri",type:"text",value:l,onChange:function(e){i(e.target.value),c(!1)}})}),(0,k.jsx)("div",{}),(0,k.jsx)("div",{}),(0,k.jsx)("div",{children:(0,k.jsx)(v.$,{colorSet:"invertedLight",onClick:function(s){s.preventDefault(),e((0,ze.yR)(a,l)),c(!1),window.setTimeout((()=>{c(!0)}),1e3)},children:"Get Preview"})}),d&&(0,k.jsx)("div",{className:$e,children:"No Messsage found"})]})})};var Ke=t(39927),We=t(587),Ze=t(52459),Ge=t(82548),Qe=t(87240),qe=t(15002),Xe=t(83856),es=t(15891),ss=t(26360),ts=t(82052),ns=t(3775);t(16990);const as=new ns.l("lookupDebug","query","93ba3f4816c1a157adbfc0ac50aaed054a6d4ca053b802332dbdec68fe6e88b1",null);var rs=t(13161),ls=t(17713);const is="coy21BK2YBTFtmDx4TNO",os="qqllJKnB60UvRvOwb8a2";function cs(e){return Boolean(e)}function ds(e){return(0,rs.yr)(e)}const us=()=>{const{request:e}=(0,n.useContext)(es.j),[s,t]=(0,ts.x)(ls.P,[]),[a,r]=(0,n.useState)(""),l=async()=>{if(!function(e){const s=(0,Xe.o_)(e);return!(!s||(0,Xe.Z0)(s)||s?.id===Xe.NQ.COLLECTION||!(!s||(0,Xe._T)(s)||(0,Xe.ec)(s)||(0,Xe.gH)(s)||(0,Xe.AP)(s)||(0,Xe.U_)(s)||(0,Xe.WB)(s)||(0,Xe.nu)(s)))}(a))return;const n=await(0,ss.c)(e,as,{uris:[a]}),r=n?.data?.lookup.map(ds).filter(cs)||[];t(r.concat(s))};return(0,k.jsxs)("div",{className:is,children:[(0,k.jsx)("h1",{children:"Home"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{children:"Shortcuts override"}),(0,k.jsxs)(m.g,{label:"Entity URI to add",labelFor:"shortcut_to_add",children:[(0,k.jsx)(x.Z,{id:"shortcut_to_add",type:"text",placeholder:"spotify:episode:123123",value:a,onChange:e=>r(e.currentTarget.value)}),(0,k.jsxs)(qe.N,{children:["Right now we only allow: Artist, Album, Audiobook, Podcast, Track, User, Playlist, Episode and Chapter.",(0,k.jsx)("br",{})," For more info check the HomeV2ShortcutsShelf logic."]})]}),(0,k.jsx)(v.$,{size:"small",className:os,disabled:0===a.length,onClick:()=>{l()},children:"Add to Shortcuts"}),(0,k.jsx)(v.$,{size:"small",className:os,onClick:()=>{t([])},children:"Clear all overrides"})]})]})};var hs=t(72728),ms=t(53949),ps=t(74161);function xs(){const e=(0,Ke.ox)();return(0,n.useMemo)((()=>e?new e.Function("value","if (value) { navigator.clipboard.writeText(value) }"):()=>{}),[e])}const vs="UX08Irxg3ssZhLQNj40b",js=()=>{const e=xs(),s=(0,ps.Y)(),t=s.token?.accessToken??"Not authorized",n=new Date(s.token?.accessTokenExpirationTimestampMs??0);return(0,k.jsx)("div",{className:vs,children:(0,k.jsx)(we,{title:"Authorization",rows:[{name:"Token",value:t},{name:"Expires At",value:n.toLocaleString()},{name:"Retry Attempt",value:s.retryAttempt?.toString()??"N/A"},{name:"Retry At",value:s.retryAt?.toLocaleString()??"N/A"}],cols:[{width:"30%"},{},{width:"16px"}],renderRow:({name:s,value:t})=>(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,highlight:!0,children:s}),(0,k.jsx)(pe.n,{className:Ne.rowValue,truncate:!0,align:"right",children:t}),(0,k.jsx)(pe.n,{className:Ne.rowActions,children:(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>e(t),children:(0,k.jsx)(ms._,{size:"small"})})})]})})})};var gs=t(79864);const fs="A83S2dzV013Y19VLxbRT",ys=({name:e,value:s})=>{const t=xs();return(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,highlight:!0,children:e}),(0,k.jsx)(pe.n,{className:Ne.rowValue,truncate:!0,align:"right",children:s}),(0,k.jsx)(pe.n,{className:Ne.rowActions,children:(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>t(s),children:(0,k.jsx)(ms._,{size:"small"})})})]})},bs=({device:e})=>(0,k.jsx)(we,{title:e.name,rows:[{name:"Device",value:e?.name},{name:"Identifier",value:e.id},{name:"Type",value:e.type},{name:"Group",value:e.isGroup.toString()},{name:"Local",value:e.isLocal.toString()},{name:"Active",value:e.isActive.toString()},{name:"Connecting",value:e.isConnecting.toString()},{name:"Disabled",value:e.isDisabled.toString()},{name:"Volume",value:e.volume.toString()},{name:"HiFi",value:e.hifiSupport.deviceSupported.toString()}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(ys,{...e}),canCollapse:!0,isCollapsedInitially:!0}),Ns=()=>{const{connectionStatus:e,devices:s}=(0,gs.v)((e=>({connectionStatus:e.connectionStatus,devices:e.devices})));return(0,k.jsxs)("div",{className:fs,children:[(0,k.jsx)(we,{title:"Connect",rows:(0,k.jsx)(ys,{name:"Status",value:e}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),s.map((e=>(0,k.jsx)(bs,{device:e},e.id)))]})};var ws=t(98764),Cs=t(66675),Ss=t(32089),As=t(52716),ks=t(25556),Is=t(39636),Es=t(20004),Os=t(82058),Ps=t(77558),Rs=t(15170),Ts=t(50319),Ds=t(41975),_s=t(91275),Ls=t(20076),Ms=t(20005),Vs=t(12892),Bs=t(68079),zs=t(22142),Fs=t(43824),Hs=t(55052),Us=t(12405),$s=t(56186),Js=t(94343),Ys=t(21051),Ks=t(81987),Ws=t(72541),Zs=t(51237),Gs=t(96910),Qs=t(50283),qs=t(4058),Xs=t(87733),et=t(14115),st=t(50620),tt=t(31394),nt=t(73221),at=t(37953),rt=t(70688),lt=t(90041),it=t(95641);const ot=[As.B,ks.ve,Is.Pc,Es.BM,Ds.CJ,Ds.NB,Ds.uC,Ds.RI,Ds.UF,Ds.FY,Ds.B3,Ds.Dt,Ds.s,Ds.Xk,Ds.Yl,Os.r,Ps.pt,Rs.MI,Ts.di,_s.BO,Ls.Pm,Ms.Ww,Vs._w,Bs.rM,Bs.A5,Bs.qM,zs.hN,Fs.NI,Hs.lb,Us.xo,$s.IU,g.EW,Js.oW,Ys.Gy,Ks.LN,Ws.HG,it._4,Zs.Ag,Gs._,Qs.y9,qs.A,Xs.xV,et.hA,st.NH,$.sp,tt.GD,nt.to1,nt.hm7,nt.hb0,nt.Bl$,nt.ZxE,rt.aA,lt.FZ,at.zW];function ct(e){return JSON.parse(e,((e,s)=>null===s?void 0:s))}function dt(e){return JSON.stringify(e,((e,s)=>void 0===s?null:"bigint"==typeof s?s.toString():s),2)}function ut(){const{serviceMap:e,serviceNames:s}=(0,n.useMemo)((()=>{const e=function(e){return ot.sort(((e,s)=>e.SERVICE_ID.localeCompare(s.SERVICE_ID))).reduce(((s,t)=>(s[t.SERVICE_ID]={methods:t.METHODS,client:new t(e)},s)),{})}((0,y.X)());return{serviceMap:e,serviceNames:Object.keys(e)}}),[]),[t,a]=(0,n.useState)(s[0]),r=e[t].methods,l=e[t].client,i=Object.keys(r),[o,c]=(0,n.useState)(i[0]),d=r[o].requestType,u=r[o].isStreaming,h=l[o],m=(0,n.useCallback)(((s,t)=>{const n=s??Object.keys(e)[0],r=e[n].methods,l=t??Object.keys(r)[0];a(n),c(l)}),[e,a,c]),p=(0,n.useMemo)((()=>dt(q(d,{},{cleanPolicies:!0}))),[d]),x=(0,n.useMemo)((()=>q(d,{})),[d]),v=(0,n.useCallback)((e=>{try{return dt(q(d,ct(e),{cleanPolicies:!0}))}catch(s){return e}}),[d]),j=(0,n.useCallback)((async(e,s)=>{const t=d.fromPartial(ct(e));if(u)return h.call(l,t,(e=>{s(dt(e))}));const n=await h.call(l,t);return s(dt(n)),null}),[l,u,d,h]);return{services:s,methods:i,service:t,method:o,client:l,message:d,call:j,jsonReference:x,jsonString:p,prettify:v,update:m}}const ht="k0haAXLr7hf1SVRhhDf_",mt="JzYBuC4I28TFE0vRsOB2",pt="Jifrv_M5FQ_4004rxNlX",xt="ai8gaZdopia8aUEGYxks",vt="sSRpW8Sztpp8r_xEe6yQ",jt="xoLDWOSxKz7zqi5PkIS1",gt="GuzyU8s8JXVn4PKEcz1o",ft=()=>{const{services:e,methods:s,service:t,method:a,call:r,jsonReference:l,jsonString:i,prettify:o,update:c}=ut(),d=(0,n.useRef)(null),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)([]),x=m.length>0,{Editor:v,setContent:j,getContent:g,setReference:f}=ce({className:gt,onDiagnostics:e=>p(e)}),{Editor:y,setContent:b}=ce({className:gt,readOnly:!0}),N=(0,n.useCallback)((()=>{null!==d.current&&(d.current.cancel(),d.current=null,h(!1))}),[h]),w=(0,n.useCallback)((async()=>{N();const e=await r(g()??"{}",(e=>{b(e)}));null!==e&&(d.current=e,h(!0))}),[r,N,g,b]),C=(0,n.useCallback)((async()=>{const e=o(g()??"{}");j(e)}),[o,g,j]);(0,n.useEffect)((()=>{f(l),j(i),b(""),N()}),[f,l,j,i,b,N]);const S=[{label:"Core",options:e.filter((e=>-1===e.indexOf("desktop"))).map((e=>({label:e,value:e})))},{label:"Desktop",options:e.filter((e=>-1!==e.indexOf("desktop"))).map((e=>({label:e,value:e})))}],A=s.map((e=>({label:e,value:e})));return(0,k.jsxs)("div",{className:ht,children:[(0,k.jsxs)("div",{className:mt,children:[(0,k.jsx)(ws.E,{as:"p",variant:"bodyMedium",children:"Endpoint"}),(0,k.jsx)(Ss.Ay,{value:{label:t,value:t},options:S,onChange:e=>{c(e?.value??void 0)},styles:{menuList:s=>({...s,minHeight:`min(60vh, ${50*e.length}px)`})}}),(0,k.jsx)(Ss.Ay,{value:{label:a,value:a},options:A,onChange:e=>c(t,e?.value??void 0),styles:{menuList:e=>({...e,minHeight:`min(60vh, ${50*s.length}px)`})}})]}),(0,k.jsxs)("div",{className:pt,children:[(0,k.jsxs)("div",{className:vt,children:[(0,k.jsx)(ws.E,{as:"p",variant:"bodyMedium",children:"Request"}),(0,k.jsx)(Cs.n,{className:jt,size:"small",disabled:x,onClick:C,children:"Prettify"}),(0,k.jsx)(Cs.n,{className:jt,size:"small",disabled:x,onClick:u?N:w,children:u?"Cancel":"Send"})]}),v]}),(0,k.jsxs)("div",{className:xt,children:[(0,k.jsx)("div",{className:vt,children:(0,k.jsx)(ws.E,{as:"p",variant:"bodyMedium",children:"Response"})}),y]})]})};var yt=t(59841),bt=t(37463),Nt=t(52444),wt=t(12720),Ct=t(63469),St=t(98258),At=t(17015),kt=t(11120),It=t(75257),Et=t(5679);var Ot=t(3991),Pt=t(40893);var Rt=t(87687),Tt=t(7452);const Dt=({size:e,ranges:s})=>{if(0===s.length)return(0,k.jsx)("div",{className:Ee,children:(0,k.jsx)("div",{className:Oe})});const t=`linear-gradient(90deg, ${s.map((s=>{const t=100*s.fromByte/e,n=100*s.toByte/e;return`transparent ${t}%, ${yt.azure135} ${t}%, ${yt.azure135} ${n}%, transparent ${n}%`})).join(", ")})`;return(0,k.jsx)("div",{className:Ee,children:(0,k.jsx)("div",{className:Oe,style:{background:t}})})},_t=({item:e,file:s})=>{const t=(0,Rt.K)(),n=xs(),a=(function(e){let s,t,n=0;if(0===e.length)return n;for(s=0;s<e.length;s++)t=e.charCodeAt(s),n=(n<<5)-n+t,n|=0;return n}(`${s.format}${s.bitrate}${s.formatEnum}`)+180)%360;return(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,highlight:!0,children:(0,k.jsxs)("div",{className:Pe,style:{background:`linear-gradient(180deg, hsl(${a}, 60%, 30%), hsl(${a}, 40%, 70%))`},children:[(0,k.jsx)("span",{className:Re,children:s.format}),(0,k.jsx)("span",{className:Te,children:Lt(s)})]})}),(0,k.jsx)(pe.n,{className:Ne.rowValue,truncate:!0,children:(0,k.jsxs)("div",{className:Ie,children:[s.fileId,(0,k.jsx)(Dt,{size:s.byteSize,ranges:s.byteRanges})]})}),(0,k.jsxs)(pe.n,{className:Ne.rowActions,children:[(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>{t.play({uri:"spotify:internal:fileplayback",pages:[{items:[{...e,provider:"context",metadata:{"media.manifest":JSON.stringify({id:s.fileId,bitrate:s.bitrate,format:s.formatEnum,encryption:"aes"})}}]}]},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,k.jsx)(bt.A,{size:"small"})}),(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>{n(s.fileId)},children:(0,k.jsx)(ms._,{size:"small"})})]})]})};function Lt(e){switch(e.formatEnum){case 16:return"16-bit";case 22:return"24-bit";default:return Mt(e.bitrate,1e3,"k")}}function Mt(e=void 0,s=1,t=""){if(void 0!==e&&-1!==e)return"string"==typeof e&&(e=Number.parseInt(e,10)),`${(Number(e)/s).toLocaleString("en",{maximumFractionDigits:10})}${t}`}function Vt(e=void 0){return!0===e?"Yes":"No"}function Bt(e=void 0){if(void 0!==e)return(0,Tt.f)(Number(e))}const zt=({name:e,value:s})=>{const t=xs();return(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,highlight:!0,children:e}),(0,k.jsx)(pe.n,{className:Ne.rowValue,truncate:!0,align:"right",children:s}),(0,k.jsx)(pe.n,{className:Ne.rowActions,children:(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>t(s),children:(0,k.jsx)(ms._,{size:"small"})})})]})},Ft=({terminalType:e,transportType:s,isDefaultDevice:t})=>{const n=t?"essentialPositive":"essentialBase",a=[];switch(e){case Zs.FI.TERMINAL_TYPE_SPEAKERS:a.push((0,k.jsx)(Nt.r,{semanticColor:n,size:"small"}));break;case Zs.FI.TERMINAL_TYPE_HEADPHONES:a.push((0,k.jsx)(wt.r,{semanticColor:n,size:"small"}));break;case Zs.FI.TERMINAL_TYPE_DISPLAY_DEVICE:a.push((0,k.jsx)(Ct.I,{semanticColor:n,size:"small"}))}switch(s){case Zs.Yg.TRANSPORT_TYPE_BUILT_IN:case Zs.Yg.TRANSPORT_TYPE_VIRTUAL:break;case Zs.Yg.TRANSPORT_TYPE_USB:a.push((0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{position:"relative",top:"3px",width:16,height:16,fill:(0,St.oj)(n)},children:(0,k.jsx)("path",{d:"m7.792.312-1.533 2.3A.25.25 0 0 0 6.467 3H7.5v7.319a2.5 2.5 0 0 0-.515-.298L5.909 9.56A1.5 1.5 0 0 1 5 8.18v-.266a1.5 1.5 0 1 0-1 0v.266a2.5 2.5 0 0 0 1.515 2.298l1.076.461a1.5 1.5 0 0 1 .888 1.129 2.001 2.001 0 1 0 1.021-.006v-.902a1.5 1.5 0 0 1 .756-1.303l1.484-.848A2.5 2.5 0 0 0 11.995 7h.755a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h.741a1.5 1.5 0 0 1-.747 1.142L8.76 8.99a2.584 2.584 0 0 0-.26.17V3h1.033a.25.25 0 0 0 .208-.389L8.208.312a.25.25 0 0 0-.416 0Z"})}));break;case Zs.Yg.TRANSPORT_TYPE_BLUETOOTH:a.push((0,k.jsx)(At.C,{semanticColor:n,size:"small"}));break;case Zs.Yg.TRANSPORT_TYPE_DISPLAY_DEVICE:a.push((0,k.jsx)(Ct.I,{semanticColor:n,size:"small"}))}return 0===a.length&&a.push((0,k.jsx)(kt.N,{semanticColor:n,size:"small"})),(0,k.jsx)(k.Fragment,{children:a})},Ht=({name:e,id:s,isDefaultDevice:t,terminalType:n,terminalTypeRaw:a,transportType:r,transportTypeRaw:l})=>{const i=xs();return(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsxs)(pe.n,{className:Ne.rowName,highlight:!0,children:[(0,k.jsx)(Ft,{terminalType:n,transportType:r,isDefaultDevice:t})," ",e]}),(0,k.jsx)(pe.n,{className:Ne.rowValue,truncate:!0,children:s}),(0,k.jsx)(pe.n,{className:Ne.rowValue,children:a}),(0,k.jsx)(pe.n,{className:Ne.rowValue,children:l}),(0,k.jsx)(pe.n,{className:Ne.rowActions,children:(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>i(s),children:(0,k.jsx)(ms._,{size:"small"})})})]})},Ut=()=>{const e=(0,de.o)((e=>e?.item??null)),s=function(){const[e,s]=(0,n.useState)(null),t=(0,Et.a)();return(0,n.useEffect)((()=>{let e=!0;return t.getPlaybackInfo().then((t=>{e&&s(t)})),()=>{e=!1}}),[t]),(0,Pt.F)(Ot._.INFO,(({data:e})=>{s(e)})),e}(),t=function(e=null,s=null){const[t,a]=(0,n.useState)(null),r=(0,Et.a)();return(0,n.useEffect)((()=>{let t=!0,n=null;if(null===e)a(null);else{const l=async()=>{const s=await r.getFiles(e);t&&a(s)};l(),null!==s&&(n=window.setInterval(l,s))}return()=>{t=!1,null!==n&&window.clearInterval(n)}}),[r,e,s]),t}(e?.uri,500),a=(0,Rt.K)(),[r,l]=(0,n.useState)([]);return(0,n.useEffect)((()=>{const e=(0,y.X)(),s=new Zs.Ag(e).getAudioOutputDevices({},(e=>{l(e.devices.sort(((e,s)=>e.isDefaultDevice?-1:s.isDefaultDevice?1:e.name.localeCompare(s.name))))}));return()=>{s.cancel()}}),[]),null===e?(0,k.jsx)("div",{className:ke,children:"Nothing is currently playing."}):(0,k.jsxs)("div",{className:ke,children:[(0,k.jsxs)("div",{className:De,children:[(0,k.jsx)(ws.E,{variant:"bodySmallBold",children:"Forced shuffle"}),(0,k.jsx)(It.l,{id:"forced-shuffe",value:a.getForcedShuffle(),onSelected:e=>{a.setForcedShuffle(e)}})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:_e,onClick:()=>{a.play({uri:"invalid_context_uri"},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,k.jsx)("span",{children:"Clear context"})})}),(0,k.jsx)(we,{title:"Devices",rows:r,cols:[{name:"Name",width:"30%"},{name:"ID"},{name:"Terminal"},{name:"Transport"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(Ht,{...e}),canCollapse:!0}),(0,k.jsx)(we,{title:"Details",rows:[{name:"url"===s?.fileType?"URL":"File ID",value:s?.fileId},{name:"Type",value:s?.fileType},{name:"Codec",value:s?.codecName},{name:"Bitrate",value:Mt(s?.fileBitrate,1e3,"k")},{name:"Strategy",value:s?.strategy},{name:"Target Bitrate",value:Mt(s?.targetBitrate,1e3,"k")},{name:"Advisted Bitrate",value:Mt(s?.advisedBitrate,1e3,"k")},{name:"Target File Available",value:Vt(s?.targetFileAvailable)},{name:"Duration (hh:mm)",value:Bt(s?.lengthMs)},{name:"Duration (ms)",value:Mt(s?.lengthMs,1," ms")},{name:"Speed",value:Mt(s?.playbackSpeed)},{name:"Gain Adjustment",value:Mt(s?.gainAdjustment)},{name:"Loudness",value:s?.hasLoudness?Mt(s?.loudness):void 0}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(zt,{...e}),canCollapse:!0}),(0,k.jsx)(we,{title:"Files",rows:t??[],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:s=>(0,k.jsx)(_t,{item:e,file:s},s.fileId),canCollapse:!0,isCollapsedInitially:!0})]})};var $t=t(32873),Jt=t(58073),Yt=t(45679),Kt=t(67299);function Wt(e,s){const t=(0,Kt.Q)();(0,n.useEffect)((()=>{const n=t.getEvents();return n.addListener(e,s),()=>{n.removeListener(e,s)}}),[e,s,t])}var Zt=t(70964),Gt=t(16238),Qt=t(610);const qt="Gc_xi0GmVaC4DyViocdz",Xt="uliJIthMaP5kUx2IpElY",en="h0NXdJlkjupX8nTYlhhc",sn=({name:e,value:s})=>{const t=xs();return(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,highlight:!0,children:e}),(0,k.jsx)(pe.n,{className:Ne.rowValue,truncate:!0,align:"right",children:s}),(0,k.jsx)(pe.n,{className:Ne.rowActions,children:(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>t(s),children:(0,k.jsx)(ms._,{size:"small"})})})]})},tn=()=>{const e=(()=>{const e=(0,Kt.Q)(),[s,t]=(0,n.useState)(e.getSubscriptions()),a=(0,n.useCallback)((()=>{t(e.getSubscriptions())}),[e,t]);return Wt(Yt.K.SUBSCRIBE,a),Wt(Yt.K.CANCEL,a),Wt(Yt.K.REFRESH,a),s})(),s=xs(),t=Object.entries((0,Gt.$)(e,(e=>`${e.ident}${e.isPrefix?"*":""}`)));return(0,k.jsx)(we,{title:"Subscriptions",rows:t,cols:[{name:"Ident"},{name:"Actions",width:"16px"}],renderRow:([e,t])=>(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsxs)(pe.n,{className:Ne.rowValue,truncate:!0,children:[e," (",t.length,")"]}),(0,k.jsx)(pe.n,{className:Ne.rowActions,children:(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>s(e),children:(0,k.jsx)(ms._,{size:"small"})})})]},e),canCollapse:!0})};function nn(e){if(e.ident.endsWith("/json"))return!0;if(0===e.payloads.length)return!1;const s=(0,Zt.dI)(e.payloads[0]);return s.length>0&&"{"===s[0]}const an=({message:e})=>{const[s,t]=(0,n.useState)(!1),{Editor:a,setContent:r}=ce({readOnly:!0});return(0,n.useEffect)((()=>{if(0!==e.payloads.length)if(nn(e)){const s=JSON.parse((0,Zt.dI)(e.payloads[0]));r(JSON.stringify(s,void 0,2))}else{const s=(0,Zt.U5)(e.payloads[0]);r(JSON.stringify(s,void 0,2))}}),[e,r]),(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,children:new Date(e.timestamp).toLocaleString()}),(0,k.jsx)(pe.n,{className:Ne.rowName,children:e.ident}),(0,k.jsxs)(pe.n,{className:Ne.rowName,children:[(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>t(!s),children:(0,k.jsx)($t.W,{size:"small"})}),(0,k.jsx)(Qt.M,{isOpen:s,className:en,onRequestClose:()=>t(!1),shouldCloseOnEsc:!0,shouldCloseOnBackdropClick:!0,animated:!0,children:a})]})]})},rn=()=>{const e=(0,Kt.Q)(),[s,t]=(0,n.useState)(0),[a,r]=(0,n.useState)(!0);Wt(Yt.K.MESSAGE,(()=>{t(s+1)}));const l=a?e.getMessages().filter(nn):e.getMessages();return(0,k.jsx)(we,{title:"Messages",titleExtra:(0,k.jsxs)("div",{className:Xt,children:[(0,k.jsx)(Jt.c,{id:"json-only",size:"small",checked:a,onChange:()=>r(!a)}),(0,k.jsx)(ws.E,{as:"label",htmlFor:"json-only",variant:"marginal",children:"JSON only"})]}),rows:l,cols:[{name:"Time",width:"200px"},{name:"Ident"},{name:"Payload",width:"16px"}],renderRow:(e,s)=>(0,k.jsx)(an,{message:e},`${s}-${e.ident}-${e.timestamp}`),canCollapse:!0})},ln=()=>{const e=(()=>{const e=(0,Kt.Q)(),[s,t]=(0,n.useState)(null);(0,n.useEffect)((()=>{e.getConnectionId().then((e=>t(e)))}),[e,t]);const a=(0,n.useCallback)((e=>t(e.data.connectionId)),[t]);return Wt(Yt.K.CONNECTION,a),s})();return(0,k.jsxs)("div",{className:qt,children:[(0,k.jsx)(we,{title:"PubSub",rows:(0,k.jsx)(sn,{name:"Connection ID",value:e??"-"}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),(0,k.jsx)(tn,{}),(0,k.jsx)(rn,{})]})};var on=t(98678),cn=t(8704),dn=t(88713),un=t(98555),hn=t(10075),mn=t(39950),pn=t(47583),xn=t(82372),vn=t(28049),jn=t(38774),gn=t(13781),fn=t(15127),yn=t(3293);const bn=36e5;const Nn="CPh1NBIPIZdD7S5EeAJw",wn="ImIlB71ObQKbFW5YUTmT",Cn="TzXFebu8XWPbINPiP4rs",Sn="MigGXxVYX9Yi6_lGrDwe",An="oyMDrjEp_otdJzIKn5YC",kn=({property:e,value:s,onOverride:t,isOverridden:n})=>{if("int"===e.type||"internal"===e.type)throw Error("Invalid property type for dropdown!");const a="bool"===e.type?["true","false"]:e.values;return(0,k.jsx)(j.F,{id:`${e.name}-dropdown`,value:(s??e.default).toString(),onChange:s=>{var n;t(e.name,(n=s.currentTarget.value,"bool"===e.type?"true"===n:n))},className:r()({[Sn]:n}),children:a.map((e=>(0,k.jsx)("option",{value:e,children:e},e)))})},In=({property:e,value:s,onOverride:t,isOverridden:a})=>{if("int"!==e.type)throw Error("Invalid property type for dropdown!");const[l,i]=(0,n.useState)(s??e.default),o=(0,on.YQ)((s=>{t(e.name,s)}),500);return(0,k.jsx)(x.Z,{type:"number",min:e.lower,max:e.upper,value:l,onChange:e=>{i(e.currentTarget.value),o(Number.parseInt(e.currentTarget.value,10))},className:r()({[Sn]:a})})},En=({property:e,localValue:s,remoteValue:t,experimentUrl:n,isRemoteUserSpecificOverride:a,onOverride:r,filter:l})=>{const i=s!==t,o=e.default.toString(),c=t?.toString();let d=(n||o!==c?c:null)??null;return d&&n&&(d=(0,k.jsxs)("a",{href:n,target:"_blank",className:An,children:[c,a&&(0,k.jsx)(cn.o,{size:"small"})]}),a&&(d=(0,k.jsx)(dn.Zp,{label:"This value comes from a user-specific override in the linked experiment.",children:d}))),(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsxs)(pe.n,{className:Ne.rowName,title:e.name,highlight:!0,children:[(0,k.jsx)("a",{href:`https://sites.spotify.net/s/hyperlink?path=property-experiments&property=${e.name}`,rel:"noopener noreferrer",target:"_blank",children:l?(0,k.jsx)(pn.M,{searchWords:[l??""],textToHighlight:e.name}):e.name}),(0,k.jsx)("div",{className:Ne.propertyDescription,children:e.description})]}),(0,k.jsx)(pe.n,{className:Ne.rowValue,children:o}),(0,k.jsx)(pe.n,{className:Ne.rowValue,children:d}),(0,k.jsx)(pe.n,{className:Ne.rowValue,children:"bool"===e.type||"enum"===e.type?(0,k.jsx)(kn,{property:e,value:s,onOverride:r,isOverridden:i}):"int"===e.type?(0,k.jsx)(In,{property:e,value:s,onOverride:r,isOverridden:i}):null})]})},On="debugPanelRemoteConfigLastChangedAtByPropertyName",Pn=({properties:e,localConfiguration:s,remoteConfiguration:t,setOverrides:a,clearOverrides:r})=>{const{filter:l}=(0,n.useContext)(xn.g),i=(0,We.qg)(),o=()=>{const e=i.getItem(On);return e instanceof un.m||e instanceof hn.Y?{}:e},c=(e,s)=>{a(ve.Vk.fromJSON({[e]:s})),i.setItem(On,{...o(),[e]:Date.now()})},d=(0,n.useRef)(o()),u=e.sort(((e,s)=>(d.current[s.name]??0)-(d.current[e.name]??0)||e.name.localeCompare(s.name))),h=function(){const e=(0,yn.d)(),s=(0,jn.k)(),t=(0,fn.C)()?.username,a=(0,n.useMemo)((()=>ve.mA.getPropertySetId({clientId:e.remote_config_client_id},(0,ve.v6)(),[])),[e.remote_config_client_id]),r=(0,n.useMemo)((()=>{if(!e||!s.data||!t)return null;const n="web-player"===e.remote_config_client_id||"1"===s.data.employee;return{data:{platform:"WEB",clientId:e.remote_config_client_id,country:s.data.country,propertySetKey:a,clientVersion:e.event_sender_context_information?.client_version_string??"",installationId:e.event_sender_context_information?.installation_id??"",oauthClientId:e.event_sender_context_information?.client_id??"",employee:n,catalogue:s.data.catalogue,originPlatform:e.app_platform,originVersion:e.os_version??"",userName:t}}}),[t,e,s.data,a]),{data:l}=(0,vn.I)({queryKey:["traceback-config"],queryFn:()=>(0,gn.V)().request("https://remote-configuration-resolver.spotify.net/debug/traceback-config",{method:"POST",responseType:"json",headers:{"content-type":"application/json"},payload:JSON.stringify(r)}).then((e=>{const s=e.body;return Object.fromEntries(s.data.map((e=>[e.name,e])))})),staleTime:5e3,gcTime:bn,refetchInterval:bn,refetchOnWindowFocus:!1,enabled:!!r});return l??{}}();return(0,k.jsxs)("div",{className:wn,children:[(0,k.jsxs)("div",{className:Cn,children:[(0,k.jsx)(Cs.n,{size:"small",onClick:()=>{r(),i.clearItem(On)},children:"Clear local overrides"}),(0,k.jsx)(mn.S,{placeholder:"Find",alwaysExpanded:!0})]}),(0,k.jsx)(je.K,{children:(0,k.jsxs)(ye.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"30%"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{})]}),(0,k.jsxs)("tbody",{children:[(0,k.jsxs)(me.H,{children:[(0,k.jsx)(be.M,{className:Ne.rowHeader,children:"Name"}),(0,k.jsx)(be.M,{className:Ne.rowHeader,children:"Default"}),(0,k.jsx)(be.M,{className:Ne.rowHeader,children:"Remote"}),(0,k.jsx)(be.M,{className:Ne.rowHeader,children:"Local"})]}),u.filter((e=>-1!==e.name.toLowerCase().indexOf(l.toLowerCase()))).map((e=>(0,k.jsx)(En,{property:e,localValue:s.getValue(e.name),remoteValue:t.getValue(e.name),experimentUrl:h?.[e.name]?.experimentRef?.experimentUrl,isRemoteUserSpecificOverride:h?.[e.name]?.isOverride??!1,onOverride:c,filter:l},e.name)))]})]})})]})},Rn=()=>{const e=[...(0,ve.v6)()],{localConfiguration:s,remoteConfiguration:t,setOverrides:n,clearOverrides:a}=(0,Se.g)();return(0,k.jsx)("div",{className:Nn,children:(0,k.jsx)(xn.s,{uri:"spotify:internal:debug:remote-config-properties",children:(0,k.jsx)(Pn,{properties:e,localConfiguration:s,remoteConfiguration:t,setOverrides:n,clearOverrides:a})})})};var Tn=t(83648);const Dn="g2bLOY5W1sbuXtffHyDY",_n="wTIZy4hwIIwMdmqm93rW",Ln=()=>{const e=(0,Tn.zy)(),s=(0,Tn.Zp)(),t=e=>{const t=(0,Xe.o_)(e);t&&s(t.toURLPath(!0),{state:{preventMoveFocus:!0}})},n=(0,Xe.o_)(e.pathname);return(0,k.jsxs)("div",{className:_n,children:[(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=new FormData(e.target).get("navigateTo").toString(),n=new URL(s,"https://open.spotify.com");n.hostname&&n.pathname?t(n.pathname):t(s)},className:Dn,children:[(0,k.jsx)("label",{htmlFor:"navigate-input",children:"Navigate to"}),(0,k.jsx)(ws.E,{variant:"bodySmall",as:"input",style:{color:yt.black},name:"navigateTo",id:"navigate-input",type:"text",placeholder:"ex. /search/nirvana",onKeyDown:e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.stopPropagation()}})]}),(0,k.jsx)("h2",{children:"Current location:"}),(0,k.jsxs)("ul",{children:[(0,k.jsxs)("li",{children:["Location: ",e.pathname]}),e.search&&(0,k.jsxs)("li",{children:["Search params: ?",e.search]}),e.hash&&(0,k.jsxs)("li",{children:["Hash params: #",e.hash]}),n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("li",{children:["URL: ",n.toURL()]}),(0,k.jsxs)("li",{children:["URI: ",n.toURI()]})]}):(0,k.jsx)("li",{children:"Not parseable as a Spotify URI!"}),(0,k.jsxs)("li",{children:["Location state: ",(0,k.jsx)("pre",{children:JSON.stringify(e.state,null,2)})]})]})]})};var Mn=t(9869),Vn=t(44239),Bn=t(35906),zn=t(34959),Fn=t(98196),Hn=t(16732),Un=t(28244),$n=t(40823),Jn=t(50042),Yn=function(e){return e.IPL="IN_PERSON",e.RGS="REMOTE",e}(Yn||{});var Kn=t(11283),Wn=t(39907);function Zn({obj:e}){return(0,k.jsx)(ye.X,{children:(0,k.jsx)("tbody",{children:Object.entries(e).map((e=>(0,k.jsx)(Gn,{name:e[0],value:e[1]},e[0])))})})}function Gn({name:e,value:s}){const t=xs();let n;return"string"==typeof s||"number"==typeof s?n=s:"boolean"==typeof s?n=(0,k.jsx)(xe.X,{defaultChecked:s,isActive:!1,onClick:e=>{e.preventDefault()}}):"object"==typeof s&&null!==s&&(n=(0,k.jsx)(Zn,{obj:s})),(0,k.jsxs)(me.H,{hover:!0,children:[(0,k.jsx)(pe.n,{className:Ne.rowName,highlight:!0,children:e}),(0,k.jsx)(pe.n,{className:Ne.rowValue,truncate:!0,align:"right",children:n}),(0,k.jsx)(pe.n,{className:Ne.rowActions,children:(0,k.jsx)("button",{className:Ne.rowAction,onClick:()=>{void 0!==s&&t("object"==typeof s?JSON.stringify(s):s.toString())},children:(0,k.jsx)(ms._,{size:"small"})})})]})}const Qn=[{title:"Current Session",Component:()=>{const{currentSession:e,refreshCurrentSession:s}=(0,Jn.D)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Kn.H,{iconOnly:Wn.H,onClick:()=>{s()}}),(0,k.jsx)(je.K,{children:e&&(0,k.jsxs)(ye.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"30%"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{width:"16px"})]}),(0,k.jsx)("tbody",{children:Object.entries(e).map((e=>(0,k.jsx)(Gn,{name:e[0],value:e[1]},e[0])))})]})})]})}},{title:"Create New Session",Component:()=>{const{createSession:e}=(0,Jn.D)(),[s,t]=(0,n.useState)(null),[a,r]=(0,n.useState)(Yn.IPL),l=(0,Ve.wA)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:"Create a new session as your current user (does nothing if you already have a session)"}),(0,k.jsxs)("div",{className:Ne.rowControl,children:[(0,k.jsxs)(Be.C,{id:"sessionTypeDropdown",value:a,onSelect:e=>{switch(e){case Yn.IPL:r(Yn.IPL);break;case Yn.RGS:r(Yn.RGS);break;default:r(Yn.IPL)}},children:[(0,k.jsx)("option",{value:Yn.IPL,children:Yn.IPL},Yn.IPL),(0,k.jsx)("option",{value:Yn.RGS,children:Yn.RGS},Yn.RGS)]}),(0,k.jsx)(v.$,{onClick:async s=>{s.preventDefault();const n=await e();t(n)},children:"Create"})]}),(0,k.jsx)(Cs.n,{onClick:()=>{l((0,Un.A9)($n.EL.INVITE))},style:{marginTop:Fn.WG},children:"Open invitation modal"}),null!==s&&(0,k.jsx)(Hn.h,{value:JSON.stringify(s,null,2),readOnly:!0})]})}},{title:"Leave Current Session",Component:()=>{const{leaveSession:e,currentSession:s}=(0,Jn.D)(),[t,a]=(0,n.useState)(null);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:Ne.rowName,children:"Leave your current session"}),(0,k.jsxs)("div",{className:Ne.rowControl,children:[(0,k.jsx)(x.Z,{value:s?.sessionId??"",readOnly:!0}),(0,k.jsx)(v.$,{onClick:async t=>{if(t.preventDefault(),!s)return;const n=await e();a(n)},children:"Leave"})]}),null!==t&&(0,k.jsx)(Hn.h,{value:JSON.stringify(t,null,2),readOnly:!0})]})}},{title:"Delete Current Session",Component:()=>{const{currentSession:e,deleteSession:s}=(0,Jn.D)(),[t,a]=(0,n.useState)(null);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:Ne.rowName,children:"Delete your current session"}),(0,k.jsxs)("div",{className:Ne.rowControl,children:[(0,k.jsx)(x.Z,{value:e?.sessionId??"",readOnly:!0}),(0,k.jsx)(v.$,{onClick:async t=>{if(t.preventDefault(),!e)return;const n=await s();a(n)},children:"Delete"})]}),null!==t&&(0,k.jsx)(Hn.h,{value:JSON.stringify(t,null,2),readOnly:!0})]})}},{title:"Join Session as Guest",Component:()=>{const[e,s]=(0,n.useState)(""),t=(0,Ve.wA)(),a=(0,Tn.Zp)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:Ne.rowName,children:"Join somebody else's session (paste join token or join URI)"}),(0,k.jsxs)("div",{className:Ne.rowControl,children:[(0,k.jsx)(x.Z,{value:e,onChange:e=>s(e.currentTarget.value)}),(0,k.jsx)(v.$,{onClick:async s=>{s.preventDefault();const n=(0,Xe.o_)(e);n&&(0,Xe.cr)(n)?a(n.toURLPath(!0)):t((0,Un.A9)($n.EL.JOIN,e))},children:"Join"})]})]})}}],qn=()=>{const[e,s]=(0,n.useState)(-1);return(0,k.jsxs)("div",{className:_n,children:[(0,k.jsx)("h1",{children:"Social Connect!"}),(0,k.jsx)(Mn.n,{children:Qn.map(((t,n)=>(0,k.jsxs)(Vn.A,{children:[(0,k.jsx)(Bn.J,{className:Ne.rowHeader,onClick:t=>{t.preventDefault(),s(n===e?-1:n)},isExpanded:n===e,children:t.title}),(0,k.jsx)(zn.u,{isExpanded:n===e,children:t.Component&&(0,k.jsx)(t.Component,{})})]},`${n}-item`)))})]})};var Xn=t(36327);const ea="rqY5xQzTYB0T5O0XyDdn",sa="jDgWpAIXmxJKgp8GtVWk",ta=()=>{const{value:e,setValue:s,clearStoredKeyValue:t,clearSessionStorage:n}=(0,Xn.useSessionStorage)("eligibility"),{value:a,setValue:r,clearStoredKeyValue:l}=(0,Xn.useSessionStorage)("datetime");return(0,k.jsxs)("div",{className:ea,children:[(0,k.jsx)("h1",{children:"Premium Page Debug"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"Override Eligiiblity"}),(0,k.jsxs)("select",{className:sa,value:e,onChange:e=>s(e.target.value),children:[(0,k.jsx)("option",{}),(0,k.jsx)("option",{value:"INTRO_ELIGIBLE",children:"INTRO_ELIGIBLE"}),(0,k.jsx)("option",{value:"NON_INTRO_ELIGIBLE",children:"NON_INTRO_ELIGIBLE"}),(0,k.jsx)("option",{value:"WINBACK",children:"WINBACK"})]}),(0,k.jsx)(v.$,{className:ea,size:"small",onClick:()=>t("eligibility"),children:"Remove Eligiblity Override"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"Override Date"}),(0,k.jsx)("input",{className:sa,type:"datetime-local",value:a,onChange:e=>r(e.target.value)}),(0,k.jsx)(v.$,{size:"small",onClick:()=>l("datetime"),children:"Remove Date/Time Override"})]}),(0,k.jsx)(v.$,{size:"small",onClick:n,children:"Remove All Overrides"})]})},na="CWbF6pzynkRv3fi29lB1",aa="HJW0XXBdaYKM50QJ957Z",ra="ELSpUVm2MXGkQ_0rlJaj",la="BEbSBX8wHpFESTzhAAUs",ia="debugWindowActiveTabGroup",oa="debugWindowActiveTabIndex",ca=()=>{const e=(0,Et.a)().getCapabilities().canGetFiles,s=(0,Ze.M)(),t=(0,Ke.ZY)(),a=(0,d.NC)(Ge.rW);(0,n.useEffect)((()=>{t&&(t.title="Spotify Debug Window")}),[t]);const u=(0,n.useMemo)((()=>Object.fromEntries(Object.entries({Authorization:[{label:"Access Token",Panel:js}],Playback:[{label:"Player",Panel:he},e?{label:"Playback",Panel:Ut}:null,{label:"Connect",Panel:Ns},s?{label:"Social Connect",Panel:qn}:null].filter(Qe.P),"Data Fetching":[{label:"Esperanto",Panel:ft},{label:"PubSub",Panel:ln},null].filter(Qe.P),UI:[{label:"Routing",Panel:Ln},null].filter(Qe.P),Other:[{label:"Settings",Panel:Me},{label:"Remote Config",Panel:Rn},{label:"Ads",Panel:I},{label:"In-App Messaging",Panel:Ye},{label:"Your DJ",Panel:hs.fW},{label:"Home",Panel:us},{label:"Premium Page",Panel:ta}].filter(Qe.P)}).filter((([e,s])=>s.length>0)))),[e,s]),h=Object.keys(u),m=(0,We.qg)(),p=m.getItem(ia),x="string"==typeof p&&p in u?p:h[0],[v,j]=(0,n.useState)(x),g=m.getItem(oa),f="number"==typeof g&&g in u[v]?g:0,[y,b]=(0,n.useState)(f),N=u[v][y].Panel;return(0,k.jsx)("div",{className:r()("encore-dark-theme","encore-layout-themes",{"circular-sp-vietnamese":a}),children:(0,k.jsxs)("div",{className:na,children:[(0,k.jsx)(l.V,{className:aa,children:(0,k.jsx)(i.r,{flexMobile:!0,children:h.map((e=>(0,k.jsxs)(n.Fragment,{children:[(0,k.jsx)(o.D,{children:e}),u[e].map(((s,t)=>(0,k.jsx)(c.a,{active:v===e&&y===t,label:s.label,onClick:()=>{j(e),m.setItem(ia,e),b(t),m.setItem(oa,t)},className:ra,children:s.label},s.label)))]},e)))})}),(0,k.jsx)("div",{className:la,children:(0,k.jsx)(N,{})})]})})}},15127:(e,s,t)=>{t.d(s,{C:()=>r});var n=t(99754),a=t(9440);const r=()=>{const e=(0,n.d4)((e=>e.session?.user));return e?{type:a.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:s,height:t})=>({url:e,width:s||void 0,height:t||void 0})))}:null}},3293:(e,s,t)=>{t.d(s,{d:()=>r});var n=t(79474),a=t(89477);const r=()=>(0,n.useContext)(a.D)}}]);
//# sourceMappingURL=xpui-debug-window-contents.js.map