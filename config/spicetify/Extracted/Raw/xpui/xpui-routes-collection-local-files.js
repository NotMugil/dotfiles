"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4389],{8092:(e,t,r)=>{r.d(t,{d:()=>T});var l=r(79474),s=r(14056),i=r(95063),a=r(98477),n=r(13411);const o={"custom-order":a.RB,"title-and-artist-title":{column:n.$.TITLE_AND_ARTIST,order:n.H.ASC},"title-and-artist-artist":{column:n.$.TITLE_AND_ARTIST,order:n.H.SECONDARY_ASC},title:{column:n.$.TITLE,order:n.H.ASC},artist:{column:n.$.ARTIST,order:n.H.ASC},"added-by":{column:n.$.ADDED_BY,order:n.H.ASC},"added-at":{column:n.$.ADDED_AT,order:n.H.ASC},duration:{column:n.$.DURATION,order:n.H.ASC},album:{column:n.$.ALBUM,order:n.H.ASC},"album-or-podcast":{column:n.$.ALBUM_OR_PODCAST,order:n.H.ASC},"album-or-show":{column:n.$.ALBUM_OR_SHOW,order:n.H.ASC}},c={"title-and-artist-title":n.$.TITLE_AND_ARTIST,"title-and-artist-artist":n.$.TITLE_AND_ARTIST,title:n.$.TITLE,artist:n.$.ARTIST,"added-by":n.$.ADDED_BY,"added-at":n.$.ADDED_AT,duration:n.$.DURATION,album:n.$.ALBUM,"album-or-podcast":n.$.ALBUM_OR_PODCAST,"album-or-show":n.$.ALBUM_OR_SHOW},u={[n.H.NONE]:n.H.NONE,[n.H.ASC]:n.H.DESC,[n.H.DESC]:n.H.ASC,[n.H.SECONDARY_ASC]:n.H.SECONDARY_DESC,[n.H.SECONDARY_DESC]:n.H.SECONDARY_ASC},d=(n.$.INDEX,{[n.$.INDEX]:{key:"custom-order",get value(){return s.Ru.get("sort.custom-order")}},[n.$.TITLE_AND_ARTIST]:{key:"title",get value(){return s.Ru.get("sort.title")}},[n.$.TITLE]:{key:"title",get value(){return s.Ru.get("sort.title")}},[n.$.ARTIST]:{key:"artist",get value(){return s.Ru.get("sort.artist")}},[n.$.ADDED_BY]:{key:"added-by",get value(){return s.Ru.get("sort.added-by")}},[n.$.ADDED_AT]:{key:"added-at",get value(){return s.Ru.get("sort.date-added")}},[n.$.DURATION]:{key:"duration",get value(){return s.Ru.get("sort.duration")}},[n.$.EVENT_DATE]:null,[n.$.EVENT_INFO]:null,[n.$.ALBUM]:{key:"album",get value(){return s.Ru.get("sort.album")}},[n.$.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return s.Ru.get("sort.album-or-podcast")}},[n.$.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return s.Ru.get("sort.album-or-show")}},[n.$.PLAYS]:null,[n.$.RELEASE_DATE]:null,[n.$.ADD]:null,[n.$.ACTIONS]:null,[n.$.CONCERT_VENUE]:null,[n.$.CONCERT_DATE]:null,[n.$.TITLE_AND_AUTHOR]:{key:"title",get value(){return s.Ru.get("sort.title")}},[n.$.AUTHOR]:null});var m=r(18645),x=r(13274);function g(e){return!!e}const T=({columns:e,disabled:t,onSort:r})=>{const T=[...e],A=T.indexOf(n.$.TITLE_AND_ARTIST),p=T.indexOf(n.$.TITLE_AND_AUTHOR);-1!==A&&T.splice(A,1,n.$.TITLE,n.$.ARTIST),-1!==p&&T.splice(p,1);const{sortState:C,setSortState:R}=(0,l.useContext)(a.cL),y=function(e){return null===e.column?d[n.$.INDEX]:(0,m.kj)(e.column,e)?d[n.$.ARTIST]:d[e.column]}(C),h=(0,l.useCallback)((e=>{r?.(),R(((e,t,r)=>e?t!==c[e]?o[e]:{column:c[e],order:u[r]}:a.RB)(e,C.column,C.order))}),[r,R,C.column,C.order]),S=(0,l.useCallback)((()=>null!==C.column),[C.column]),I=T.map((e=>d[e])).filter(g);return(0,x.jsx)(i.g,{options:I,onSelect:h,selected:y,isSelectionChanged:S,sortOrder:C.order,heading:s.Ru.get("drop_down.sort_by"),disabled:t,enableViewModeMenu:!0})}},43315:(e,t,r)=>{r.r(t),r.d(t,{default:()=>be});var l=r(79474),s=r(28049),i=r(35430),a=r(59841),n=r(73244),o=r(54690),c=r(14056),u=r(90495),d=r(27699),m=r(39517),x=r(82089),g=r(92585),T=r(18645),A=r(82372),p=r(98477),C=r(33085),R=r(13411),y=r(70746),h=r(79130),S=r(75653),I=r(76922),b=r(46113),j=r(26271),E=r(64658),D=r(14494),f=r(67302),$=r(5745),_=r(29117),k=r(6950),N=r(46545),P=r(97997),O=r(5513),v=r(36833),L=r(62166),M=r(67976),H=r(71132),U=r(60347),B=r(76816),w=r(39950),F=r(8092);const Y="ijkY1leciNts_lZ000bI",V="nyi5paBf0kJsz7Py0DaI";var X=r(13274);const z=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:r}=(0,f.r)(U.E,{}),s=(0,l.useCallback)((()=>{r.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[r,t]),i=(0,l.useCallback)((()=>{r.logInteraction(t.filterFieldFactory().hitClearFilter())}),[r,t]),a=(0,B.w)().filter((e=>p.ws.includes(e)));return(0,X.jsxs)("div",{className:V,children:[(0,X.jsx)(l.Suspense,{fallback:null,children:(0,X.jsx)(w.S,{placeholder:c.Ru.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:s,onClear:i})}),(0,X.jsx)(F.d,{columns:a})]})})),W=l.memo((function({tracklistDomRef:e,togglePlay:t,isPlaying:r,isActive:s,backgroundColor:i,spec:a,logger:n}){const o=(0,H.X)(),u=(0,l.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),d=(0,v.j)(),m=(0,l.useCallback)((()=>{const e=(0,L.$I)({isPlaying:r,isActive:s,spec:a.playButtonFactory(),logger:n,uri:S.bV});t({loggingParams:e})}),[s,r,n,a,t]);return(0,X.jsx)(P.E,{backgroundColor:i,children:(0,X.jsxs)(O.S,{children:[(0,X.jsx)(g.D,{size:d,onClick:m,isPlaying:r,uri:S.bV}),o&&(0,X.jsx)(E.r,{spec:u,children:(0,X.jsx)(M.Y,{entityName:c.Ru.get("local-files"),contextUri:S.bV,activationPlacement:"bottomEnd",size:d})}),(0,X.jsx)(E.r,{spec:a,children:(0,X.jsx)(z,{tracklistDomRef:e})})]})})}));r(36805),r(4563),r(79606),r(98211),r(24164),r(79499),r(49271);var Z=r(35814),q=r(88291),K=r(71781),J=r(47469),G=r(32334),Q=r(95999),ee=r(26903),te=r(16975),re=r(47583),le=r(24885),se=r(82390),ie=r(28078),ae=r(16482),ne=r(53206),oe=r(64652),ce=r(66014),ue=r(43418),de=r(49798),me=r(91058),xe=r(20502),ge=r(64606),Te=r(38276),Ae=r(92633);const pe=l.memo((function({uri:e,uid:t,name:r,duration_ms:s,artists:i,album:a,is19PlusOnly:n,isExplicit:o,isPlayable:u,index:d,contextUri:m,imgUrl:x,usePlayContextItem:g,isCompactMode:T=!1}){const{spec:p}=(0,f.r)(Z.i,{data:{position:d,reason:"",uri:e}}),{filter:C}=(0,l.useContext)(A.g),{isActive:y,isPlaying:h,triggerPlay:S,togglePlay:I}=g({uid:t,uri:e,index:d}),{badges:b,hasBadges:j}=(0,ee.b)({isExplicit:o}),E=i?.map((e=>e.name)).join(c.Ru.getSeparator())||"",D=(0,B.w)();return(0,X.jsx)(Q.pZ,{value:"row",index:d,children:(0,X.jsx)(q.h,{menu:(0,X.jsx)(te.A,{uri:e,uid:t,contextUri:m}),children:(0,X.jsx)(Ae.w,{uri:e,contextUri:m,isActive:y,index:d,onTriggerPlay:(e,t)=>{S({loggingParams:t})},ariaRowIndex:d+1,isPlayable:u,ageRestricted:n,dragMetadata:{name:r,createdBy:E},spec:p,isCompactMode:T,children:D.map(((l,n)=>{const o=(0,K.y)(n,l,D);switch(l){case R.$.INDEX:return(0,X.jsx)(o,{ariaColIndex:n,children:(0,X.jsx)(ue.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,E),isPlaying:h,isActive:y,onClick:(e,t)=>{I({loggingParams:t})},spec:p,children:(0,X.jsx)(me.a,{children:d+1})})},n);case R.$.TITLE_AND_ARTIST:return(0,X.jsxs)(o,{ariaColIndex:n,children:[(0,X.jsx)(ne.e,{src:x}),(0,X.jsxs)(oe.l,{children:[(0,X.jsx)(Te.p,{titleText:r,children:(0,X.jsx)(re.M,{searchWords:[C],textToHighlight:r})}),j&&(0,X.jsx)(ie.P,{children:b.explicit?(0,X.jsx)(G.g,{}):null}),(0,X.jsx)(xe.p,{children:i&&(0,X.jsx)(le.E,{nonInteractive:!0,artists:i,filter:C})})]})]},n);case R.$.TITLE:return(0,X.jsx)(o,{ariaColIndex:n,children:(0,X.jsxs)(ce.q,{children:[(0,X.jsx)(Te.p,{titleText:r,children:(0,X.jsx)(re.M,{searchWords:[C],textToHighlight:r})}),j&&(0,X.jsx)(ie.P,{children:b.explicit?(0,X.jsx)(G.g,{}):null})]})},n);case R.$.ARTIST:return(0,X.jsx)(o,{ariaColIndex:n,children:(0,X.jsx)(ge.Y,{children:i&&(0,X.jsx)(le.E,{nonInteractive:!0,artists:i,filter:C})})},n);case R.$.ALBUM:return(0,X.jsx)(o,{ariaColIndex:n,children:a?.name&&(0,X.jsx)(se.g,{nonInteractive:!0,uri:a?.uri,name:a?.name,children:(0,X.jsx)(re.M,{searchWords:[C],textToHighlight:a?.name})})},n);case R.$.DURATION:return(0,X.jsxs)(o,{ariaColIndex:n,children:[(0,X.jsx)(J.d,{uri:e}),(0,X.jsx)(ae.P,{duration:s}),(0,X.jsx)(de.Y,{menu:(0,X.jsx)(te.A,{uri:e,uid:t,contextUri:m}),label:c.Ru.get("more.label.track",r,E),spec:p})]},n);default:return null}}))})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index&&e.isCompactMode===t.isCompactMode));var Ce=r(24577),Re=r(94544);const ye=new Set(p.ws),he=l.memo((function({uri:e,tracks:t,sortState:r,handleSort:s,usePlayContextItem:i,tracklistDomRef:a,isCompactMode:n=!1}){const o=(0,B.w)(),u=(0,l.useRef)(null),d=(0,l.useCallback)(((t,r)=>{const l=(0,Ce.g)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,X.jsx)(pe,{index:r,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:l?.url||"",usePlayContextItem:i,isCompactMode:n},t.uid)}),[e,i,n]),m=(0,l.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(Q.pZ,{value:"playlist-tracklist",children:(0,X.jsx)(Re.S4,{ariaLabel:c.Ru.get("local-files"),hasHeaderRow:!0,columns:o,sortableColumns:ye,sortState:r,onSort:s,renderRow:d,resolveItem:m,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:a,isCompactMode:n,columnPersistenceKey:"playlist-tracklist"},e)})})})),Se=[R.$.INDEX,R.$.TITLE_AND_ARTIST,R.$.ALBUM,R.$.DURATION],Ie=()=>{const{filter:e}=(0,l.useContext)(A.g),{sortState:t,setSortState:r}=(0,l.useContext)(p.cL),P=(0,l.useContext)(I._),O=(0,b.P)(),v=(0,h.z)(a.kleinBlue),L=(0,l.useRef)(null),{spec:M}=(0,f.r)(o.Z,{data:{uri:S.bV}}),H=(0,l.useMemo)((()=>M.actionBarFactory()),[M]),U=(0,l.useMemo)((()=>M.tracklistFactory()),[M]),B=(0,D.s)(),{isCompactMode:w}=(0,y.a)(),F=(({isCompactMode:e=!1})=>{const t=[...Se];return e&&t.splice(t.indexOf(R.$.TITLE_AND_ARTIST),1,R.$.TITLE,R.$.ARTIST),t})({isCompactMode:w}),V=(0,l.useCallback)(((e,l)=>{r((0,T.So)(e,t)),B.logInteraction(M.tracklistFactory().columnHeaderFactory({identifier:e,position:l||0}).hitSort())}),[r,t,B,M]),{data:z}=(0,s.I)({queryKey:["local-files",t,e],queryFn:()=>P.getTracks((0,T.Xt)(t),e),staleTime:0,gcTime:3e5,placeholderData:i.rX,enabled:O}),{isActive:Z,isPlaying:q,togglePlay:K,usePlayContextItem:J}=(0,j.P)({uri:S.bV,pages:[{items:(z??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return z?e||z.length&&O?(0,X.jsx)(C.a,{columns:F,children:(0,X.jsxs)("div",{role:"presentation",className:Y,children:[(0,X.jsxs)(_.z,{backgroundColor:v,children:[(0,X.jsxs)(d.h,{children:[(0,X.jsx)(g.D,{size:"medium",onClick:()=>K(),isPlaying:q,uri:S.bV}),(0,X.jsx)(m.X,{text:c.Ru.get("local-files")})]}),(0,X.jsxs)(k.Y,{children:[(0,X.jsx)(N.mm,{children:c.Ru.get("local-files")}),(0,X.jsx)($.Z,{children:c.Ru.get("local-files.description")})]})]}),(0,X.jsx)(W,{togglePlay:K,isPlaying:q,isActive:Z,backgroundColor:v,tracklistDomRef:L,spec:H,logger:B}),(0,X.jsx)("div",{className:"contentSpacing",children:(0,X.jsx)(E.r,{spec:U,children:(0,X.jsx)(he,{tracks:z,uri:S.bV,handleSort:V,sortState:t,usePlayContextItem:J,tracklistDomRef:L,isCompactMode:w})})})]})}):(0,X.jsx)(u.p,{linkTo:"/preferences",linkTitle:c.Ru.get("local-files.empty-button"),message:c.Ru.get("local-files.empty-description"),title:c.Ru.get("local-files.empty-header"),children:(0,X.jsx)(n.s,{size:"xxlarge","aria-hidden":"true"})}):(0,X.jsx)(x.A,{hasError:!1,errorMessage:c.Ru.get("error.request-artist-failure"),loadOffline:!0})},be=()=>(0,X.jsx)(p.sn,{uri:"spotify:internal:local-files",children:(0,X.jsx)(A.s,{uri:"spotify:internal:local-files",children:(0,X.jsx)(Ie,{})})})},46113:(e,t,r)=>{r.d(t,{P:()=>s});var l=r(38732);function s(){return(0,l.y)()[0]}},38732:(e,t,r)=>{r.d(t,{y:()=>i});var l=r(79474),s=r(76922);function i(){const e=(0,l.useContext)(s._),[t,r]=(0,l.useState)(e.getIsEnabled());(0,l.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,l.useCallback)((t=>e.setIsEnabled(t)),[e])]}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map