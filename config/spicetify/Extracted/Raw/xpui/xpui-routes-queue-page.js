"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7790],{74817:(e,i,t)=>{t.d(i,{U:()=>F});var s=t(63508),n=t(79474),a=t(14056),r=t(97500),l=t.n(r),u=t(83648),o=t(98764),c=t(55138),d=t(3265),m=t(87882),x=t(98678),h=t(42360),p=t(74938);var g=t(20273),y=t(53603);const j="main-topBar-contentArea",b="queue-tabBar-headerIsCentered",f="queue-tabBar-headerItem",C="queue-tabBar-moreButton",v="queue-tabBar-moreButtonActive",k="yxf_6IsQEmHjijEBUMTP",N="queue-tabBar-active",P="queue-tabBar-headerItemLink",E="queue-tabBar-header",I="queue-tabBar-chevron";var R=t(13274);const w=({items:e,activeItemId:i})=>(0,R.jsx)(g.W,{children:e.map((e=>e.disabled?(0,R.jsx)(y.D,{disabled:!0,role:"menuitemradio",className:k,onClick:e.handleClick,children:e.title},e.uri):(0,R.jsx)(y.D,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===i,className:({isActive:e})=>l()(k,{[N]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var U=t(21820);const A=(0,n.memo)((function({isCentered:e,links:i,landmarkLabel:t,className:s}){const r=(0,n.useRef)(null),[g,y]=(0,n.useState)([]),[k,A]=(0,n.useState)(0),[S,O]=(0,n.useState)([]),T=function(){const[e,i]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:t}=(0,n.useContext)(h.bi),s=(0,x.YQ)((e=>{e?.width&&i(e.width)}),250);return(0,p.w)({refOrElement:t,observeOnly:"width",onResize:s}),e}()??1/0,{pathname:q}=(0,u.zy)(),Q=i.find((e=>e.to===q));return(0,n.useEffect)((()=>{r.current&&A(r.current.clientWidth)}),[T]),(0,n.useEffect)((()=>{if(!r.current)return;const e=Array.from(r.current.children).map((e=>e.clientWidth));y(e)}),[i]),(0,n.useEffect)((()=>{if(!r.current)return;if(g.slice(0,-1).reduce(((e,i)=>e+i),0)<=k)return void O([]);const e=g.reduce(((e,i)=>e>i?e:i),0),i=[];let t=e;g.forEach(((e,s)=>{k>=t+e?t+=e:i.push(s)})),O(i)}),[k,g]),(0,R.jsx)("nav",{className:l()(s,j),"aria-label":t,children:(0,R.jsxs)("ul",{className:e?b:E,ref:r,children:[i.filter(((e,i)=>!S.includes(i))).map((e=>{const i=e?.render??(e=>e);return(0,R.jsx)(n.Fragment,{children:i((0,R.jsx)("li",{className:f,children:e.disabled?(0,R.jsx)("div",{className:P,children:(0,R.jsx)(o.E,{variant:"bodySmallBold",children:e.title})}):(0,R.jsx)(U.k,{end:!0,className:({isActive:e})=>l()(P,{[N]:e}),to:e.to,onClick:e.handleClick,children:(0,R.jsx)(o.E,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),S.length||0===g.length?(0,R.jsx)("li",{className:f,children:(0,R.jsx)(m.t,{renderInline:!0,menu:(0,R.jsx)(w,{items:i.filter(((e,i)=>S.includes(i))),activeItemId:Q?.itemId}),children:(e,i,t)=>(0,R.jsxs)("button",{className:l()(C,{[v]:Q}),type:"button",onClick:i,ref:t,children:[(0,R.jsx)(o.E,{variant:"bodySmallBold",children:Q?Q.title:a.Ru.get("more")}),e?(0,R.jsx)(c.J,{size:"small",className:I,"aria-hidden":"true"}):(0,R.jsx)(d.y,{size:"small",className:I,"aria-hidden":"true"})]})})}):null]})})}));var S=t(86082),O=t(82115),T=t(65911);const q="XfifUos51Clgs5a6nf2m",Q=()=>{const e=(0,T.U)(),i=(0,n.useCallback)((e=>(0,R.jsx)(O.u,{placement:"bottomEnd",arrow:"topStart",title:a.Ru.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),t=(0,n.useMemo)((()=>[{title:a.Ru.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:i,disabled:e},{title:a.Ru.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,i]);return(0,R.jsx)(S.g,{children:(0,R.jsx)(A,{className:q,links:t})})},F=({children:e})=>{const i=(0,s.y)();return(0,R.jsxs)("section",{className:"contentSpacing",children:[e,i&&(0,R.jsx)(Q,{})]})}},36057:(e,i,t)=>{t.r(i),t.d(i,{default:()=>qe});var s=t(79474),n=t(65911),a=t(98832),r=t(97500),l=t.n(r),u=t(98764),o=t(48129),c=t(9714),d=t(14056),m=t(64647),x=t(30957),h=t(36596),p=t(95999),g=t(87687),y=t(26271),j=t(67302),b=t(24640),f=t(91292),C=t(66675),v=t(13274);const k=({onClick:e})=>(0,v.jsx)(C.n,{onClick:e,size:"small",children:d.Ru.get("queue.clear-queue")});var N=t(30578),P=t(54723),E=t(64298),I=t(13411),R=t(65656),w=t(36471),U=t(74137),A=t(33082),S=t(41982),O=t(57506),T=t(86412),q=t(54260),Q=t(9440),F=t(24577),L=t(24290),$=t(94544),M=t(27902),B=t(35814),D=t(83856),_=t(88291),z=t(96567),G=t(47498),K=t(16975),W=t(41955),Z=t(18039),H=t(92633),X=t(2092),Y=t(13480),J=t(32334),V=t(97374),ee=t(11437),ie=t(73604),te=t(64658),se=t(14494),ne=t(26903),ae=t(83525),re=t(82390),le=t(18836),ue=t(28078),oe=t(16482),ce=t(53206),de=t(64652),me=t(43418),xe=t(49798),he=t(91058),pe=t(9138),ge=t(87358),ye=t(77962),je=t(92758),be=t(20502),fe=t(38276),Ce=t(7283),ve=t(47469),ke=t(27906),Ne=t(71132);let Pe=function(e){return e.TRACK="track",e.EPISODE="episode",e.CHAPTER="chapter",e.LOCAL="local",e.AD="ad",e}({});const Ee=s.memo((function({uri:e,uid:i,contextUri:t,name:n,duration_ms:a,artists:r,index:l,rowNumberOffset:u,imgUrl:o,isExplicit:c,isPlayable:m,isMOGEFRestricted:x,album:h,type:y,section:f,usePlayContextItem:C,isAutoPlay:k=!1,isEnhanced:N,queueSpec:P,trackContextUri:I}){const R=(0,se.s)(),w=(0,g.K)(),{triggerPlay:U,togglePlay:A}=C({uid:i,uri:e,index:l}),{spec:S}=(0,j.r)(B.i,{data:{position:l,reason:"",uri:e}}),{isActive:O,isPlaying:T}=(0,ie.te)(e),q=(0,s.useCallback)(((t,s)=>{i?U({loggingParams:s},(()=>w.skipToNext({uri:e,uid:i}))):U({loggingParams:s})}),[w,U,e,i]),Q=(0,s.useCallback)((t=>{i?A({loggingParams:t},(()=>O?T?w.pause():w.resume():w.skipToNext({uri:e,uid:i}))):A({loggingParams:t})}),[w,A,e,i,O,T]),F=y===Pe.TRACK,L=y===Pe.EPISODE,$=y===Pe.CHAPTER,Ee=L&&"video"===h?.mediaType,Ie=y===Pe.LOCAL,Re=y===Pe.AD,we=r?.map((e=>e.name)).join(d.Ru.getSeparator())||"",Ue=(0,ee.T)(e),Ae=(0,Ce.g)(e,m,(0,D.Pk)(e)),{badges:Se,hasBadges:Oe}=(0,ne.b)({downloadAvailability:Ue,isExplicit:c,isMOGEFRestricted:x,isEnhanced:N}),Te=(0,Ne.X)();let qe;qe=L?(0,v.jsx)(G.b,{uri:e,uid:k?void 0:i,showUri:h.uri,contextUri:t}):$?(0,v.jsx)(z.r,{uri:e,removeFromQueueData:{uid:k?void 0:i,contextUri:t}}):Ie?(0,v.jsx)(K.A,{uri:e,uid:k?void 0:i,contextUri:t}):Re?null:(0,v.jsx)(W.P,{uri:e,uid:k?void 0:i,albumUri:h.uri,artists:r,contextUri:t,entityContextUri:I,isSmartRecommendation:N});const Qe=(0,s.useCallback)(((t,s)=>{const{meta:n,uris:a}=t,r=a.map((e=>({uri:e,uid:null})));let l;l=s===H.Y.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},n.section===E.$.NowPlaying?w.addToQueue(r):n.origin===E.$.NowPlaying?w.insertIntoQueue(r,l):w.reorderQueue(r,l)}),[w,i,e]),Fe=(0,s.useCallback)(((t,s)=>{const{items:n}=t;let a;a=s===H.Y.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},w.reorderQueue(n,a)}),[w,i,e]),Le=k?[]:[X.O[D.NQ.TRACK],X.O[D.NQ.EPISODE]],{trackPageEnhancedEnabled:$e,trackPageLinksNoLyricsEnabled:Me}=(0,b.Zo)(),Be=F&&($e||Me);return(0,v.jsx)(p.pZ,{value:"row",index:l,children:(0,v.jsx)(_.h,{menu:qe,children:(0,v.jsxs)(H.w,{uri:e,contextUri:t,index:l,onTriggerPlay:q,isActive:f===E.$.NowPlaying&&O,ariaRowIndex:l,isPlayable:Ae,ageRestricted:x,spec:S,dragMetadata:{name:n,createdBy:we,sectionId:f},onInsert:(i,t,s,n,a)=>{Qe({uris:i,dropIndex:t,meta:a},s),P&&R.logInteraction(P.dragAddItemToQueue({itemToAddToQueue:e}))},onMove:(e,i,t,s)=>{Fe({items:e,dropIndex:i,meta:s},t),P&&R.logInteraction(P.dragSort())},allowedDropTypes:Le,children:[(0,v.jsx)(ge.y,{ariaColIndex:0,children:(0,v.jsx)(me.$,{uri:e,playAriaLabel:d.Ru.get("tracklist.a11y.play",n,we),isPlaying:f===E.$.NowPlaying&&T,isActive:f===E.$.NowPlaying&&O,spec:S,onClick:(e,i)=>{Q(i)},children:(0,v.jsx)(he.a,{children:l+u+1})})}),(0,v.jsxs)(ye.U,{ariaColIndex:1,children:[(0,v.jsx)(ce.e,{src:o,isVideo:Ee,isEpisode:L||$}),(0,v.jsxs)(de.l,{children:[(0,v.jsx)(ae.R,{enabled:Be,uri:e,children:(0,v.jsx)(fe.p,{titleText:n,children:n})}),Oe&&(0,v.jsxs)(ue.P,{children:[Se.enhanced&&(0,v.jsx)(M.R,{size:"small",className:Z.A.enhanced,title:d.Ru.get("web-player.smart-shuffle.icon-hover-label"),"aria-label":d.Ru.get("web-player.smart-shuffle.icon-hover-label")}),Se.download&&(0,v.jsx)(Y._,{}),Se.explicit&&(0,v.jsx)(J.g,{}),Se.nineteen&&(0,v.jsx)(V.q,{className:Z.A.nineteen,size:16})]}),(0,v.jsxs)(be.p,{children:[F&&(0,v.jsx)(le.l,{artists:r,spec:S}),(L||Ie)&&!Ee&&we]})]})]}),(0,v.jsx)(je.o,{ariaColIndex:2,children:(0,v.jsx)(re.g,{nonInteractive:Ie,uri:h.uri,name:h.name,creatorUri:r?.[0]?.uri,spec:S,children:h.name})}),(0,v.jsxs)(pe.l,{ariaColIndex:3,children:[N&&Te&&(0,v.jsx)(te.r,{spec:S,children:(0,v.jsx)(ke.o,{className:Z.A.rowFeedback,contextUri:I,id:i??void 0,uri:e,isActive:f===E.$.NowPlaying&&O})}),!$&&!N&&(0,v.jsx)(ve.d,{uri:e,type:y}),(0,v.jsx)(oe.P,{duration:a}),(0,v.jsx)(xe.Y,{menu:qe,label:d.Ru.get("more.label.track",n,we),spec:S})]})]})})})}),((e,i)=>e.uri===i.uri&&e.index===i.index&&e.name===i.name&&e.isEnhanced===i.isEnhanced)),Ie=s.memo((function({tracks:e,ariaLabel:i,contextUri:t,currentlyPlayingContextUri:n=t,rowNumberOffset:a=0,section:r,usePlayContextItem:l}){const u=(0,w.W)(),o=(0,g.K)(),c=(0,s.useCallback)(((e,i)=>{u({intent:"remove-from-queue",type:"click"}),o.removeFromQueue(e).then(i)}),[o,u]),m=(0,s.useCallback)(((e,i)=>{if((0,O.p)(e)){const s=(0,F.g)(e.show?.images,{desiredSize:40});return(0,v.jsx)(Ee,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,U.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:Pe.EPISODE,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${i}${a}${e.uid}`)}if((0,S.d)(e)){const s=(0,F.g)(e.images||void 0,{desiredSize:40});return(0,v.jsx)(Ee,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,U.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:Pe.CHAPTER,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${i}${a}${e.uid}`)}if((0,A.N)(e)){const s=(0,F.g)(e.images||void 0,{desiredSize:40});return(0,v.jsx)(Ee,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??d.Ru.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:Pe.AD,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${i}${a}${e.uid}`)}if((0,T.v)(e)||(0,q.v)(e)){const s=(0,F.g)(e?.album?.images,{desiredSize:40}),u=e.type===Q.c.TRACK?e:null;return(0,v.jsx)(Ee,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,U.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:u?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:u?.is19PlusOnly??!1,type:u?.isLocal?Pe.LOCAL:Pe.TRACK,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,R.N)(e),trackContextUri:e.metadata?.context_uri??n},`${i}${a}${e.uid}`)}return(0,v.jsx)(L.nd,{height:`${$.FL}px`})}),[a,t,n,r,l]),x=(0,s.useMemo)((()=>[I.$.INDEX,I.$.TITLE_AND_ARTIST,I.$.ALBUM,I.$.DURATION]),[]),h=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid??e.uri})),[]);return(0,v.jsx)($.S4,{ariaLabel:i,tracks:e,nrTracks:e.length,onRemove:c,renderRow:m,resolveItem:h,columns:x})})),Re="vLZJk3f3zoMmc3u9QMrc",we="mP6tR7IgjiamGqpBW5ai",Ue="LIaQPESoX4ijscRRn3lz",Ae="OXu31j8D4EtomwaNzbsk",Se="eJ2FGCSzEv3Bta0m2Haf",Oe=()=>{const{uri:e,description:i,current:t,nextUp:n,queued:a,isEmpty:r,hasQueuedTracks:C,hasNextTracks:I}=(0,f.H)(),{spec:R,logger:w,UBIFragment:U}=(0,j.r)(o.i,{data:{identifier:c.$h.NOWPLAYING_QUEUE,uri:e??""}}),A=(0,s.useMemo)((()=>R.nowPlayingSectionFactory()),[R]),S=(0,s.useMemo)((()=>R.nextInQueueSectionFactory()),[R]),O=(0,s.useMemo)((()=>R.nextFromSectionFactory()),[R]),T=(0,g.K)(),[q,Q]=(0,s.useState)(!1),F=(0,s.useCallback)((()=>{Q(!1)}),[Q]),L=(0,s.useCallback)((()=>{T.clearQueue(),Q(!1)}),[T]),$=(0,s.useCallback)((()=>{let e;const i=S.clearQueueButtonFactory();a.length>0&&(e=i.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:a.length}),w.logInteraction(e))}),[w,S,a.length]),M=(0,s.useCallback)((async()=>{$(),Q(!0)}),[$]),{usePlayContextItem:B}=(0,y.P)({uri:e??""},{featureIdentifier:"queue"}),D=(0,s.useCallback)((async()=>{if(!I)return;const i=R.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});w.logInteraction(i)}),[I,w,R,e]);return(0,b.oQ)(b.VW.QueuePage),r?(0,v.jsx)(P.K,{}):(0,v.jsxs)("div",{className:Re,children:[(0,v.jsx)(m.Q,{children:d.Ru.get("queue.page-title")}),(0,v.jsx)(U,{spec:R,children:(0,v.jsx)(h.Z,{className:we,emptyStateComponent:(0,v.jsx)(u.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:we,children:d.Ru.get("playback-control.queue")})})}),t&&e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:Ue,children:d.Ru.get("queue.now-playing")}),(0,v.jsx)(U,{spec:A,children:(0,v.jsx)(p.pZ,{value:"now-playing",children:(0,v.jsx)(Ie,{ariaLabel:d.Ru.get("queue.now-playing"),tracks:[t],contextUri:e,section:E.$.NowPlaying,usePlayContextItem:B})})})]}),C&&e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:l()(Se,Ue),children:[(0,v.jsx)(u.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",children:d.Ru.get("queue.next-in-queue")}),C&&(0,v.jsx)(k,{onClick:M})]}),(0,v.jsx)(U,{spec:S,children:(0,v.jsx)(p.pZ,{value:"next-in-queue",children:(0,v.jsx)(Ie,{ariaLabel:d.Ru.get("queue.next-in-queue"),tracks:a,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",currentlyPlayingContextUri:e,section:E.$.NextInQueue,usePlayContextItem:B})})})]}),I&&e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:Ue,children:i&&!(0,f.K)(t)?(0,v.jsxs)("span",{className:"standalone-ellipsis-one-line",children:[d.Ru.get("queue.next-from"),"Â ",(0,v.jsx)(x.Link,{className:Ae,to:e,onClick:D,children:i})]}):d.Ru.get("queue.next-up")}),(0,v.jsx)(U,{spec:O,children:(0,v.jsx)(p.pZ,{value:"next-up",children:(0,v.jsx)(Ie,{ariaLabel:d.Ru.get("queue.next-up"),tracks:n,rowNumberOffset:1+(a?.length||0),contextUri:"spotify:app:queue:NextUp",currentlyPlayingContextUri:e,section:E.$.NextUp,usePlayContextItem:B})})})]}),(0,v.jsx)(N.p,{itemCount:a?.length||0,isOpen:q,onClose:F,onConfirm:L})]})};var Te=t(74817);const qe=()=>(0,n.U)()?(0,v.jsx)(a.InstrumentedRedirect,{to:"/history"}):(0,v.jsx)(Te.U,{children:(0,v.jsx)(s.Suspense,{fallback:null,children:(0,v.jsx)(Oe,{})})})},74137:(e,i,t)=>{t.d(i,{a:()=>s});const s=e=>e?.linked_from?.uri||e.uri}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map